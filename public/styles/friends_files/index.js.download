function e(){e=function(e,t){return new r(e,void 0,t)};var n=RegExp.prototype,i=new WeakMap;function r(e,n,a){var o=new RegExp(e,n);return i.set(o,a||i.get(e)),t(o,r.prototype)}function a(e,t){var n=i.get(t);return Object.keys(n).reduce((function(t,i){var r=n[i];if("number"==typeof r)t[i]=e[r];else{for(var a=0;void 0===e[r[a]]&&a+1<r.length;)a++;t[i]=e[r[a]]}return t}),Object.create(null))}return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),n&&t(e,n)}(r,RegExp),r.prototype.exec=function(e){var t=n.exec.call(this,e);if(t){t.groups=a(t,this);var i=t.indices;i&&(i.groups=a(i,this))}return t},r.prototype[Symbol.replace]=function(e,t){if("string"==typeof t){var r=i.get(this);return n[Symbol.replace].call(this,e,t.replace(/\$<([^>]+)>/g,(function(e,t){var n=r[t];return"$"+(Array.isArray(n)?n.join("$"):n)})))}if("function"==typeof t){var o=this;return n[Symbol.replace].call(this,e,(function(){var e=arguments;return"object"!=typeof e[e.length-1]&&(e=[].slice.call(e)).push(a(e,o)),t.apply(this,e)}))}return n[Symbol.replace].call(this,e,t)},e.apply(this,arguments)}function t(e,n){return t=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},t(e,n)}function n(e,t,n,i,r,a,o){try{var s=e[a](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(i,r)}function i(e){return function(){var t=this,i=arguments;return new Promise((function(r,a){var o=e.apply(t,i);function s(e){n(o,r,a,s,l,"next",e)}function l(e){n(o,r,a,s,l,"throw",e)}s(void 0)}))}}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s=new Promise((e=>{"loading"!==document.readyState?e():document.addEventListener("DOMContentLoaded",(()=>e()))})),l=new Promise((e=>{window.W.leafletIsLoaded?e():window.addEventListener("leafletIsLoaded",(()=>e()))}));Promise.all([s,l]).then((()=>{var t,n=[],r=e=>n.length?n.map((t=>{var{ts:n,txt:i}=t;return"".concat(i," (").concat(e-n,"ms ago at ").concat(n,")")})).join("\n"):void 0,s=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1/0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0,r=getComputedStyle(document.documentElement).getPropertyValue(e),a=r?parseInt(r.replace(/^\D*(\d+)\D*.*$/,"$1")):0;a>=n&&a<=i&&document.documentElement.style.setProperty(e," ".concat(a+t,"px"))},l=(e,t,n)=>e.classList[t?"add":"remove"](n),c=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:document.body,i=n.className;e.test(i)?n.className=i.replace(e,t):n.classList.add(t)},d='[data-plugin="plugins"]',u=Object.freeze({__proto__:null,adjustCssValue:s,defaultPluginsAttachPoint:d,replaceClass:c,toggleClass:l}),h=window.navigator.userAgent,m=/android/i.test(h)?"android":/(iPhone|iPod|iPad)/i.test(h)?"ios":"desktop",p=W.detectedDevice,v=()=>{document.body.classList.add("platform-".concat(m));var e=()=>document.documentElement.style.setProperty("--vh","".concat(window.innerHeight/100,"px"));window.addEventListener("resize",e),window.addEventListener("orientationchange",e),e()};"complete"===document.readyState?v():window.addEventListener("load",v);var f=Object.freeze({__proto__:null,device:p,platform:m}),g=W.version,w=W.target,y=m,b=p,T=["en","zh-TW","zh","ja","fr","ko","it","ru","nl","cs","tr","pl","sv","fi","ro","el","hu","hr","ca","da","ar","fa","hi","ta","sk","uk","bg","he","is","lt","et","vi","sl","sr","id","th","sq","pt","nb","es","de","bn"],_="https://ims.windy.com",S="https://node.windy.com",E="https://tiles.windy.com",P="v/".concat(W.assets),A=["surface","100m","975h","950h","925h","900h","850h","800h","700h","600h","500h","400h","300h","250h","200h","150h","10h"],C=["radar","satellite","radarPlus","wind","gust","gustAccu","turbulence","icing","rain","rainAccu","snowAccu","snowcover","ptype","thunder","temp","dewpoint","rh","deg0","wetbulbtemp","solarpower","uvindex","clouds","hclouds","mclouds","lclouds","fog","cloudtop","cbase","visibility","cape","ccl","waves","swell1","swell2","swell3","wwaves","sst","currents","currentsTide","no2","pm2p5","aod550","gtco3","tcso2","go3","cosc","dustsm","pressure","efiTemp","efiWind","efiRain","capAlerts","soilMoisture40","soilMoisture100","moistureAnom40","moistureAnom100","drought40","drought100","fwi","dfm10h","heatmaps","topoMap","hurricanes"],O=["nems","namConus","namHawaii","namAlaska","iconEu","iconD2","arome","aromeAntilles","aromeFrance","aromeReunion","canHrdps","canRdwpsWaves","camsEu","czeAladin","iconEuWaves","hrrrAlaska","hrrrConus","bomAccess","bomAccessAd","bomAccessBn","bomAccessDn","bomAccessNq","bomAccessPh","bomAccessSy","bomAccessVt","ukv","jmaMsm","jmaCwmWaves"],I=["gfs","ecmwf","ecmwfAnalysis","radar","ecmwfWaves","gfsWaves","icon","capAlerts","cams","efi","satellite","radarPlus","cmems","drought","fireDanger","activeFires","topoMap"],R=["ecmwfWaves","gfsWaves","iconEuWaves","canRdwpsWaves","cmems","jmaCwmWaves"],N=["ecmwfWaves","gfsWaves","iconEuWaves","jmaCwmWaves","canRdwpsWaves"],x=["cams","camsEu"],D=["namConus","namHawaii","namAlaska","iconD2","iconEu","iconEuWaves","arome","aromeAntilles","aromeFrance","aromeReunion","canHrdps","canRdwpsWaves","czeAladin","hrrrAlaska","hrrrConus","bomAccess","bomAccessAd","bomAccessBn","bomAccessDn","bomAccessNq","bomAccessPh","bomAccessSy","bomAccessVt","ukv","jmaMsm","jmaCwmWaves"],M=["gfs","ecmwf","icon","mblue"],U=[...I,...O,...x,"mblue"],k=[...M,...D],F="mobile"===b,G="tablet"===b,H="mobile"===b||"tablet"===b,z=Boolean(window.devicePixelRatio&&window.devicePixelRatio>1),B={favs:["POI_FAVS","k"],cities:["POI_FCST","&"],wind:["POI_WIND",""],temp:["POI_TEMP",""],precip:["POI_PRECIP","H"],metars:["POI_AD","Q"],cams:["POI_CAMS","l"],pgspots:["POI_PG",""],kitespots:["POI_KITE",""],surfspots:["POI_SURF","{"],tide:["POI_TIDE","q"],radiation:["POI_RADIATION",""],firespots:["ACTIVE_FIRES",""],airq:["POI_AIRQ",""],radiosonde:["POI_RADIOSONDE",""],empty:["POI_EMPTY","t"]},j=["pressure","gh","temp","deg0"],V="/".concat(P,"/plugins"),Y=Object.freeze({__proto__:null,airQualityProducts:x,assets:P,community:"https://community.windy.com",device:b,globalPointProducts:M,globalProducts:I,iconsDir:"/img/icons7",isMobile:F,isMobileOrTablet:H,isRetina:z,isTablet:G,isolinesType:j,levels:A,levelsData:{"10h":["10hPa","30km FL980"],"150h":["150hPa","13.5km FL450"],"200h":["200hPa","11.7km FL390"],"250h":["250hPa","10km FL340"],"300h":["300hPa","9000m FL300"],"400h":["400hPa","7000m FL240"],"500h":["500hPa","5500m FL180"],"600h":["600hPa","4200m FL140"],"700h":["700hPa","3000m FL100"],"800h":["800hPa","2000m 6400ft"],"850h":["850hPa","1500m 5000ft"],"900h":["900hPa","900m 3000ft"],"925h":["925hPa","750m 2500ft"],"950h":["950hPa","600m 2000ft"],"975h":["975hPa","300m 1000ft"],"100m":["100m","330ft"],surface:["",""]},localPointProducts:D,localProducts:O,maxFavPoisDesktop:7,get nodeServer(){return S},overlays:C,platform:y,pluginsLocation:V,pointProducts:k,pois:B,products:U,seaProducts:R,server:_,setNodeServer:e=>{S=e},supportedLanguages:T,target:w,tileServer:E,version:g,waveProducts:N}),Z=6e4,q=60*Z,X=24*q,Q="bcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789a",J=Q.split(""),$=e=>{var t="";do{t=Q.charAt(e%60)+t,e=Math.floor(e/60)}while(e);return t},K=e=>{for(var t=0,n=0;n<e.length;n++)t=60*t+J.indexOf(e.charAt(n));return t},ee=(e,t)=>Math.sqrt(e*e+t*t),te=e=>{var t=Math.floor(100*(e.lat+90)),n=Math.floor(100*(e.lon+180));return"".concat($(t),"a").concat($(n))},ne=e=>{var t=e.split("a");return{lat:K(t[0])/100-90,lon:K(t[1])/100-180}},ie=()=>{},re="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==",ae=e=>e&&"object"==typeof e&&"lat"in e&&"lon"in e&&!isNaN(+e.lat)&&!isNaN(+e.lon)||!1,oe=e=>parseFloat(e).toFixed(3),se=(e,t)=>{for(var n in e)t(e[n],n)},le=(e,t)=>{if(null===e)return e;if(e instanceof Date)return new Date(e.getTime());if(e instanceof Array){var n=[];return e.forEach((e=>{n.push(e)})),n.map((e=>le(e)))}if("object"==typeof e){var i=a({},e);return Object.keys(i).forEach((e=>{t&&!t.includes(e)||(i[e]=le(i[e]))})),i}return e},ce=function(e,t,n){var i;return function(){for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];var s=this;var l=n&&!i;clearTimeout(i),i=setTimeout((function(){clearTimeout(i),n||e.apply(s,a)}),t),l&&e.apply(s,a)}},de=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=String(e);n.length<t;)n="0"+n;return n},ue=(e,t)=>e?e.replace(/\{\{?\s*(.+?)\s*\}?\}/g,((e,n)=>t&&n in t?String(t[n]):"")):"",he=e=>{var[t,n]=e;return{wind:ee(t,n),dir:10*Math.floor(18+18*Math.atan2(t,n)/Math.PI)}},me=e=>{var[t,n,i]=e;return{period:ee(t,n),dir:10*Math.floor(18+18*Math.atan2(t,n)/Math.PI),size:i}},pe=e=>"number"==typeof e.dir&&"number"==typeof e.wind&&e.dir<=360&&e.wind>=0,ve=e=>pe(e)?'<div class="iconfont" style="transform: rotate('.concat(e.dir,"deg); -webkit-transform:rotate(").concat(e.dir,'deg);">','"',"</div>"):"",fe=(e,t)=>Math.abs(+e.lat-+t.lat)<.01&&Math.abs(+e.lon-+t.lon)<.01,ge=(e,t,n)=>Math.max(Math.min(e,n),t),we=(e,t,n)=>{var i=ge((n-e)/(t-e),0,1);return i*i*i*(i*(6*i-15)+10)},ye=e=>.5+.00277777777777777*e,be=e=>(Math.PI-Math.log(Math.tan(.5*(1-e)*Math.PI)))/(2*Math.PI),Te=e=>be(.5-.00555555555555555*e),_e=0,Se=e=>T.includes(e),Ee=(e,t)=>(e.endsWith("/")&&(e=e.slice(0,-1)),t.startsWith("/")?"".concat(e).concat(t):"".concat(e,"/").concat(t)),Pe=(e,t)=>"".concat(e).concat(/\?/.test(e)?"&":"?").concat(t),Ae=e=>{var t=[];return se(e,((e,n)=>void 0!==e&&t.push("".concat(n,"=").concat(e)))),t.sort().join("&")},Ce=(e,t)=>new Promise(((n,i)=>{var r=document.createElement("script");r.type="text/javascript",r.async=!0,r.onload=()=>{n()},r.onerror=e=>{i(e)},document.head.appendChild(r),t&&"function"==typeof t&&t(r),r.src=e})),Oe=e=>null,Ie=(e,t)=>(t||document).querySelector(e),Re=e=>Boolean("touches"in e&&e.touches),Le=(e,t,n,i,r)=>(.5*-e+3*t*.5-3*n*.5+.5*i)*r*r*r+(e-5*t*.5+2*n-.5*i)*r*r+(.5*-e+.5*n)*r+t,Ne=(e,t,n)=>e+n*(t-e);function xe(e,t,n){var i=new CustomEvent("windyCustomError",{detail:{moduleName:e,msg:t,errorObject:n}});document.dispatchEvent(i),console.error(e,t,n)}var De=Math.min(window.devicePixelRatio||1,2),Me=e=>{var t=new Set(e[0]);for(var n of e.slice(1)){var i=new Set(n);for(var r of t)i.has(r)||t.delete(r)}return[...t]},Ue=e=>{var t=1<<e.z;return e.x=e.x%t,e.x<0&&(e.x+=t),e},ke=e=>"http"===e.substr(0,4)?e:Ee("https://www.windy.com/js",e),We=e=>new Promise((t=>setTimeout(t,e))),Fe=Object.freeze({__proto__:null,$:Ie,addQs:Pe,bicubicFiltering:(e,t,n)=>Le(Le(e[0],e[1],e[2],e[3],t),Le(e[4],e[5],e[6],e[7],t),Le(e[8],e[9],e[10],e[11],t),Le(e[12],e[13],e[14],e[15],t),n),bound:ge,c2kelvin:e=>e+273.15,canvasRatio:De,capitalize:e=>e.charAt(0).toUpperCase()+e.slice(1),char2num:K,clamp0X:(e,t)=>Math.min(Math.max(e,0),t-1),clone:le,copy2clipboard:e=>{var t=document.createElement("textarea");t.value=e,document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t)},cubicHermite:Le,debounce:ce,deg2rad:e=>e*Math.PI/180,degToRad:.017453292,download:(e,t,n)=>{var i=document.createElement("a"),r=e instanceof Blob?e:new Blob([e],{type:t});i.style.display="none",document.body.appendChild(i),window.URL&&(i.href=window.URL.createObjectURL(r)),i.setAttribute("download",n),i.click(),window.URL&&window.URL.revokeObjectURL(i.href),document.body.removeChild(i)},each:se,emptyFun:ie,emptyGIF:re,getAdjustedNow:e=>{var t,n=Date.now()-_e;return e&&((t=n-e)<0&&(_e+=t),t>1e4&&(_e+=t)),n},getLocationOfJsAssets:ke,getNativePlugin:Oe,getRefs:e=>{var t,n="string"==typeof e?Ie(e):e,i={};return(null!==(t=null==n?void 0:n.querySelectorAll("[data-ref]"))&&void 0!==t?t:[]).forEach((e=>{e.dataset.ref&&(i[e.dataset.ref]=e)})),{node:n,refs:i}},hasDirection:pe,intersect:Me,isEmptyObject:e=>0===Object.keys(e).length,isFunction:e=>"function"==typeof e,isNear:fe,isProfessionalStation:e=>/^(ad|wmo|buoy|ship)$/.test(e),isTouchEvent:Re,isValidLang:Se,isValidLatLonObj:ae,isValidNumber:e=>"number"==typeof e&&!isNaN(e),joinPath:Ee,lat01ToYUnit:be,latDegToYUnit:Te,latLon2str:te,lerp:Ne,lerpColor256:(e,t,n)=>e.map(((i,r)=>ge(Ne(e[r],t[r],n),0,255))),loadScript:Ce,logError:xe,lonDegToXUnit:ye,longPressTime:600,normalizeLatLon:oe,num2char:$,pad:de,qs:Ae,radToDeg:57.2957795,removeDiacritics:e=>e.normalize("NFD").replace(/[\u0300-\u036f]/g,""),sanitizeHTML:e=>e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;"),scaleLinear:e=>{var{domain:t,range:n,clip:i}=e,[r,a]=n,[o,s]=t,[l,c]=r>a?[r,a]:[a,r],d=(a-r)/(s-o),u=e=>(e-o)*d+r;return{get:i?e=>Math.max(Math.min(u(e),l),c):u,invert:e=>(e-r)/d+o}},smoothstep:we,spline:(e,t,n,i,r)=>.5*(2*t+(-e+n)*r+(2*e-5*t+4*n-i)*r*r+(3*t-e-3*n+i)*r*r*r),str2latLon:ne,template:ue,throttle:function(e,t){var n,i,r=this;function a(){n=!1,i&&(o.apply(r,i),i=!1)}function o(){for(var o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];n?i=s:(e.apply(r,s),setTimeout(a,t),n=!0)}return o},tsDay:X,tsHour:q,tsMinute:Z,unitXToLonDeg:e=>360*(e-.5),unitXToLonRad:e=>2*(e-.5)*Math.PI,unitYToLatDeg:e=>Math.atan(Math.exp(Math.PI-e*(2*Math.PI)))/(.5*Math.PI)*180-90,unitYToLatRad:e=>2*Math.atan(Math.exp(Math.PI-2*e*Math.PI))-.5*Math.PI,vec2size:ee,wait:We,wave2obj:me,wind2obj:he,windDir2html:ve,wrapCoords:Ue});class Ge{constructor(e){this.latestId=1,this._eventedCache={},this.trigger=this.emit,this.fire=this.emit,this.ident=e.ident}emit(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];((e,t,i)=>{n.push({ts:Date.now(),txt:e+": "+t+("string"==typeof i?" "+i:"")}),n.length>5&&n.shift()})(this.ident,String(e),i[0]);var a=this._eventedCache[e];if(a)for(var o=a.length;o--;){var s=a[o];try{s.callback.call(s.context,...i),s.once&&this.off(s.id)}catch(t){xe("Evented","Failed to call ".concat(String(e)," with data ").concat(JSON.stringify(i)),t)}}this.listenAllMethod&&this.listenAllMethod(e,...i)}on(e,t,n,i){return this.latestId=this.latestId||0,this._eventedCache?(e in this._eventedCache||(this._eventedCache[e]=[]),this._eventedCache[e].push({id:++this.latestId,callback:t,context:n||this,once:i||!1}),this.latestId):this.latestId}once(e,t,n){return this.on(e,t,n,!0)}off(e,t,n){if("number"==typeof e)for(var i in this._eventedCache){var r=this._eventedCache[i];if(r){for(var a=r.length;a--;)r[a].id===e&&r.splice(a,1);0===r.length&&delete this._eventedCache[i]}}else{var o=this._eventedCache[e];if(o){for(var s=o.length;s--;)o[s].callback!==t||n&&n!==o[s].context||o.splice(s,1);this._eventedCache&&0===o.length&&delete this._eventedCache[e]}}}offAll(){this._eventedCache={}}listenAll(e){this.listenAllMethod=e}}var He=Object.freeze({__proto__:null,Evented:Ge}),ze=[!0,!1],Be=e=>"number"==typeof+e&&!isNaN(+e),je=e=>void 0!==e&&"object"==typeof e,Ve=e=>ae(e)||null==e,Ye=e=>void 0!==e&&"string"==typeof e,Ze=e=>null===e||Ye(e),qe=e=>null===e||!isNaN(Number(e)),Xe=e=>e.slice().sort().toString(),Qe=(e,t)=>Xe(e)===Xe(t),Je={overlay:{def:"wind",allowed:C},level:{def:"surface",allowed:A},acRange:{def:12,allowed:Be},timestamp:{def:Date.now(),allowed:Be},path:{def:"",allowed:Ye},isolinesType:{def:"pressure",allowed:j,save:!0},isolinesOn:{def:!1,allowed:ze,save:!0},startUpLastProduct:{def:null,allowed:[...U,null],save:!0,nativeSync:!0},product:{def:"ecmwf",allowed:U},availProducts:{def:["ecmwf"],allowed:Array.isArray,compare:Qe},visibleProducts:{def:["ecmwf"],allowed:Array.isArray,compare:Qe},preferredProduct:{def:"ecmwf",allowed:["ecmwf","gfs","icon","iconEu"]},animation:{def:!1,allowed:ze},calendar:{def:null,allowed:je},availLevels:{def:[...A],allowed:e=>e.every((e=>A.includes(e)))},particlesAnim:{def:"on",allowed:["on","off","intensive"],save:!0},camsPreviews:{def:!0,allowed:ze,save:!0},lastModified:{def:0,allowed:Be},graticule:{def:!1,allowed:ze,save:!0},latlon:{def:!1,allowed:ze,save:!0},lang:{def:"auto",allowed:e=>"auto"===e||Se(e),save:!0,sync:!0},englishLabels:{def:!1,allowed:ze,save:!0,sync:!0},numDirection:{def:!1,allowed:ze,save:!0,sync:!0},hourFormat:{def:"24h",allowed:["12h","24h"],save:!0,sync:!0,nativeSync:!0},country:{def:"xx",save:!0,allowed:e=>/[a-z][a-z0-9]/.test(e)},isImperial:{def:!1,allowed:ze},map:{def:"sznmap",allowed:["sznmap","sat","winter"]},mapLibrary:{def:"leaflet",allowed:["leaflet","maplibre","globe"]},showWeather:{def:!0,allowed:ze,save:!0},stormSettingsLightning:{def:!0,allowed:ze,save:!0},disableWebGL:{def:!1,allowed:ze,save:!0},glParticlesOn:{def:!1,allowed:ze},usedLang:{def:"en",allowed:T,save:!0,sync:!0},lastTimezoneOffset:{def:(new Date).getTimezoneOffset(),allowed:Be,save:!0,sync:!0},particles:{def:{multiplier:1,velocity:1,width:1,blending:1,opacity:1},save:!0,allowed(e){var t;if(!e||"object"!=typeof e)return!1;for(var n in this.def)if("number"!=typeof(t=e[n])||t>2||t<0)return!1;return!0}},startUp:{def:"ip",allowed:["ip","gps","location","last"],save:!0,nativeSync:!0},startUpLastPosition:{def:{lat:50,lon:14,zoom:4,source:"maps"},allowed:e=>null!==e&&ae(e)&&Number.isInteger(e.zoom)&&("maps"===e.source||"globe"===e.source),save:!0,nativeSync:!0},homeLocation:{def:null,allowed:Ve,save:!0,sync:!0,nativeSync:!0},startUpOverlay:{def:"wind",allowed:C,save:!0,nativeSync:!0},startUpLastOverlay:{def:!1,allowed:ze,save:!0,nativeSync:!0},startUpLastStep:{def:null,allowed:[1,3,null],save:!0,nativeSync:!0},ipLocation:{def:null,allowed:Ve,save:!0,nativeSync:!0},gpsLocation:{def:null,allowed:Ve,save:!0,nativeSync:!0},startupReverseName:{def:null,allowed:je,save:!0},email:{def:"",allowed:e=>/\S+@\S+/.test(e),save:!0,sync:!0},metarsRAW:{def:!1,allowed:ze,save:!0,sync:!0},sessionCounter:{def:0,allowed:Be,save:!0},firstUserSession:{def:0,allowed:Be,save:!0},seenRadarInfo:{def:!1,save:!0,allowed:ze},detailLocation:{def:null,allowed:Ve},detail1h:{def:!1,allowed:ze},detailTimestamp:{def:Date.now(),allowed:Be},detailExtended:{def:!1,save:!0,allowed:ze},webcamsDaylight:{def:!1,allowed:ze},capDisplay:{def:"all",allowed:["all","today","tomm","later"]},radarTimestamp:{def:Date.now(),allowed:Be},radarCalendar:{def:null,allowed:je},blitzOn:{def:!0,allowed:ze,save:!0},blitzSoundOn:{def:!0,allowed:ze,save:!0},satelliteTimestamp:{def:Date.now(),allowed:Be},satelliteCalendar:{def:null,allowed:je},radSatFlowOn:{def:!0,allowed:ze,save:!0},satelliteExtraOn:{def:!0,allowed:ze,save:!0},radsatTimestamp:{def:Date.now(),allowed:Be},satelliteInterpolationOverride:{def:!1,allowed:ze},archiveOn:{def:!1,allowed:ze},archiveTimestamp:{def:0,allowed:Be,save:!0},archiveRange:{def:24,allowed:Be,save:!0},startupWeatherShown:{def:!1,allowed:ze},pois:{def:"favs",allowed:Object.keys(B),save:!0},poisTemporary:{def:"empty",allowed:Object.keys(B)},favPois:{def:["cams","cities","wind","temp","metars","empty"],allowed:e=>Array.isArray(e),save:!0,sync:!0},visibility:{def:!0,allowed:ze},displayLocation:{def:!0,allowed:ze,save:!0},vibrate:{def:!0,allowed:ze,save:!0},donations:{def:[],allowed:Array.isArray,compare:Qe,save:!0,sync:!0},zuluMode:{def:!1,allowed:ze,save:!0},stationsSort:{def:"profi",allowed:["profi","distance"],save:!0},stationCompareModel:{def:"noModel",allowed:Ye,save:!0},subscription:{def:null,allowed:e=>!0,save:!0,nativeSync:!0},subscriptionInfo:{def:null,allowed:je},pendingSubscription:{def:null,allowed:Ze,save:!0},failedSubscriptionPayment:{def:null,allowed:Ze,save:!0},notifications:{def:null,allowed:je,save:!0,sync:!0},badgeNumber:{def:0,allowed:Be,save:!0},user:{def:null,allowed:je,save:!0,nativeSync:!0},userToken:{def:null,allowed:Ye,save:!0,nativeSync:!0},authHash:{def:null,allowed:Ye,save:!0,nativeSync:!0,watchSync:!0},lastPoiLocation:{def:null,allowed:Ve},pickerLocation:{def:null,allowed:e=>null===e||Ve(e)},mapCoords:{def:null,allowed:Ve},unresolvedErrors:{def:[],allowed:Array.isArray},closedErrors:{def:[],allowed:Array.isArray,save:!0,nativeSync:!0},launchedBy:{def:null,allowed:Ye},showDailyNotifications:{def:!1,allowed:ze,nativeSync:!0,save:!0},appReviewPluginShown:{def:null,allowed:qe,nativeSync:!0,save:!0},systemAppReviewDialogShown:{def:null,allowed:qe,nativeSync:!0,save:!0},appReviewLastVersion:{def:null,allowed:Ze,nativeSync:!0,save:!0},appReviewDialogLeaveForLater:{def:!1,allowed:ze,save:!0},skipAppReviewNecessaryConditions:{def:!1,allowed:ze,save:!0},favOverlaysMobile:{def:[],allowed:Array.isArray,save:!0,sync:!0},favOverlaysDesktop:{def:[],allowed:Array.isArray,save:!0,sync:!0},favPoisMobile:{def:[],allowed:Array.isArray,save:!0,sync:!0},mobileMenuFilter:{def:"all",allowed:["all","wind","rain","sea","airQ","drought","temp","warnings","clouds","search"]},connection:{def:!0,allowed:ze},pickerMobileTimeout:{def:"6",allowed:["3","6","9","12","always"],save:!0,sync:!0},changeDetailOnMapDrag:{def:!1,allowed:ze,save:!0,sync:!1},displayHeliports:{def:!1,allowed:ze,save:!0},displayAirspaces:{def:!0,allowed:ze,save:!0},displayAdStations:{def:!0,allowed:ze,save:!0},displayWMOStations:{def:!0,allowed:ze,save:!0},displayMadisPWStations:{def:!0,allowed:ze,save:!0},displayShipStations:{def:!0,allowed:ze,save:!0},stationCompareHiddenProducts:{def:[],allowed:Array.isArray,save:!0,sync:!0},consent:{def:null,allowed:je,save:!0,sync:!0},analyticsConsentRequired:{def:null,allowed:ze,save:!0},youtubeConsent:{def:null,allowed:je,save:!0,sync:!0},twitterConsent:{def:null,allowed:je,save:!0,sync:!0},soundingIsSkewTlogP:{def:!1,save:!0,allowed:ze},appLocalStorageCounter:{def:0,allowed:Be,nativeSync:!1,save:!0},installedPlugins:{def:[],allowed:Array.isArray,save:!0},rhMenuArrangeMode:{def:!1,allowed:ze},persistentWidgets:{def:!1,allowed:ze,save:!0,sync:!0},userInterests:{def:[],allowed:Array.isArray,save:!0,sync:!0},onboardingFinished:{def:!1,allowed:ze,save:!0,sync:!0},locationPermissionsGranted:{def:!1,allowed:ze,save:!0},doNotShowLocationPermissionsPopup:{def:!1,allowed:ze,save:!0},locationPermissionsPopupShown:{def:null,allowed:qe,save:!0},loginAndFinishAction:{def:null,allowed:je,save:!0},favsFilter:{def:[],allowed:Array.isArray,save:!0},pushNotificationsReady:{def:!1,allowed:ze}},$e={isAvbl:!1,put:(e,t)=>window.localStorage.setItem(e,JSON.stringify(t)),hasKey:e=>e in window.localStorage,get:e=>{var t=window.localStorage.getItem(e);return t?JSON.parse(t):null},remove:e=>window.localStorage.removeItem(e)},Ke={},et={isAvbl:!1,put:(e,t)=>Ke[e]=t,hasKey:e=>e in Ke,get:e=>e in Ke?Ke[e]:null,remove:e=>delete Ke[e]};try{if(window.localStorage.setItem("test","bar"),"bar"!==window.localStorage.getItem("test"))throw new Error("Comparsion failed");window.localStorage.removeItem("test"),$e.isAvbl=!0}catch(e){0}var tt=$e.isAvbl?$e:et,nt=new Map;var it=new class extends Ge{constructor(){var e;super(...arguments),e=this,o(this,"defineProperty",((e,t,n)=>{Je[e][t]=n})),o(this,"getProperty",(e=>Je[e])),o(this,"hasProperty",(e=>e in Je)),o(this,"remove",(function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{doNotCheckValidity:!0};e.set(t,null,n)})),o(this,"getAll",(()=>{Object.keys(Je).map((e=>console.log("".concat(e,":"),this.get(e))))})),o(this,"getAllowed",(e=>{var t=Je[e].allowed;return t&&Array.isArray(t)?t:"Allowed values are checked by function"})),o(this,"insert",((e,t)=>{Je[e]=t}))}setDefault(e,t){Je[e].def=t,nt.delete(e)}set(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=Je[e];if(!i)throw new Error('Cannot find "'.concat(e,'" key in dataSpecifications'));if(!n.doNotCheckValidity&&!this.isValid(i,t))return!!this.isAsyncStore(i)&&Promise.reject();if(i.syncSet&&(n.forceChange||this.wasChanged(e,i,t))){var r=i.syncSet(t);if(n.forceChange||this.wasChanged(e,i,r))return this.setFinally(e,i,n,r),!0}else{if(this.isAsyncStore(i)){if(n.forceChange||this.wasChanged(e,i,t)){var a=i.asyncSet(t);return a.then((t=>{(n.forceChange||this.wasChanged(e,i,t))&&this.setFinally(e,i,n,t)})).catch((n=>console.error("store: Unable to change store value ".concat(e,", ").concat(t),n))),a}return Promise.resolve(t)}if(n.forceChange||this.wasChanged(e,i,t))return this.setFinally(e,i,n,t),!0}return!1}getDefault(e){return Je[e].def}isAsyncStore(e){return Boolean("asyncSet"in e&&e.asyncSet)}wasChanged(e,t,n){return t.compare?!t.compare(n,this.get(e)):nt.has(e)?nt.get(e)!==n:this.getDefault(e)!==n}get(e,t){if(nt.has(e)&&(null==t||!t.forceGet))return nt.get(e);var n,i=Je[e];if(!i)throw new Error('Cannot find "'.concat(e,'" key in dataSpecifications'));return i.save&&tt.isAvbl&&(null!==(n=tt.get("settings_".concat(e)))||null!=t&&t.forceGet)?this.isValid(i,n)||(console.error("store: Attempt to get invalid value from localStorage: ".concat(e)),n=i.def):n=i.def,null!=t&&t.forceGet||nt.set(e,n),n}isValid(e,t){return"function"==typeof e.allowed?e.allowed(t):Array.isArray(e.def)?Array.isArray(t)&&t.every((t=>e.allowed.includes(t))):e.allowed.includes(t)}setFinally(e,t,n,i){if(null===i?nt.delete(e):nt.set(e,i),t.save&&!n.doNotStore&&tt.isAvbl){var r=n.update||Date.now();tt.put("settings_".concat(e),i),t.sync&&(t.update=r,tt.put("settings_".concat(e,"_ts"),r),tt.put("lastSyncableUpdatedItem",r)),this.get("user")&&t.sync&&!n.doNotSaveToCloud&&this.emit("_cloudSync")}this.emit(e,null===i?t.def:i,n.UIident)}}({ident:"store"}),rt=null,at=!1;function ot(e){fetch("/services/connection",{method:"HEAD"}).then((t=>{var n=t.status>=200&&t.status<400;e(n)})).catch((()=>e(!1)))}function st(){rt&&(clearInterval(rt),rt=null)}function lt(e){e&&(it.set("connection",!0),document.body.classList.remove("connection-is-offline"),at=!1,st())}function ct(){at||(at=!0,ot((e=>{e?lt(!0):(st(),it.set("connection",!1),document.body.classList.add("connection-is-offline"),rt=setInterval((()=>{ot(lt)}),2e3))})))}window.addEventListener("offline",ct),window.addEventListener("online",ct);var dt,ut,ht=Object.freeze({__proto__:null,testNetworkConnection:ct}),mt=null,pt=tt.get("UUID")||(ut=(dt=()=>Math.floor(65536*(1+Math.random())).toString(16).substring(1))()+dt()+"-"+dt()+"-"+dt()+"-"+dt()+"-"+dt()+dt()+dt(),tt.put("UUID",ut),ut),vt=null;vt&&vt.getInfo().then((e=>{mt=e})),it.get("firstUserSession")||it.set("firstUserSession",Date.now());var ft=()=>pt,gt=Object.freeze({__proto__:null,getDeviceID:ft,getDeviceInfo:()=>mt});class wt{constructor(e){this.size=0,this.limit=e,this._keymap={}}put(e,t){var n={key:e,value:t,older:void 0};if(this._keymap[e]=n,this.tail?(this.tail.newer=n,n.older=this.tail):this.head=n,this.tail=n,this.size===this.limit)return this.shift();this.size++}toJSON(){for(var e=[],t=this.head;t;)e.push({key:t.key,value:t.value}),t=t.newer;return e}shift(){var e=this.head;return e&&this.head&&(this.head.newer?(this.head=this.head.newer,this.head.older=void 0):this.head=void 0,e.newer=e.older=void 0,delete this._keymap[e.key]),e}get(e){var t=this._keymap[e];if(void 0!==t)return t===this.tail||(t.newer&&(t===this.head&&(this.head=t.newer),t.newer.older=t.older),t.older&&(t.older.newer=t.newer),t.newer=void 0,t.older=this.tail,this.tail&&(this.tail.newer=t),this.tail=t),t.value}remove(e){var t=this._keymap[e];if(t)return delete this._keymap[t.key],t.newer&&t.older?(t.older.newer=t.newer,t.newer.older=t.older):t.newer?(t.newer.older=void 0,this.head=t.newer):t.older?(t.older.newer=void 0,this.tail=t.older):this.head=this.tail=void 0,this.size--,t.value}removeAll(){this.head=this.tail=void 0,this.size=0,this._keymap={}}forEach(e){for(var t=this.head;t;)e(t.value,"".concat(t.key)),t=t.newer}}var yt=new wt(50),bt="",Tt=0,_t=ft(),St=it.get("sessionCounter"),Et="application/json binary/".concat(W.encodedVersion),Pt=new RegExp("^/users/","i"),At=new RegExp("^https://account.windy.com/","i"),Ct=new RegExp("^/citytile/","i"),Ot=e=>{var t=document.head.querySelector('meta[name="token"]'),n={token:null==t?void 0:t.content,token2:it.get("userToken")||"pending",uid:_t,sc:St,pr:+e,v:g};bt=Ae(n)},It=e=>(e=>!e.startsWith("http")&&!/^v\/\d*/.test(e))(e)||Ct.test(e)||e.startsWith("http://localhost:3000")||/^https:\/\/(dev|staging|dev-windy-backend-\S+)\.windy\.com(:\d+)?\//.test(e),Rt=e=>It(e)?(e.startsWith("http")||(e=Ee(S,e)),bt&&(e=Pe(e,bt)),e=Pe(e,"poc=".concat(++Tt))):e;Ot(!0),it.on("userToken",(()=>Ot(!1)));class Lt extends Error{constructor(e,t,n){super(t),this.status=e,this.message=t,this.responseText=n}}var Nt=e=>({status:e.status,data:e.data&&e.isJSON?JSON.parse(e.data):e.data}),xt=function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("object"==typeof r.qs){var a=Ae(r.qs);a&&(t=Pe(t,a))}var o,s=Pt.test(t)||At.test(t)||null!==(n=r.withCredentials)&&void 0!==n&&n,l=t;if(void 0===r.cache&&"GET"===e&&(r.cache=!0),r.cache){var c=yt.get(t);if(c){if(o=c,Promise.resolve(o)==o)return c;var{expire:d}=c;if(!(d&&Date.now()>d)){var u=Nt(c);return Promise.resolve(u)}yt.remove(t)}}var h,m=new Headers(r.customHeaders||{}),p=!1;if(It(t)&&(t=Rt(t),/^\/?forecast\//.test(l))){var[,v,f,g,w]=/^(.+)\/forecast\/([^/]+)\/([^/]+)\/(.+)$/.exec(t)||[],y="Zm9yZWNhc3Q/".concat(window.btoa(g).replace(/=/g,"")),b="".concat(f,"/").concat(g,"/").concat(w);t="".concat(v,"/").concat(y,"/").concat(window.btoa(b).replace(/=/g,"")),p=!0}if(t=encodeURI(t),s){h="include";var T=it.get("userToken");T&&m.set("Authorization","Bearer ".concat(T))}m.set("Accept",Et);var _,S,E=null;r.data&&["POST","PUT","PATCH"].includes(e)&&(m.set("Content-Type","application/json; charset=utf-8"),E=JSON.stringify(r.data)),(r.abortSignal||r.timeout)&&({abortSignal:_,timeoutId:S}=((e,t)=>{var n,i=new AbortController;return t&&(n=setTimeout((()=>{i.signal.aborted||i.abort()}),t)),e&&(e.aborted&&i.abort(),e.addEventListener("abort",(()=>{i.abort(),n&&clearTimeout(n)}),{signal:i.signal})),{abortSignal:i.signal,timeoutId:n}})(r.abortSignal,r.timeout));var P=fetch(t,{body:E,credentials:h,headers:m,method:e,signal:_}).then(function(){var e=i((function*(e){if(!e.ok&&304!==e.status){var n=yield e.text();throw new Lt(e.status,"Request failed for URL ".concat(t),null!=n?n:e.statusText)}var i={status:e.status,data:void 0};try{if(r.binary)i.data=yield e.arrayBuffer();else if(p){var a=yield e.text();i.data=window.atob(a),i.isJSON=!0}else{var o,s=yield e.text();i.data=s,i.isJSON=r.json||(null===(o=e.headers.get("content-type"))||void 0===o?void 0:o.includes("json"))}return r.cache&&(i.expire=(r.ttl||3e5)+Date.now(),yt.put(l,i)),Nt(i)}catch(t){throw new Lt(e.status,t.message)}}));return function(t){return e.apply(this,arguments)}}()).catch((e=>{var t;(e instanceof Lt||e.message.includes("aborted")||ct(),e instanceof Lt)||(e=new Lt(null!==(t=e.status)&&void 0!==t?t:0,e.message));throw r.cache&&yt.remove(l),e})).finally((()=>{S&&clearTimeout(S)}));return r.cache&&yt.put(l,P),P},Dt=xt.bind(null,"GET"),Mt=xt.bind(null,"DELETE"),Ut=xt.bind(null,"POST"),kt=xt.bind(null,"PUT"),Wt=xt.bind(null,"PATCH"),Ft=xt.bind(null,"HEAD"),Gt=Object.freeze({__proto__:null,HttpError:Lt,acceptHeader:Et,createEventSource:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{var n=Rt(e),i=new EventSource(n,t);return i.addEventListener("error",(n=>{xe("http","EventSource error event for url=".concat(e,", options=").concat(JSON.stringify(t)),n)})),i}catch(e){return xe("http","Failed to create EventSource",e),null}},del:Mt,get:Dt,getURL:Rt,head:Ft,patch:Wt,post:Ut,put:kt}),Ht=Date.now(),zt={},Bt=[],jt=0;function Vt(e,t){return e?e.toString().substr(0,t).toLowerCase().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-").replace(/^-+|-+$/g,""):""}function Yt(e,t,n,i,a,o,s){if(window.top===window.self&&!/Android.* wv\)/.test(window.navigator.userAgent)&&!(++jt>1e3||o&&o instanceof Lt&&0===o.status))try{var l,c,d=Date.now(),u="string"==typeof t?t:"";"error"===e&&"object"==typeof t?(u=t.message,n=n||t.filename,i=i||t.lineno,a=a||t.colno,l=t.error&&t.error.stack):o&&"object"==typeof o&&(u=(t&&"string"==typeof t?t:"")+("message"in o?": ".concat(o.message):""),l="stack"in o&&o.stack);var h=Vt(u,20)||"universal-key",m=0;if((m=h in zt?zt[h]++:zt[h]=0)%10||m>100)return;var p,v=o&&o.constructor&&o.constructor.name||typeof o;try{p=JSON.stringify(o,Object.getOwnPropertyNames(o),4)}catch(e){p="".concat(o," (unable to serialize object: ").concat(e.message,")")}var f=it.get("connection");f||(u="".concat(u," (possibly offline)")),m>0&&(u="(".concat(m,"x) ").concat(u),c=m);var b={errorID:Vt(u,60),timestamp:d,runningMs:d-Ht,type:e,module:s,msg:u,repeated:c,line:i,col:a,url:window.location.href,script:n&&n.replace(/.*\//,""),ver:g,target:w,stack:l,platform:y,error:"<".concat(v,"> ").concat(p),isOnline:f,size:"".concat(window.screen.width,"x").concat(window.screen.height),latestBcast:r(d)},T=JSON.stringify(b);fetch("".concat(S,"/sedlina/err"),{body:T,headers:{"Content-Type":"application/json; charset=utf-8"},method:"POST"}).then((()=>Bt.push(b)))}catch(e){console.error("onError handler failed as well...",e)}}window.onerror=Yt.bind(null,"error"),document.addEventListener("windyCustomError",(e=>{var{moduleName:t,msg:n,errorObject:i}=e.detail;Yt("user",n,null,null,null,i,t),console.error(t,n,i)}));var Zt,qt=Object.freeze({__proto__:null,sentErrors:Bt});L.CanvasLayer=L.Layer.extend({initialize(e){L.Util.setOptions(this,e||{}),this.targetPane="tilePane",this._showCanvasOn=!0,this.onInit()},addTo(e){return this.failed=!1,e.addLayer(this),this},onContextLost(){xe("CanvasLayer","Canvas context is lost")},onContextRestored(){xe("CanvasLayer","Canvas context is restored")},onContextCreationError(e){xe("CanvasLayer","Canvas context creation error: ".concat(e.statusMessage||"Unknown error"))},canvasHooks(e,t){if(e){var n=t?"addEventListener":"removeEventListener";e[n]("webglcontextlost",this.onContextLost,!1),e[n]("webglcontextrestored",this.onContextRestored,!1),e[n]("webglcontextcreationerror",this.onContextCreationError,!1)}else xe("GlParticles","No canvas ".concat(t?"start":"stop"," listening context changes"))},onAdd(e){this._map=e;var t=e.getSize(),n=e.options.zoomAnimation&&L.Browser.any3d;return this._canvas=L.DomUtil.create("canvas","leaflet-canvas"),this.canvasHooks(this._canvas,!0),this.onResizeCanvas(t.x,t.y),L.DomUtil.addClass(this._canvas,"leaflet-layer leaflet-zoom-"+(n?"animated":"hide")),e.getPanes()[this.targetPane].appendChild(this._canvas),this.onCreateCanvas(this._canvas)?(e.on("resize",this._resize,this),e.on("zoomanim",this._animateZoom,this),e.on("zoom",this._onZoom,this),e.on("zoomstart",this._onZoomStart,this),e.on("zoomend",this._onZoomEnd,this),this.options.disableAutoReset||e.on("moveend",this._moveEnd,this),this._reset(),this._redraw(),this):(this.failed=!0,this.onCanvasFailed(),this)},onRemove(e){var t;return this.onRemoveCanvas(null!==(t=this._canvas)&&void 0!==t?t:void 0),e.getPanes()[this.targetPane].removeChild(this._canvas),e.off("resize",this._resize,this),e.off("zoomanim",this._animateZoom,this),e.off("zoom",this._onZoom,this),e.off("zoomstart",this._onZoomStart,this),e.off("zoomend",this._onZoomEnd,this),this.options.disableAutoReset||e.off("moveend",this._moveEnd,this),this.canvasHooks(this._canvas,!1),this._canvas=null,this},getCanvas(){return this._canvas},showCanvas(e){this._showCanvasOn!==e&&(this._showCanvasOn=e,this._canvas.style.display=this._showCanvasOn?"block":"none")},onResizeCanvas(e,t){this._canvas.width=e,this._canvas.height=t},_resize(e){this.onResizeCanvas(e.newSize.x,e.newSize.y)},_reset(){if(this._map&&this._canvas){var e=this._map.containerPointToLayerPoint([0,0]);L.DomUtil.setPosition(this._canvas,e),this._center=this._map.getCenter(),this._zoom=this._map.getZoom(),this.onReset()}},reset(){this._reset()},onReset(){},_redraw(){this._frame=null},redraw(){return this._frame||(this._frame=L.Util.requestAnimFrame(this._redraw,this)),this},_moveEnd(){this._reset(),this.onMoveEnd()},_onZoomStart(){this.wasOnZoom=!1},_onZoomEnd(){this.canvasDisplay(!0)},canvasDisplay(e){this._canvas&&(this._canvas.style.display=e?"block":"none")},_animateZoom:function(e){this.wasOnZoom&&this.canvasDisplay(!1);var t=this._map.getZoomScale(e.zoom),n=this._map._latLngBoundsToNewLayerBounds(this._map.getBounds(),e.zoom,e.center).min;L.DomUtil.setTransform(this._canvas,n,t)},_onZoom(){this.wasOnZoom=!0,this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform(e,t){if(this._map&&this._canvas&&this._center){var n=this._map.getZoomScale(t,this._zoom),i=this._canvas._leaflet_pos||new L.Point(0,0),r=this._map.getSize().multiplyBy(.5+(this.options.padding||0)),a=this._map.project(this._center,t),o=this._map.project(e,t).subtract(a),s=r.multiplyBy(-n).add(i).add(r).subtract(o);L.DomUtil.setTransform(this._canvas,s,n)}},onInit(){},onCreateCanvas:()=>!0,onCanvasFailed(){},onRemoveCanvas(){},onMoveEnd(){},onZoomEnd(){}});try{Zt=decodeURIComponent(window.location.pathname)}catch(e){Zt="/"}var Xt,Qt,Jt=Zt,$t=null,Kt=null;(Xt=/^\/(zh-TW|[a-z]{2})(\/.*)?$/.exec(Zt))&&Se(Xt[1])&&($t=Xt[1],Zt=Xt[2]),(Qt=/^\/-(?:[^0-9/][^/]+)(?:-(\w+))(?:[^/]*)$/.exec(Zt))?(Kt=Qt[1],Zt="/"):(Qt=/^\/-(?:[^0-9/][^/]+)?(\/.+)$/.exec(Zt))&&(Zt=Qt[1]);var en={lang:$t,purl:Zt,startupUrl:Jt,overlay:Kt},tn={},nn=["accumulations","alerts","appreview","articles","consent","distance","favs","hurricanes","info","langs","lib","menu","notifications","onboarding","products","register","settings","sounding","station","subscription","watchface","webcams","widgetspromo"],rn={MON:"Monday",TUE:"Tuesday",WED:"Wednesday",THU:"Thursday",FRI:"Friday",SAT:"Saturday",SUN:"Sunday",MON2:"Mon",TUE2:"Tue",WED2:"Wed",THU2:"Thu",FRI2:"Fri",SAT2:"Sat",SUN2:"Sun",SMON01:"Jan",SMON02:"Feb",SMON03:"Mar",SMON04:"Apr",SMON05:"May",SMON06:"Jun",SMON07:"Jul",SMON08:"Aug",SMON09:"Sep",SMON10:"Oct",SMON11:"Nov",SMON12:"Dec",YES:"Yes",NO:"No",TODAY:"Today",TOMORROW:"Tomorrow",LATER:"Later",ALL:"All",HOURS_SHORT:"hrs",FOLLOW:"Follow us",EMBED:"Embed widget on page",EMBED2:"Embed widget",MENU:"Menu",MENU_SETTINGS:"Settings",MENU_HELP:"Help",MENU_ABOUT:"About us",MENU_LOCATION:"Find my location",MENU_FULLSCREEN:"Fullscreen mode",MENU_DISTANCE:"Distance & planning",MENU_MOBILE:"Download App",MENU_FAVS:"Favorites",MENU_ALERTS:"Alerts",MENU_FEEDBACK:"Feedback",MENU_VIDEO:"Create video or animated GIF",MENU_ERROR:"Error console",MENU_NEWS:"Weather news",MENU_TUTORIALS:"Tutorials",NOTIFICATIONS:"Notifications",SHOW_PICKER:"Show weather picker",TOOLBOX_INFO:"info",TOOLBOX_ANIMATION:"animation",TOOLBOX_START:"Hide/show animated particles",MENU_F_MODEL:"Data",MENU_U_INTERVAL:"Update interval",MENU_D_UPDATED:"Updated",OUTDATED:"Outdated",MENU_D_REFTIME:"Reference time",MENU_D_NEXT_UPDATE:"Next update expected at:",ABOUT_OVERLAY:"About",ABOUT_DATA:"About these data",OVERLAY:"Layer",MODEL:"Forecast model",PROVIDER:"Provider",WIND:"Wind",GUST:"Wind gusts",GUSTACCU:"Wind accumulation",TURBULENCE:"Clear air turbulence",TURBULENCE_NONE:"none",TURBULENCE_LIGHT:"light",TURBULENCE_MODERATE:"moderate",TURBULENCE_SEVERE:"severe",TURBULENCE_EXTREME:"extreme",ICING2:"Icing",ICING_TRACE:"trace",ICING_LIGHT:"light",ICING_MODERATE:"moderate",ICING_HEAVY:"heavy",WIND_DIR:"Wind dir.",TEMP:"Temperature",DISTANCE:"Distance",PRESS:"Pressure",CLOUDS:"Clouds, rain",CLOUDS2:"Clouds",CLOUD_ALT:"Cloud base",CLOUDS_AND_AVIATION:"Clouds, aviation",RADAR:"Weather radar",RADAR_SHORT:"Radar",RADAR_BLITZ:"Radar, lightning",SATELLITE:"Satellite",RADAR_PLUS:"Radar+",TOTAL_CLOUDS:"Total clouds",LOW_CLOUDS:"Low clouds",MEDIUM_CLOUDS:"Medium clouds",HIGH_CLOUDS:"High clouds",CAPE:"CAPE Index",RAIN:"Rain, snow",RAIN_THUNDER:"Rain, thunder",RAIN3H:"Precip. past 3h",JUST_RAIN:"Rain",CONVECTIVE_RAIN:"Convective r.",RAINRATE:"Max. rain rate",LIGHT_THUNDER:"Light thunder",THUNDER:"Thunderstorms",HEAVY_THUNDER:"Heavy thunder",SNOW:"Snow",OZONE:"Ozone layer",PM2P5:"PM2.5",AIR_QUALITY:"Air quality",NO22:"NO₂",AOD550:"Aerosol",TCSO2:"SO₂",GO3:"Surface Ozone",SHOW_GUST:"force of wind gusts",RH:"Humidity",WAVES:"Waves",WAVES2:"Waves, sea",SWELL:"Swell",SWELL1:"Swell 1",SWELL2:"Swell 2",SWELL3:"Swell 3",WWAVES:"Wind waves",ALL_WAVES:"All waves",SWELLPER:"Swell period",RACCU:"Rain accumulation",RACCU_SHORT:"Rain accu.",SACCU:"Snow accumulation",ACCU:"Accumulations",RAINACCU:"RAIN ACCUMULATION",SNOWACCU:"SNOW ACCUMULATION",SNOWCOVER:"Actual Snow Cover",SST:"Surface sea temperature",SST2:"Sea temperature",WATER_TEMP:"Water temp.",CURRENT:"Currents",CURRENT_TIDE:"Tidal currents",VISIBILITY:"Visibility",SURFACE_VISIBILITY:"Surface visibility",ACTUAL_TEMP:"Actual temperature",SSTAVG:"Average sea temperature",AVAIL_FOR:"Available for:",DEW_POINT:"Dew point",DEW_POINT_SPREAD:"Dew point spread",ISA_DIFFERENCE:"ISA difference",SLP:"Pressure (sea l.)",QFE:"Station pressure",SNOWDEPTH:"Snow depth",NEWSNOW:"New snow",SNOWDENSITY:"Snow density",FLIGHT_RULES:"Flight rules",CTOP:"Cloud tops",FREEZING:"Freezing altitude",COSC:"CO concentration",DUSTSM:"Dust mass",WX_WARNINGS:"Weather warnings",PTYPE:"Precipitation type",CCL:"Thermals",FOG:"Fog",HAZE:"Haze",NO_FOG:"No fog",FOG_RIME:"Fog and rime",FLOOD:"Flood",FIRE:"Fire",EFORECAST:"Extreme forecast",FZ_RAIN:"Freezing rain",MX_ICE:"Mixed ice",WET_SN:"Wet snow",RA_SN:"Rain with snow",PELLETS:"Ice pellets",HAIL:"Hail",ELEVATION:"Elevation",MODEL_ELEVATION:"Model elevation",ACTIVE_FIRES:"Active fires",FIRE_INTENSITY:"Fire intensity",SOIL_PROFILE_DEPTH:"Soil profile depth",INTERSUCHO:"Drought monitoring",INTERSUCHO_FIRE_DANGER:"Fire danger",INTERSUCHO_AWD:"Moisture anomaly",INTERSUCHO_AWP:"Drought intensity",INTERSUCHO_AWR:"Soil moisture",INTERSUCHO_FWI:"Fire spread",INTERSUCHO_DFM:"Fuel moisture",INTERSUCHO_40:"0-40cm",INTERSUCHO_100:"0-100cm",INTERSUCHO_AWP_0:"No risk",INTERSUCHO_AWP_1:"Minor",INTERSUCHO_AWP_2:"Mild",INTERSUCHO_AWP_3:"Moderate",INTERSUCHO_AWP_4:"Severe",INTERSUCHO_AWP_5:"Exceptional",INTERSUCHO_AWP_6:"Extreme",INTERSUCHO_FWI_1:"Very low",INTERSUCHO_FWI_2:"Low",INTERSUCHO_FWI_3:"Moderate",INTERSUCHO_FWI_4:"High",INTERSUCHO_FWI_5:"Very high",INTERSUCHO_FWI_6:"Extreme",MORE_LAYERS:"More layers...",MORE_PRODUCTS:"{{count}} more",NONE:"None",ALTITUDE:"Altitude",SFC:"Surface",CLICK_ON_LEGEND:"Click to change units",ALTERNATIVE_UNIT_CHANGE:"Any Layer unit can be changed by clicking on color legend",COPY_TO_C:"Copy to clipboard",SEARCH:"Search location...",JUST_SEARCH:"Search",NEXT:"Next results...",LOW_PREDICT:"Low predictability of forecast",DAYS_AGO:"{{daysago}} days ago:",SHOW_ACTUAL:"Show actual forecast",SHARE:"Share",COPY_LINK:"Copy link",SHARE_ON:"Share on {{name}}",JUST_EMBED:"Embed",POSITION:"Position",WIDTH:"Width",HEIGHT:"Height",DEFAULT_UNITS:"Default units",NOW:"Now",FORECAST_FOR:"Forecast for",ZOOM_LEVEL:"Zoom level",DETAILED:"Detailed forecast for this location",PERIOD:"Period",D_FCST:"Forecast for this location",D_WEBCAMS:"Webcams in vicinity",D_STATIONS:"Nearest weather stations",D_NO_WEBCAMS:"There are no webcams around this location (or we don't know about them)",D_DAYLIGHT:"image during daylight",D_DISTANCE:"distance",D_MILES:"miles",D_MORE_THAN_HOUR:"more than hour ago",D_MIN_AGO:"{{duration}} minutes ago",D_SUNRISE:"Sunrise",D_SUNSET:"sunset",D_DUSK:"dusk",D_SUN_NEVER_SET:"Sun never set",D_POLAR_NIGHT:"Polar night",D_LT2:"local time",D_FAVORITES:"Add to Favorites",D_FAVORITES2:"Remove from Favorites",D_WAVE_FCST2:"Waves and sea",D_MISSING_CAM:"Add new webcam",D_HOURS:"Hours",D_TEMP2:"Temp.",D_PRECI:"Precip.",D_ABOUT_LOC:"About this location",D_ABOUT_LOC2:"About location",D_TIMEZONE:"Timezone",D_WEBCAMS_24:"Show last 24 hours",D_FORECAST_FOR:"{{duration}} days forecast",D_1H_FORECAST:"1h forecast",D_STEPS_1_HOUR:"1 hour",D_STEPS_3_HOURS:"3 hours",D_STEPS_FORECAST:"forecast",D_DISPLAY_AS:"Display as:",D_FCST_MODEL:"Fcst model:",E_MESSAGE:"Awesome weather forecast at",METAR_VAR:"Variable",METAR_MIN_AGO:"{DURATION}m ago",METAR_HOURS_AGO:"{DURATION}h ago",METARS_H_M_AGO:"{DURATION}h {DURATIONM}m ago",METARS_DAYS_AGO:"{DURATION} days ago",METAR_MIN_LATER:"in {DURATION}m",METAR_HOURS_LATER:"in {DURATION}h",METARS_H_M_LATER:"in {DURATION}h {DURATIONM}m",METARS_DAYS_LATER:"in {DURATION} days",DEVELOPED:"Developed with",DELETE:"Delete",FAVS_SYNCHRO_ERROR_TITLE:"Favorites sync error",SHOW_ON_MAP:"Display on map",POI_STATIONS:"Weather stations",POI_AD:"Airports",POI_AIRQ:"Air quality stations",POI_CAMS:"Webcams",POI_PG:"Paragliding spots",POI_KITE:"Kite/WS spots",POI_SURF:"Surfing spots",POI_EMPTY:"Empty map",POI_WIND:"Reported wind",POI_TEMP:"Reported temp.",POI_PRECIP:"Recent precip.",POI_FAVS:"My favorites",POI_FCST:"Forecasted weather",POI_TIDE:"Tide forecast",POI_RADIATION:"Radiation",POI_RADIOSONDE:"Radiosondes",P_ANDROID_APP:"Windy for Android, free on Google Play",ND_MODEL:"Forecast model",ND_COMPARE:"Compare forecasts",ND_DISPLAY:"Display",ND_DISPLAY_BASIC:"Basic",S_ADVANCED_SETTINGS:"Advanced settings",S_COLORS:"Customize color scale",S_SAVE:"Save",S_SAVE2:"Login/Register to save all your settings to the cloud",S_SPEED:"Speed",S_DELETE_INFO:"Delete all my data from this device",U_LOGIN:"Login",U_LOGOUT:"Logout",U_PROFILE:"My profile",OVR_RECOMENDED:"Recommended for:",OVR_ALL:"All",OVR_FLYING:"Flying",OVR_WATER:"Water",OVR_SKI:"Ski",MSG_OFFLINE:"WOW it appears that you are offline :-(",MSG_ONLINE_APP:"Online again, click here to reload app :-)",MSG_LOGIN_SUCCESFULL:"You have successfully logged in!",FIELD_CANNOT_BE_EMPTY:"This field can't be empty",FIELD_INVALID_EMAIL:"This doesn't look like an email address",PASSWORD_EMPTY:"Password can't be empty",PASSWORD_SHORT:"Password is too short",PASSWORD_MISSING_DIGIT:"Password is missing a digit (0-9)",PASSWORD_MISSING_UPPERCASE:"Password is missing an uppercase letter (A-Z)",PASSWORD_MISSING_LOWERCASE:"Password is missing a lowercase letter (a-z)",PASSWORD_DO_NOT_MATCH:"Password and confirmation don't match",ALERTS_LINK_SHORT:"Alert for this spot",MY_ALERTS:"My Alerts",MY_FAVS:"My Favorites",ACTIVE_ALERTS:"active alerts",DIRECTION_N:"N",DIRECTION_NE:"NE",DIRECTION_E:"E",DIRECTION_SE:"SE",DIRECTION_S:"S",DIRECTION_SW:"SW",DIRECTION_W:"W",DIRECTION_NW:"NW",DIRECTIONS:"Directions",DIRECTIONS_ANY:"Any direction",DIRECTIONS_SELECT:"Select directions",ACTIVATE:"Activate",DEACTIVATE:"Deactivate",REGISTER:"Register",REGISTER_HERE:"Register here",DONT_HAVE_ACCOUNT:"Don't have an account?",OR:"or",JUST_LOGIN:"Login",MY_ACCOUNT:"My account",EDIT_ALERT:"Edit alert",ADD_ALERT:"Create alert",ALERT_MIGRATE:"Migrate alert",HOME:"Home",MAP:"Map",MORE:"More",LESS:"Less",COMPARE:"Compare",PRESS_ISOLINES:"Pressure isolines",PART_ANIMATION:"Particles animation",CAMS_PREVIEWS:"Webcams previews",R_TIME_RANGE:"Time range",MY_LOCATION:"My location",ARTICLES:"Articles",NEW:"New!",WHAT_IS_NEW:"What is new:",PRIVACY:"Privacy protection",CONSENT:"Cookie consent",TERMS_OF_USE:"Terms of Use",PRIVACY_POLICY:"Privacy policy",SOUNDING:"Sounding",SOUND_ON:"Sound",BLITZ_ON:"Show lightning",WFORECAST:"weather forecast",TITLE:"Wind map & weather forecast",HURR_TRACKER:"Hurricane tracker",TOC:"Terms and conditions",SEND:"Send",SEARCH_LAYER:"Search layer...",CANCEL_SEARCH:"Cancel search",NOTHING_FOUND:"Nothing found",P_LOCATION:"Please allow Windy to use location services (GPS) while using the app, so we can show weather at your location. We do not store your location at our servers.",DONE:"Done",HMAP:"Outdoor map",LICENCE:"Licence",AIRQ_RANGE_GOOD:"Good",AIRQ_RANGE_MODERATE:"Moderate",AIRQ_RANGE_UNHEALTHY_SENSITIVE:"Unhealthy for sensitive",AIRQ_RANGE_UNHEALTHY:"Unhealthy",AIRQ_RANGE_VERY_UNHEALTHY:"Very unhealthy",AIRQ_RANGE_HAZARDOUS:"Hazardous",POI_MAX_LAYERS:"Maximum is {{num}} favorite layers. Remove some to add new ones.",MENU_WATCHFACES:"Apple Watch Faces",MENU_WIDGETS:"Widgets",MENU_TITLE_ADDONS:"App add-ons",WIND_SPEED:"Wind speed",SOLARPOWER:"Solar power",UVINDEX:"UV Index",WETBULB_TEMP:"Wet-bulb temperature",UV_LOW:"Low",UV_MODERATE:"Moderate",UV_HIGH:"High",UV_VERY_HIGH:"Very high",UV_EXTREME:"Extreme",UV_HIGHEST:"Highest",SUB_GO:"Go Premium",SUB_RENEW:"Renew Premium",SUB_HAVE_REFTIME:"Premium users have just received a new forecast update",SUB_GLOBE_FREE_LIMIT:"Full version of 3D mode is available only to Premium users.",SUB_REASON_TIDES:"<strong>Tide forecast</strong> anywhere in the world",SUB_REASON_FREQUENCY:"Forecast <strong>updates</strong> at least <strong>4 times a day</strong>",SUB_REASON_GRANULARITY:"<strong>1-hour</strong> forecast step",SUB_REASON_LONGTERM:"<strong>10-day forecast</strong> outlook",SUB_OTHER_BENEFITS:"And many other <strong>benefits</strong>",SUB_SEE_DETAILS:"See details",SUB_CUFFS_GRACED:"We're having issues with renewing your subscription",SUB_CUFFS_PAUSED:"Your Premium is paused",SUB_CUFFS_CANCELED_1:"Your subscription ends soon",SUB_CUFFS_CANCELED_2:"Your subscription ends in {{count}} days",SUB_CUFFS_CANCELED_3:"Your subscription ends in {{count}} hours",SUB_CUFFS_CANCELED_4:"Your subscription ends at any moment",SUB_CUFFS_FORECAST:"Soon, you will no longer have access to 10-day forecast",SUB_CUFFS_FEATURE:"Soon, you will no longer have access to this feature.",SUBSCRIPTION:"Subscription",MY_SUBSCRIPTION:"My subscription",RPLANNER:"Route planner",DISPLAY_WARNINGS:"Display warnings for this location",DATA_NOT_AVBL:"Data not available for this location",PROMO_LONG_PRESS_HOME:"Use <strong>long tap</strong> on home button to open detailed forecast for your location.",DETAIL_TIME_ON_MAP:"Time of forecast on map",PROMO_PICKER:'<span class="dotted">Open Settings</span> to change the auto closing time of weather picker.',DETAIL_DRAG_CHECKBOX:"Move the map to change the forecast location",DETAIL_SET_UP_ALERT:"Set up Windy Alert for this location and never miss your desired conditions.",METAR_HELIPORTS:"Display heliports",MAP_AIRSPACES:"VFR airspaces map",GETTING_LOCATION:"Getting your location...",GETTING_LOCATION_ERROR:"Failed to determine your location. Make sure Windy.com has permission to access your location",GETTING_LOCATION_TIMEOUT:"Failed to determine your location",WAVESTIDES:"Wave&Tide",TIDES:"Tides",WAVESTIDES_BROWSER_TITLE:"Wave and tide forecast for {{name}}",PARAGLIDING_BROWSER_TITLE:"Paragliding forecast for {{name}}",WIND_BROWSER_TITLE:"Wind and kitesurfing forecast for {{name}}",D_AQI_RADIATION:"Air quality and radiation monitoring",RADIATION_OK:"Radiation OK",RADIATION_HIGH:"Radiation high",VIEWS:"views",ZOOM_IN:"Zoom in",ZOOM_OUT:"Zoom out",MODE_2D3D:"Switch 2D / 3D mode",AREA:"Area",SUB_EXTENDED:"Subscribe to Windy Premium to get access to extended weather forecast.",HEATMAP:"City heatmaps",VIBRATE:"Vibrate",DISPLAY_STYLE:"Display style",ARCHIVE:"Archive",MSG_EXTERNAL_PLUGIN_UNPUBLISHED:"Unfortunately, plugin {{title}} was unpublished by the author and is no longer available."},an="en",on=it.get("lang"),sn=(navigator.languages?navigator.languages[0]:navigator.language)||"en",ln=en.lang||sn;function cn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return/\|/.test(e)?e.replace(/(\w+)\|(\w+):(\w+)/,((t,n,i,r)=>{var a=rn[n];return a&&r?a.replace(/\{\{[^}]+\}\}/g,r):e})):rn[e]||e}"auto"!==on&&Se(on)&&(ln=on),ln&&(Se(ln)?an=ln:(ln=ln.replace(/-\S+$/,""),an=Se(ln)?ln:"en"));var dn=e=>"/".concat(P,"/lang/").concat("main"!==e?"".concat(e,"/"):"").concat(an,".js"),un=e=>{if("en"===an&&"main"===e)return Promise.resolve();if(e in tn)return tn[e];var t=new Promise(((t,n)=>{var i=dn(e);import(i).then((e=>{Object.assign(rn,e.default),t()})).catch((e=>{xe("trans","Failed to load lang file: ".concat(i),e),n()}))}));return tn[e]=t,t},hn=["t","afterbegin","beforeend","tooltipsrc"],mn=e=>{hn.forEach((t=>{for(var n=e.querySelectorAll("[data-".concat(t,"]")),i=0,r=n.length;i<r;i++){var a=n[i],o=cn(a.dataset[t]);switch(t){case"t":/</.test(o)?a.innerHTML=o:a.textContent=o;break;case"tooltipsrc":a.dataset.tooltip=o;break;case"afterbegin":a.firstChild&&3==a.firstChild.nodeType&&a.removeChild(a.firstChild),a.insertAdjacentHTML(t,o);break;case"beforeend":a.lastChild&&3==a.lastChild.nodeType&&a.removeChild(a.lastChild),a.insertAdjacentHTML(t,o)}}}))};un("main").then((()=>{document.documentElement.lang=an,mn(document.body),it.set("usedLang",an,{forceChange:!0})}));var pn=Object.freeze({__proto__:null,getUrlOfLangFile:dn,loadLangFile:un,navigatorPreferredLang:sn,supportedLangFiles:nn,t:rn,translateDocument:mn}),vn=(e,t)=>{var n=void 0!==t?":"+de(t):"";return"".concat(e%12||12).concat(n).concat(e>=12?" PM":" AM")},fn=(e,t)=>e+":"+(void 0!==t?de(t):"00"),gn=()=>"12h"===it.get("hourFormat")?vn:fn,wn=e=>null!=e?e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","):"",yn=["N","NE","E","SE","S","SW","W","NW","N"],bn=e=>{var t=Math.floor((+e+22.5)/45);return rn["DIRECTION_".concat(yn[t])]||"-"},Tn=e=>"".concat(e,"°"),_n=e=>[Math.abs(0|e),"°",0|(e<0?e=-e:e)%1*60,"'",0|60*e%1*60,'"'].join(""),Sn=e=>e.replace(/[,.]/g," ").replace(/₂/g,"2").replace(/₃/g,"3").replace(/\s+/g,"-").replace(/-+/g,"-"),En=e=>Sn(e).replace(/\/+/g,"-"),Pn=e=>"en"===e?"":"".concat(e,"/"),An=Object.freeze({__proto__:null,DD2DMS:(e,t)=>[e<0?"S":"N",_n(e),", ",t<0?"W":"E",_n(t)].join(""),animateViews:(e,t)=>{setTimeout((()=>((e,t)=>{var n=Date.now(),i=n+4e3,r=()=>{var a=Math.floor(we(n,i,Date.now())*e);t&&(t.textContent="".concat(wn(a)," ").concat(rn.VIEWS)),t&&a<e&&window.requestAnimationFrame(r)};r()})(e,t)),2e3)},countdown:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Math.abs(e-Date.now()),i=Math.floor(n/X),r=Math.floor(n%X/q),a=Math.floor(n%q/Z),o=Math.floor(n%Z/1e3);return t.showSeconds?i||r||a||o?"".concat(i?"".concat(i," days "):"").concat(r||i?"".concat(r,"h "):"").concat(a||r||i?"".concat(a,"m "):"").concat(o,"s"):"1s":i||r||a?"".concat(i?"".concat(i," days "):"").concat(r||i?"".concat(r,"h "):"").concat(a||r||i?"".concat(a,"m"):""):"1m"},getDirFunction:()=>it.get("numDirection")?Tn:bn,getHoursFunction:gn,hourMinuteUTC:e=>{var t=new Date(e);return"".concat(de(t.getUTCHours()),":").concat(de(t.getUTCMinutes()),"Z")},hourUTC:e=>de(new Date(e).getUTCHours())+":00Z",howOld:e=>{var t,n=!1,i=-1;if("diffMin"in e)i=+e.diffMin;else if("ts"in e)i=Math.floor((Date.now()-+e.ts)/6e4);else if("min"in e)i=Math.floor(Date.now()/6e4-+e.min);else{if(!("ux"in e))return"";i=Math.floor((Date.now()/1e3-+e.ux)/60)}i<0&&(null===(t=e.useFuture)||void 0===t||t?n=!0:i=0);if(i=Math.abs(i),e&&e.translate){if(0===i)return rn.NOW;if(i<60){var r=n?rn.METAR_MIN_LATER:rn.METAR_MIN_AGO;return ue(r,{DURATION:i})}if(i<240){var a=Math.floor(i/60),o=i-60*a,s=n?rn.METARS_H_M_LATER:rn.METARS_H_M_AGO;return ue(s,{DURATION:a,DURATIONM:o})}if(i<1440){var l=n?rn.METAR_HOURS_LATER:rn.METAR_HOURS_AGO;return ue(l,{DURATION:Math.floor(i/60)})}var c=n?rn.METARS_DAYS_LATER:rn.METARS_DAYS_AGO;return ue(c,{DURATION:Math.floor(i/1440)})}return(e.useAgo&&n?"in ":"")+(i<60?Math.floor(i)+"m":Math.floor(i/60)+"h "+Math.floor(i%60)+"m")+(e.useAgo&&!n?" ago":"")},obsoleteClass:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:30,n=(Date.now()/1e3-e)/60;return n<.3*t?"fresh":n<t?"normal":"obsolete"},seoLang:Pn,seoString:En,seoUrlString:Sn,thousands:wn,utcOffsetStr:e=>(e<0?"-":"+")+de(Math.abs(Math.round(e)))+":00"});function Cn(e,t,n){var i=0,r=e.length-1;if(n){if(t<e[i])return i;if(t>e[r])return r}for(;i<=r;){var a=Math.floor((i+r)/2),o=e[a],s=e[a+1];if(o===t)return a;if(o<t&&t<s)return t-o<s-t?a:a+1;o<t?i=a+1:r=a-1}}class On{constructor(e){var t,n;this.initProperties(),Object.assign(this,e),this.midnight=On.getMidnight(),this.startOfTimeline=this.startOfTimeline||this.midnight,this.start=this.startOfTimeline.getTime(),this.days=[],this.timestamps=[],this.paths=[],this.minifestFile&&this.createTimestampsFromMinifest(this.minifestFile)?this.minifestValid=!0:(this.createTimestamps(),this.minifestValid=!1);var i=On.add(this.startOfTimeline,this.calendarHours);this.endOfCal=i.getTime(),this.end=null!==(t=e.lastTimestamp)&&void 0!==t?t:Math.min(this.timestamps[this.timestamps.length-1],this.endOfCal);for(var r=On.add(this.startOfTimeline,12),a=0;a<this.calendarHours/24;a++){var o=On.add(r,a,"days"),s=On.add(this.startOfTimeline,a,"days").getTime(),l=On.add(this.startOfTimeline,24),c=On.add(l,a,"days").getTime(),d=On.weekdays[o.getDay()];this.days[a]={display:"".concat(d,"2"),displayLong:d,day:o.getDate(),middayTs:o.getTime(),start:s,end:c,month:o.getMonth()+1,year:o.getFullYear(),premium:Boolean(!e.freeProduct&&a>=6),hasForecast:s<=this.end}}this.premiumStart=!e.freeProduct&&(null===(n=this.days[6])||void 0===n?void 0:n.start)||null}initProperties(){this.calendarHours=240,this.numOfHours=240}boundTs(e){return ge(e,this.start,this.end)}ts2path(e){var t=Cn(this.timestamps,e,!0);return this.paths[t]}createTimestamps(){var e=this.startOfTimeline.getUTCHours()%3;e&&(this.startOfTimeline=On.add(this.startOfTimeline,3-e,"hours"));for(var t=0;t<this.numOfHours;t+=3){var n=On.add(this.startOfTimeline,t,"hours");this.paths.push(On.date2path(n)),this.timestamps.push(n.getTime())}}prepareTimesFromMinifest(e){return e&&"object"==typeof e&&e.ref&&e.dst?(this.refTime=e.ref.replace(/(\d+)-(\d+)-(\d+)T(\d+):.*/,"$1$2$3$4"),this.refTimeTxt=e.ref,this.updateTxt=e.update,this.refTimeTs=new Date(e.ref).getTime(),this.updateTs=new Date(e.update).getTime(),!0):(xe("Calendar","Invalid format of minifest"),!1)}createTimestampsFromMinifest(e){if(!this.prepareTimesFromMinifest(e))return!1;var t=q,n=On.add(new Date(this.refTimeTs),e.dst[e.dst.length-1][2],"hours").getTime();e.dst.forEach((e=>{for(var i=e[1];i<=e[2];i+=e[0]){var r=this.refTimeTs+i*t;r<=n&&(this.timestamps.push(r),this.paths.push(On.date2path(new Date(r))))}}));var i=this.minifestFile.dst[this.minifestFile.dst.length-1][2];return this.numOfHours=Math.max(i,this.numOfHours),this.calendarHours=Math.max(i,this.calendarHours),!0}static date2path(e){return e.toISOString().replace(/(\d\d\d\d)-(\d\d)-(\d\d)T(\d\d):.*/,"$1$2$3$4")}static path2date(e){var t=e.split(/(.{4})(.{2})(.{2})(.{2})/g).filter(Boolean).map((e=>parseInt(e,10)));return new Date(Date.UTC(t[0],t[1]-1,t[2],t[3],0,0))}static ts2string(e){var t=new Date(e),n=t.getDay(),i=t.getDate(),r=On.localeHours(t.getHours());return"".concat(rn[On.weekdays[n]]," ").concat(i," - ").concat(r)}static add(e,t,n){var i=new Date(e.getTime());return i.setTime(e.getTime()+("days"===n?24:1)*t*q),i}static getMidnight(e){var t=e?new Date(e):new Date;return t.setHours(0),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0),t}}o(On,"localeHours",gn()),o(On,"weekdays",["SUN","MON","TUE","WED","THU","FRI","SAT"]);var In=Object.freeze({__proto__:null,Calendar:On});class Rn{constructor(e){var t,n,i,r,a,o,s,l,c,d;this.initProperties(),this.ident=e.ident,this.attachPoint=null!==(t=e.attachPoint)&&void 0!==t?t:this.attachPoint,this.bodyClass=null!==(n=e.bodyClass)&&void 0!==n?n:"on".concat(Rn.iAm,"-").concat(this.ident),this.className=e.className,this.closeOnClick=null!==(i=e.closeOnClick)&&void 0!==i?i:this.closeOnClick,this.html=e.html,this.domEl=null!==(r=e.domEl)&&void 0!==r?r:this.domEl,this.htmlID=e.htmlID,this.ident=e.ident,this.keyboard=null!==(a=e.keyboard)&&void 0!==a?a:this.keyboard,this.timeout=null!==(o=e.timeout)&&void 0!==o?o:this.timeout,this.noAnimation=e.noAnimation,this.onclose=null!==(s=e.onclose)&&void 0!==s?s:this.onclose,this.onclosed=null!==(l=e.onclosed)&&void 0!==l?l:this.onclosed,this.onopen=null!==(c=e.onopen)&&void 0!==c?c:this.onopen,this.unmount=null!==(d=e.unmount)&&void 0!==d?d:this.unmount}close(e){var t,n;if(this.isOpen){var i;if(this.isOpen=!1,null!=e&&e.disableClosingAnimation)null===(i=this.node)||void 0===i||i.classList.add("no-animation");document.body.classList.remove(this.bodyClass),null===(t=this.node)||void 0===t||t.classList.remove("open"),this.onclose(e),null!=e&&e.disableClosingAnimation?(this.onclosed(),this.unmount(),setTimeout((()=>{var e;null===(e=this.node)||void 0===e||e.classList.remove("no-animation")}),50)):this.closingTimer=setTimeout((()=>{this.onclosed(),this.unmount()}),500),this.removeHooks(),!this.closeOnClick&&null!=e&&null!==(n=e.ev)&&void 0!==n&&n.stopPropagation&&e.ev.stopPropagation()}}open(e){if(this.closingTimer&&clearTimeout(this.closingTimer),this.timeoutTimer&&clearTimeout(this.timeoutTimer),this.isOpen)return this;var t;(this.mount(),document.body.classList.add(this.bodyClass),this.addHooks(),null!=e&&e.disableOpeningAnimation)?(null===(t=this.node)||void 0===t||t.classList.add("no-animation","open"),setTimeout((()=>{var e;null===(e=this.node)||void 0===e||e.classList.remove("no-animation")}),50)):setTimeout((()=>{var e;null===(e=this.node)||void 0===e||e.classList.add("open")}),50);return this.isOpen=!0,this.timeout&&(this.timeoutTimer=setTimeout(this.bindedClose,this.timeout)),this.onopen(),this}onopen(){}onclose(e){}onclosed(){}mount(e){this.node||void 0===this.html&&void 0===e||(this.node=this.createNode(e),mn(this.node))}unmount(){var e;this.node&&(null===(e=this.node.parentNode)||void 0===e||e.removeChild(this.node),this.node=void 0)}initProperties(){this.domEl=null,this.closingTimer=null,this.timeoutTimer=null,this.attachPoint=d,this.keyboard=!1,this.closeOnClick=!1,this.timeout=0,this.isOpen=!1,this.bindedClose=e=>{if("outside"===this.closeOnClick)for(var t=e.target instanceof HTMLElement?e.target:null;t;){if(t===this.node)return;t=t.parentElement}this.close.call(this,{ev:e})}}createNode(e){var t=document.createElement("div"),n=e||this.html||"";t.id=this.htmlID||"".concat(Rn.iAm,"-").concat(this.ident),this.className&&(t.className=this.className);var i=document.createElement("div");i.className="closing-x",i.onclick=this.bindedClose,t.innerHTML=n,t.appendChild(i);var r=this.domEl||Ie(this.attachPoint);if(!r)throw new Error("Cannot create node for Window ".concat(this.ident,", target element does not exist."));return r.appendChild(t),t}removeHooks(){this.closeOnClick&&(document.removeEventListener("mousedown",this.bindedClose,!0),document.removeEventListener("touchstart",this.bindedClose,!0)),this.keyboard&&this.node&&this.node.removeEventListener("keydown",this.keyCatcher)}addHooks(){this.closeOnClick&&(document.addEventListener("mousedown",this.bindedClose,!0),document.addEventListener("touchstart",this.bindedClose,!0)),this.keyboard&&this.node&&this.node.addEventListener("keydown",this.keyCatcher)}keyCatcher(e){e.stopImmediatePropagation()}}o(Rn,"iAm","window");var Ln=Object.freeze({__proto__:null,Window:Rn}),Nn=new Ge({ident:"bcast"}),xn=()=>Ie('[data-ref="bottomMessages"]'),Dn=e=>{var t=xn();t&&(t.innerHTML=e)},Mn=()=>{var e=xn();e&&(e.innerHTML="")},Un=Object.freeze({__proto__:null,clear:Mn,insert:Dn}),kn=window.screen,Wn=Ae({ul:sn,sr:"".concat(kn.width,"x").concat(kn.height),cid:ft(),an:"Windy",uh:String(Date.now().toString(32)+Math.random().toString(16)).replace(/\./g,"")}),Fn=1;/utm_/.test(window.location.search)&&(Wn+="&".concat((e=>{for(var t,n=/utm_(source|medium|term|campaign|content)=([^&]+)/g,i={source:"cs",medium:"cm",term:"ck",campaign:"cn",content:"cc"},r=[];t=n.exec(e);)t[1]&&t[1]in i&&r.push("".concat(i[t[1]],"=").concat(t[2]));return r.join("&")})(window.location.search)));var Gn,Hn=!0,zn=null,Bn=()=>{zn=Date.now()},jn=()=>{if(zn&&Gn){var e=zn-Date.now();zn=null,Gn=Math.max(0,Gn-e)}};window.addEventListener("focus",jn,!1),window.addEventListener("blur",Bn,!1),window.addEventListener("pageshow",jn,!1),window.addEventListener("pagehide",Bn,!1),document.addEventListener("visibilitychange",(()=>{"hidden"in document&&document.hidden?Bn():jn()}));var Vn,Yn=e=>{var t="dp=".concat(e,"&dl=").concat(encodeURIComponent(document.location.href),"&").concat(Wn);if(t+="&fv=".concat(Hn,"&ss=").concat(Hn),t+="&dt=".concat(window.W.startTs),Hn){var n=document.referrer;/www.windy.com/.test(n)||(t+="&dr=".concat(encodeURIComponent(n))),Hn=!1,Gn=Date.now()}var i=Date.now(),r=i-Gn;return Gn=i,t+="&et=".concat(r),{code:Fn,reqQs:t}},Zn=e=>{var{code:t,reqQs:n}=Yn(e);Ft("/sedlina/ga/".concat(t,"?").concat(n),{cache:!1})},qn=Object.freeze({__proto__:null,getSedlinaRequestParams:Yn,pageview:Zn});!function(e){e[e.Pending=0]="Pending",e[e.Sent=1]="Sent"}(Vn||(Vn={}));var Xn=new Set(["path","isolinesType","overlay","product","level"]),Qn={},Jn=new Set(["plugin/consent"]),$n=it.get("consent"),Kn=$n?$n.analytics?"analytics":"rejected":"pending",ei=e=>{Qn[e]!==Vn.Sent&&(setTimeout((()=>Zn(e)),100),Qn[e]=Vn.Sent)},ti=(e,t)=>{var n="".concat(e,"/").concat(t||"");"analytics"===Kn||"pending"===Kn&&Jn.has(n)?ei(n):"pending"===Kn&&(Qn[n]=Vn.Pending)};it.on("consent",(e=>{null!=e&&e.analytics?(Kn="analytics",Object.keys(Qn).forEach(ei)):Kn="rejected"})),Nn.on("paramsChanged",((e,t)=>{if(t&&Xn.has(t)){var n=e[t];n&&("path"===t&&(n="".concat(Math.round((it.get("timestamp")-Date.now())/864e5),"d")),"acRange"===t&&(n="".concat(Math.round(it.get("acRange")/24),"d")),ti(t,n))}})),ti("version",g);var ni=Object.freeze({__proto__:null,logPage:ti}),ii=()=>it.get("subscription"),ri=()=>{it.set("detail1h",!1),it.set("startUpLastStep",null)},ai=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(null===e?ri():(it.remove("failedSubscriptionPayment"),document.body.classList.add("subs-".concat(e))),it.set("subscription",e),t.reloadUserToken&&Nn.emit("userReloadInfo"),ti("subscription","tier/".concat(e||"none")),t.subscriptionInfo){var{state:n,platform:i,status:r}=t.subscriptionInfo;ti("subscription","state/".concat(n)),ti("subscription","platform/".concat(i)),ti("subscription","status/".concat(r))}return e},oi=()=>null!==ii(),si=()=>{var e=it.get("subscriptionInfo");if(!e||!e.isSubscription)return null;if(e.isTrial)return null;if(["graced","onhold","paused"].includes(e.state))return{type:e.state};if("canceled"===e.state){var t=Math.abs(Math.round((e.expiresAt-Date.now())/q));if(t<=336)return{type:"expiring",expiresInHours:t}}return null},li=()=>{it.get("pendingSubscription")&&Nn.emit("rqstOpen","pending-subscription")},ci=e=>{if(!e)return"";if("graced"===e.type)return rn.SUB_CUFFS_GRACED;if("onhold"===e.type)return rn.SUB_RENEW;if("paused"===e.type)return rn.SUB_CUFFS_PAUSED;if("expiring"===e.type){if(e.expiresInHours<2)return rn.SUB_CUFFS_CANCELED_4;if(e.expiresInHours<=48)return rn.SUB_CUFFS_CANCELED_3.replace("{{count}}",String(e.expiresInHours));if(e.expiresInHours<=168)return rn.SUB_CUFFS_CANCELED_2.replace("{{count}}",String(Math.round(e.expiresInHours/24)));if(e.expiresInHours<=336)return rn.SUB_CUFFS_CANCELED_1}return""},di=()=>{var e=si(),t=e?ci(e):null;if(t){var n='<span  data-do="rqstOpen,subscription" data-icon="">'.concat(t,"</span>");new Rn({ident:"message-subs-issue",className:"top-message bg-orange clickable",timeout:2*Z,html:n}).open()}};Nn.once("dependenciesResolved",li),Nn.on("checkPendingSubscriptions",li);var ui=Object.freeze({__proto__:null,checkAndRenderSubsIssue:di,checkPendingSubscription:li,clearPendingSubscription:()=>{it.remove("pendingSubscription"),Nn.emit("rqstClose","pending-subscription")},deactivateAllFeatures:ri,getBaitTitle:ci,getIssue:si,getTier:ii,hasAny:oi,setPendingSubscription:e=>{it.set("pendingSubscription",e)},setTier:ai});class hi{constructor(e){o(this,"cacheIsValid",!1),o(this,"lastTimeUpdatedKey","__lastTimeUpdated"),this.storeId=e.storeId,this.initPromise=e.initPromise,this.usesBackendSync=Boolean(e.backendApiEndpoint),this.usesBackendSync&&(this.apiEndpoint="/users/v1/data/".concat(e.backendApiEndpoint))}getAll(){var e=this;return i((function*(){if(e.cacheIsValid)return e.memoryCache;var t=yield e.initPromise;return new Promise(((n,i)=>{var r=t.transaction(e.storeId,"readonly"),a=r.objectStore(e.storeId).getAll();r.commit(),a.onsuccess=()=>{var{result:t}=a,i=t.filter((e=>"object"==typeof e));e.memoryCache=i,e.cacheIsValid=!0,n(i)},a.onerror=e=>{r.abort(),xe("IDB","Failed to find items in database",e),i(e)}}))}))()}removeAll(){var e=this;return i((function*(){e.cacheIsValid=!1;var t=yield e.initPromise;return new Promise(((n,i)=>{var r=t.transaction(e.storeId,"readwrite"),a=r.objectStore(e.storeId).clear();r.commit(),a.onsuccess=()=>{n()},a.onerror=e=>{r.abort(),xe("IDB","Failed to clear store",e),i(e)}}))}))()}hasKey(e){var t=this;return i((function*(){var n=yield t.initPromise;return new Promise(((i,r)=>{var a=n.transaction(t.storeId,"readonly"),o=a.objectStore(t.storeId).count(e);a.commit(),o.onsuccess=()=>{i(!!o.result)},o.onerror=e=>{a.abort(),xe("IDB","Failed to retrieve key",e),r(e)}}))}))()}get(e){var t=this;return i((function*(){var n=yield t.initPromise;return new Promise(((i,r)=>{var a=n.transaction(t.storeId,"readonly"),o=a.objectStore(t.storeId).get(e);a.commit(),o.onsuccess=()=>{void 0===o.result?i(null):i(o.result)},o.onerror=e=>{a.abort(),xe("IDB","Failed to retrieve value from database",e),r(e)}}))}))()}remove(e){var t=arguments,n=this;return i((function*(){var i=t.length>1&&void 0!==t[1]&&t[1];n.cacheIsValid=!1;var r=yield n.initPromise;return n.usesBackendSync&&!i&&(yield Mt("".concat(n.apiEndpoint,"/").concat(encodeURIComponent(e)))),new Promise(((t,a)=>{var o=r.transaction(n.storeId,"readwrite"),s=o.objectStore(n.storeId);n.usesBackendSync&&!i&&s.put(0,n.lastTimeUpdatedKey),s.delete(e),o.commit(),o.oncomplete=()=>t(),o.onerror=e=>{xe("IDB","Failed to remove key from database",e),a(e)}}))}))()}add(e){var t=this;return i((function*(){if(!t.usesBackendSync)throw new Error("Cannot add items to IDB without backend sync");t.cacheIsValid=!1;var n=yield t.initPromise,{data:{value:i,id:r,updated:a}}=yield Ut(t.apiEndpoint,{data:e}),o=a;return new Promise(((e,a)=>{var s=n.transaction(t.storeId,"readwrite"),l=s.objectStore(t.storeId);l.put(i,r),o&&l.put(o,t.lastTimeUpdatedKey),s.commit(),s.oncomplete=()=>{e(r)},s.onerror=e=>{xe("IDB","Failed to add item to database",e),a(e)}}))}))()}put(e,t){var n=arguments,r=this;return i((function*(){var i=n.length>2&&void 0!==n[2]&&n[2];r.cacheIsValid=!1;var a,o=yield r.initPromise;if(r.usesBackendSync&&!i){var s=encodeURIComponent(e),{data:{updated:l}}=yield kt("".concat(r.apiEndpoint,"/").concat(s),{data:t});a=l}return new Promise(((n,i)=>{var s=o.transaction(r.storeId,"readwrite"),l=s.objectStore(r.storeId);l.put(t,e),a&&l.put(a,r.lastTimeUpdatedKey),s.commit(),s.oncomplete=()=>{n()},s.onerror=e=>{xe("IDB","Failed to put item to database",e),i(e)}}))}))()}loadFromCloud(){var e=this;return i((function*(){var t=yield e.get(e.lastTimeUpdatedKey),{status:n,data:i}=yield Dt("".concat(e.apiEndpoint,"?storeTs=").concat(t||0));if(304===n||204===n)return!1;var r=yield e.getAll(),a=i,o=a.map((e=>{var{value:{id:t}}=e;return t}));for(var s of r){var{id:l}=s;o.includes(l)||(yield e.remove(l,!0))}var c=0;for(var{value:d,updated:u}of a)yield e.put(d.id,d,!0),u>c&&(c=u);return yield e.put(e.lastTimeUpdatedKey,c,!0),!0}))()}}var mi=Object.freeze({__proto__:null,IDB:hi}),pi=["userFavs","searchRecents","userAlerts","markedNotams","minifests","seenArticles","seenPromos","customColors"],vi="windy",fi=new Promise(((e,t)=>{var n=e=>{xe("idbInstances","Failed to create IndexedDB database",e),t(e)},i=indexedDB.open(vi);i.onerror=n,i.onblocked=n,i.onsuccess=()=>{var t=i.result,r=pi.filter((e=>!t.objectStoreNames.contains(e)));if(r.length>0){var{version:a}=t;t.close(),console.log("idbInstances: We have to upgrade IDBDatabase, from current version: ".concat(a));var o=indexedDB.open(vi,a+1);o.onerror=n,o.onblocked=n,o.onsuccess=()=>{e(o.result)},o.onupgradeneeded=e=>{var t=e.target.result;r.forEach((e=>{console.log("idbInstances: Creating collection: ".concat(e)),t.createObjectStore(e)})),console.log("idbInstances: IDBDatabase upgraded")}}else e(t)}})),gi=new hi({initPromise:fi,storeId:"userFavs",backendApiEndpoint:"favs"}),wi=new hi({initPromise:fi,storeId:"searchRecents"}),yi=new hi({initPromise:fi,storeId:"userAlerts",backendApiEndpoint:"alerts"}),bi=new hi({initPromise:fi,storeId:"markedNotams",backendApiEndpoint:"notams"}),Ti=new hi({initPromise:fi,storeId:"minifests"}),_i=new hi({initPromise:fi,storeId:"seenArticles"}),Si=new hi({initPromise:fi,storeId:"seenPromos"}),Ei=new hi({initPromise:fi,storeId:"customColors",backendApiEndpoint:"colors"}),Pi=Object.freeze({__proto__:null,customColorsIdb:Ei,initPromise:fi,markedNotamsIdb:bi,minifestsIdb:Ti,searchRecentsIdb:wi,seenArticlesIdb:_i,seenPromosIdb:Si,userAlertsIdb:yi,userFavsIdb:gi});class Ai{constructor(e){var t,n,i,r,a,o,s,l,c,d,u,h,m,p,v,f,g,w,y,b,T;this.modelName=e.modelName,this.ident=null!==(t=e.ident)&&void 0!==t?t:"ecmwf",this.maxTileZoom=null!==(n=e.maxTileZoom)&&void 0!==n?n:{free:10,premium:10},this.animationSpeed=null!==(i=e.animationSpeed)&&void 0!==i?i:3e3,this.animationSpeed1h=null!==(r=e.animationSpeed1h)&&void 0!==r?r:1e3,this.fileSuffix=null!==(a=e.fileSuffix)&&void 0!==a?a:"jpg",this.fileSuffixFallback=null!==(o=e.fileSuffixFallback)&&void 0!==o?o:"jpg",this.JPGtransparency=null!==(s=e.JPGtransparency)&&void 0!==s&&s,this.PNGtransparency=null!==(l=e.PNGtransparency)&&void 0!==l&&l,this.dataQuality=null!==(c=e.dataQuality)&&void 0!==c?c:"normal",this.betterDataQuality=null!==(d=e.betterDataQuality)&&void 0!==d?d:[],this.animation=null===(u=e.animation)||void 0===u||u,this.forecastSize=null!==(h=e.forecastSize)&&void 0!==h?h:240,this.labelsTemp=null===(m=e.labelsTemp)||void 0===m||m,this.overlays=null!==(p=e.overlays)&&void 0!==p?p:[],this.hideProductSwitch=null!==(v=e.hideProductSwitch)&&void 0!==v&&v,this.preferredProduct=null!==(f=e.preferredProduct)&&void 0!==f?f:"ecmwf",this.pathGenerator=null!==(g=e.pathGenerator)&&void 0!==g?g:"",this.isolines=null!==(w=e.isolines)&&void 0!==w?w:[],this.directory=null!==(y=e.directory)&&void 0!==y?y:e.modelIdent&&e.category&&"".concat(e.category,"/").concat(e.modelIdent)||"",this.modelIdent=e.modelIdent,this.category=e.category,this.provider=e.provider,this.interval=e.interval,this.intervalPremium=e.intervalPremium,this.server=e.server,this.metadataServer=e.metadataServer,this.modelResolution=e.modelResolution,this.levels=e.levels,this.levelsOverride=e.levelsOverride,this.bounds=e.bounds,this.logo=e.logo,this.hasAccumulations=e.hasAccumulations,this.minifestTimestamp=0,this.productExpires=0,this.minifest=null,this.loadingPromise=null,this.hasRefTime=!0,this.freeProduct=e.freeProduct,this.preferredAirProduct=null!==(b=e.preferredAirProduct)&&void 0!==b?b:"ecmwf",this.preferredWaveProduct=null!==(T=e.preferredWaveProduct)&&void 0!==T?T:"ecmwfWaves",this.pathGenerator="{server}/im/v3.0/{directory}/{refTime}/{path}/wm_grid_257/<z>/<x>/<y>/{filename}-{level}.{fileSuffix}",this.bindedCheckNewMinifest=this.checkNewMinifest.bind(this),it.on("subscription",(()=>{this.minifest&&(this.expire(),this.loadAndProcessMinifest(!0))}))}refTime(){return this.calendar?this.calendar.refTime:""}getUpdateTimes(){return this.calendar?{refTime:this.calendar.refTimeTxt,minUpdate:this.calendar.updateTs}:null}moveTs(e){if(!(arguments.length>1&&void 0!==arguments[1]&&arguments[1])){var{paths:t,timestamps:n}=this.calendar,i=t.indexOf(it.get("path"));if(i>-1)return i=ge(i+(e?1:-1),0,t.length),it.set("timestamp",n[i],{UIident:"keyboard"}),!0}return!1}getMinifestUrl(){var e=this.metadataServer||"",t=oi()?"?premium=true":"";return"".concat(e,"/metadata/v1.0/").concat(this.directory,"/minifest.json").concat(t)}loadMinifest(){var e=this.getMinifestUrl();return Dt(e)}loadAndGetReftime(){var e=this;return i((function*(){if(e.hasRefTime){var{data:t}=yield e.loadMinifest();return t.ref}}))()}open(){return this.refreshInterval||(this.refreshInterval=setInterval(this.bindedCheckNewMinifest,18e5)),this.hasListeners||(it.on("visibility",this.bindedCheckNewMinifest),this.hasListeners=!0),H||this.printLogo(),this.loadingPromise?this.loadingPromise:Date.now()<this.productExpires?Promise.resolve(this.calendar):(this.loadingPromise=new Promise(((e,t)=>{this.loadAndProcessMinifest().then((()=>{this.setExpireTime(),this.loadingPromise=null,e(this.calendar)})).catch(t)})),this.loadingPromise)}close(){H||this.removeLogo(),this.refreshInterval&&(clearInterval(this.refreshInterval),this.refreshInterval=null),this.hasListeners&&(it.off("visibility",this.bindedCheckNewMinifest),this.hasListeners=!1)}pointIsInBounds(e){if(!this.bounds)return!0;var t=[+e.lat,+e.lon];for(var n of this.bounds)if(this.isPointInsidePolygon(t,n))return!0;return!1}boundsAreInViewport(e){if(!this.bounds)return!0;var t=F?.1:G?.15:.25,n=window.innerWidth*t,i=window.innerHeight*t,r=e.getBounds(),a=e.latLngToContainerPoint(r.getNorthWest()),o=e.latLngToContainerPoint(r.getSouthEast()),s=L.latLngBounds(e.containerPointToLatLng(L.point(a.x+n,a.y+i)),e.containerPointToLatLng(L.point(o.x-n,o.y-i)));for(var l of this.bounds)if(s.intersects(l))return!0;return!1}printLogo(){Mn(),this.logo&&Dn(this.logo)}getCalendar(){return this.calendar?Promise.resolve(this.calendar):this.loadMinifest().then((e=>{var{data:t}=e;return new On({numOfHours:this.forecastSize,product:this.ident,minifestFile:t,freeProduct:this.freeProduct})}))}expire(){this.productExpires=0}getUpdatedMinifest(e){var t=this;return i((function*(){var n="".concat(t.directory).concat(oi()?"-premium":"");if(e.forced)return e;var i=yield Ti.get(n);return i&&"ref"in i?e.ref>=i.ref?e:i:(yield Ti.put(n,e),e)}))()}setExpireTime(){this.productExpires=Date.now()+5*Z}showErrorMessage(e){setTimeout((()=>{it.get("connection")&&new Rn({ident:"message-product-minifest-error",className:"top-message bg-error",timeout:5e3,html:e}).open()}),300)}loadAndProcessMinifest(){var e=arguments,t=this;return i((function*(){var n=e.length>0&&void 0!==e[0]&&e[0];try{var{data:i}=yield t.loadMinifest();t.minifest&&!n&&t.minifest.ref===i.ref||(t.minifest=yield t.getUpdatedMinifest(i),t.infoVersion=i.info,t.calendar=new On({numOfHours:t.forecastSize,product:t.ident,minifestFile:t.minifest,freeProduct:t.freeProduct}),it.set("calendar",t.calendar),it.set("lastModified",new Date(t.minifest.ref).getTime()))}catch(e){xe("Product","Minifest load/parsing failed",e);var r=(null==e?void 0:e.responseText)||"Error downloading ".concat(t.modelName,' data. Check <a href="https://community.windy.com/category/24/system-status" target="_blank">system status</a> whether there is outage.');throw t.showErrorMessage(r),e}}))()}checkNewMinifest(){this.minifestTimestamp+3e5<Date.now()&&"visible"===document.visibilityState&&this.loadAndProcessMinifest().then((()=>{this.minifestTimestamp=Date.now(),this.loadingPromise=null;var e=it.get("product");setTimeout((()=>{it.set("product",this.ident,{forceChange:!0}).then((()=>{setTimeout((()=>{Nn.emit("redrawLayers",{noCache:!0})}),1e3)}))}),e===this.ident?10:0)}))}isPointInsidePolygon(e,t){for(var n=!1,i=0,r=t.length-1;i<t.length;r=i++){var a=t[i][0],o=t[i][1],s=t[r][0],l=t[r][1];o>e[1]!=l>e[1]&&e[0]<(s-a)*(e[1]-o)/(l-o)+a&&(n=!n)}return!!n}removeLogo(){this.logo&&Mn()}}var Ci=Object.freeze({__proto__:null,Product:Ai});class Oi extends Ai{constructor(e){super(a({provider:"BOM",interval:720,intervalPremium:360,modelName:"ACCESS",JPGtransparency:!0,category:"forecast",levels:["surface","950h","925h","900h","850h","800h","700h","600h","500h","400h","300h","250h","200h","150h"],overlays:["wind","temp","wetbulbtemp","pressure","clouds","lclouds","mclouds","hclouds","rh","gust","dewpoint","rain","snowAccu","rainAccu","ptype","gustAccu","ccl","turbulence","icing","visibility"],hasAccumulations:!0,isolines:["pressure","gh","temp"]},e))}}class Ii extends Oi{constructor(e){super(a({modelName:"",modelResolution:1.5,dataQuality:"extreme",maxTileZoom:{free:4,premium:6},forecastSize:36},e))}}class Ri extends Ai{constructor(e){super(a({provider:"MF",interval:720,intervalPremium:360,modelName:"AROME",modelResolution:2.5,JPGtransparency:!0,animation:!0,dataQuality:"extreme",maxTileZoom:{free:4,premium:6},category:"forecast",forecastSize:42,levels:["surface","100m","950h","925h","900h","850h","800h","700h","600h","500h","400h","300h","250h","200h","150h"],overlays:["wind","temp","wetbulbtemp","clouds","lclouds","mclouds","hclouds","rh","gust","cape","dewpoint","rain","snowAccu","rainAccu","ptype","pressure","gustAccu","turbulence"],hasAccumulations:!0,isolines:["pressure","gh","temp"]},e))}}var Li={modelName:"ECMWF",modelResolution:9,provider:"ECMWF",interval:720,intervalPremium:360,maxTileZoom:{free:3,premium:4},dataQuality:"normal"};class Ni extends Ai{constructor(e){super(a(a({},e),Li));try{var t="minifest-".concat(this.modelIdent).concat(oi()?"-premium":""),n=Ie('meta[name="'.concat(t,'"]')),i=n&&n.content,r=JSON.parse(i);this.getUpdatedMinifest(r).then((e=>{if(this.minifest=e,this.calendar=new On({numOfHours:this.forecastSize,product:this.ident,minifestFile:this.minifest,freeProduct:this.freeProduct}),it.set("calendar",this.calendar),!this.calendar.minifestValid)throw new Error("Minifest is not valid");this.setExpireTime()})).catch((e=>{xe("products","Cant create ecmwf calendar from meta tag 2",e)}))}catch(e){xe("products","Cant create ecmwf calendar from meta tag",e)}}static createVirtualCalendar(){var e={v:"2.0",info:"XXXXXXX",ref:(new Date).toISOString().replace(/T.*$/,"T00:34:56Z"),update:(new Date).toISOString(),dst:[[3,3,144],[6,150,240]]};return new On({numOfHours:this.forecastSize,product:this.ident,minifestFile:e,freeProduct:this.freeProduct})}}var xi=Object.freeze({__proto__:null,EcmwfProduct:Ni,EcmwfProductParams:Li});class Di extends Ai{constructor(e){super(a(a({},e),Li))}}var Mi=Object.freeze({__proto__:null,EcmwfAnalysisProduct:Di});class Ui extends Ai{constructor(e){super(a(a({},e),{},{provider:"NCEP",modelName:"HRRR",dataQuality:"extreme",category:"forecast",maxTileZoom:{free:4,premium:6},betterDataQuality:["rain","clouds","lclouds","hclouds","mclouds"],interval:720,JPGtransparency:!0,forecastSize:72,levels:["surface","975h","950h","925h","900h","850h","800h","700h","600h","500h","400h","300h","250h","200h","150h"],overlays:["wind","temp","wetbulbtemp","clouds","rh","cape","gust","pressure","dewpoint","rain","lclouds","hclouds","mclouds","snowAccu","rainAccu","ptype","gustAccu","ccl","turbulence","icing"],hasAccumulations:!0,isolines:["pressure","temp","gh"]}))}}var ki=Object.freeze({__proto__:null,HrrrProducts:Ui}),Wi=["snowcover","wind","temp","wetbulbtemp","solarpower","pressure","clouds","lclouds","mclouds","hclouds","rh","gust","cape","dewpoint","rain","deg0","snowAccu","rainAccu","ptype","gustAccu","fog","ccl","turbulence"];class Fi extends Ai{constructor(e){super(a({provider:"DWD",interval:720,intervalPremium:360,category:"forecast",preferredProduct:"icon",preferredWaveProduct:"ecmwfWaves",animation:!0,betterDataQuality:["rain","clouds","lclouds","mclouds","hclouds"],labelsTemp:!0,levels:["surface","950h","925h","900h","850h","800h","700h","600h","500h","400h","300h","250h","200h","150h"],hasAccumulations:!0,isolines:["pressure","gh","temp","deg0"]},e))}}var Gi=Object.freeze({__proto__:null,IconProducts:Fi,iconOverlays:Wi});class Hi extends Ai{constructor(e){super(a(a({},e),{},{provider:"NOAA",interval:720,intervalPremium:360,modelName:"NAM",dataQuality:"ultra",category:"forecast",maxTileZoom:{free:4,premium:5},betterDataQuality:["rain","clouds","lclouds","hclouds","mclouds"],JPGtransparency:!0,forecastSize:72,levels:["surface","975h","950h","925h","900h","850h","800h","700h","600h","500h","400h","300h","250h","200h","150h"],overlays:["wind","temp","wetbulbtemp","clouds","cape","rh","gust","pressure","dewpoint","rain","lclouds","hclouds","mclouds","snowAccu","rainAccu","ptype","gustAccu","ccl","turbulence","icing"],hasAccumulations:!0,isolines:["pressure","temp","gh"]}))}}var zi=Object.freeze({__proto__:null,NamProducts:Hi});class Bi extends Ai{constructor(e){super(e),this.dailyCache=(new Date).toISOString().replace(/^\d+-(\d+)-(\d+)T.*$/,"$1$2"),this.hasRefTime=!1}refTime(){return this.dailyCache}open(){return H||this.printLogo(),Promise.resolve(void 0)}}var ji=Object.freeze({__proto__:null,StaticProduct:Bi});class Vi extends Bi{constructor(e){super(e),this.urlSuff=e.urlSuff,this.urlSuffFlow=e.urlSuffFlow}open(){return this.loadInfoJson(),Promise.resolve(void 0)}loadInfoJson(e){var t=(new Date).toISOString().replace(/.*T(\d+):(\d+).*/,"$1$2"),n="".concat(this.server,"/satellite/info.json?").concat(t);return Dt(n,{cache:!e})}moveTs(e){var t=this.calendar.timestamps,n=it.get("satelliteTimestamp"),i=t.length-1,r=t.find((e=>e>=n));void 0===r&&(r=t[i]);var a=ge(t.indexOf(r)+(e?1:-1),0,i);it.set("satelliteTimestamp",t[a])}}var Yi=Object.freeze({__proto__:null,SatelliteProduct:Vi}),Zi="https://www.windy.com/img/providers",qi='<a href="https://www.metoffice.gov.uk/" target="_blank"><img src="'.concat(Zi,'/metoffice-white-horizontal.svg" /></a>'),Xi='<a href="https://atmosphere.copernicus.eu/" target="_blank"><img src="'.concat(Zi,'/copernicus-white.svg" /></a>'),Qi='<a href="https://www.droughtimpacts.eu/" target="_blank" class="uiyellow clickable-size flex-container mb-15 rhmessage-with-text">\n        <img style="filter:drop-shadow(0 0 3px rgba(0, 0, 0, 0.8));" src="'.concat(Zi,'/czechglobe.svg" />\n        <p style="white-space: break-spaces;">Help us to monitor fire and drought impacts in your region for a safer World - go to www.droughtImpacts.eu</p>\n    </a>'),Ji='<a href="https://www.eumetsat.int/" target="_blank" style="margin-right: 20px;"><img src="'.concat(Zi,'/eumetsat2.svg" alt="eumetsat.int" style="max-width: 100px;"></a>\n<a href="https://www.nowcast.de/" target="_blank" data-tooltip="www.nowcast.de"><img src="').concat(Zi,'/nowcast-de.png" alt="nowcast.de"></a>'),$i='<a href="https://www.jma.go.jp/jma/indexe.html" target="_blank"><img src="'.concat(Zi,'/jma-white-horizontal.svg" /></a>'),Ki=new Ni({ident:"ecmwf",category:"forecast",modelIdent:"ecmwf-hres",preferredWaveProduct:"ecmwfWaves",betterDataQuality:["rain","clouds","lclouds","mclouds","hclouds","cbase","snowAccu","rainAccu","snowcover","ptype"],levels:["surface","100m","950h","925h","900h","850h","800h","700h","600h","500h","400h","300h","250h","200h","150h","10h"],overlays:["snowcover","wind","temp","wetbulbtemp","solarpower","pressure","clouds","lclouds","mclouds","hclouds","rh","gust","cbase","cape","dewpoint","rain","visibility","deg0","cloudtop","thunder","snowAccu","rainAccu","ptype","gustAccu","ccl","turbulence","icing"],hasAccumulations:!0,isolines:["pressure","gh","temp","deg0"]}),er=new Di({ident:"ecmwfAnalysis",category:"analysis",modelIdent:"ecmwf-hres",betterDataQuality:["sst"],overlays:["sst"],isolines:[],labelsTemp:!1}),tr=new Ai({ident:"cams",provider:"Copernicus",interval:720,PNGtransparency:!0,modelName:"CAMS",modelResolution:40,fileSuffix:"png",category:"forecast",modelIdent:"cams-global",maxTileZoom:{free:3,premium:3},dataQuality:"low",levels:["surface"],overlays:["gtco3","aod550","pm2p5","no2","tcso2","go3","uvindex","cosc","dustsm"],labelsTemp:!1,logo:Xi}),nr=new Ai({ident:"camsEu",provider:"Copernicus",interval:1440,PNGtransparency:!0,modelName:"CAMS EU",modelResolution:10,fileSuffix:"png",category:"forecast",modelIdent:"cams-eu",bounds:[[[70,-25],[70,45],[30,45],[30,-25]]],maxTileZoom:{free:3,premium:3},dataQuality:"high",levels:["surface"],overlays:["pm2p5","no2","go3"],labelsTemp:!1,logo:Xi}),ir=new Ai({ident:"cmems",JPGtransparency:!0,maxTileZoom:{free:3,premium:3},modelName:"CMEMS",modelResolution:9,provider:"Copernicus",category:"forecast",modelIdent:"cmems",labelsTemp:!1,interval:1440,dataQuality:"normal",overlays:["currents","currentsTide"],levels:["surface"],logo:Xi,hideProductSwitch:!0}),rr=new Ai({ident:"gfs",preferredProduct:"gfs",provider:"NOAA",interval:720,intervalPremium:360,preferredWaveProduct:"gfsWaves",modelName:"GFS",modelResolution:22,category:"forecast",modelIdent:"gfs",forecastSize:360,maxTileZoom:{free:3,premium:3},dataQuality:"low",betterDataQuality:["rain","clouds","lclouds","mclouds","hclouds"],levels:["surface","100m","975h","950h","925h","900h","850h","800h","700h","600h","500h","400h","300h","250h","200h","150h","10h"],overlays:["wind","temp","wetbulbtemp","pressure","clouds","rh","gust","dewpoint","rain","lclouds","mclouds","hclouds","snowAccu","rainAccu","ptype","gustAccu","cape","ccl","turbulence","icing"],hasAccumulations:!0,isolines:["pressure","gh","temp"]}),ar=new Fi({ident:"icon",modelName:"ICON",modelResolution:13,dataQuality:"normal",maxTileZoom:{free:3,premium:3},modelIdent:"icon-global",forecastSize:168,overlays:[...Wi,"cloudtop"]}),or=new Fi({ident:"iconEu",modelName:"ICON-EU",modelResolution:7,preferredWaveProduct:"iconEuWaves",intervalPremium:180,JPGtransparency:!0,dataQuality:"high",maxTileZoom:{free:3,premium:4},modelIdent:"icon-eu",forecastSize:120,overlays:[...Wi,"cbase","cloudtop","visibility"],bounds:[[[70,-23],[70,44],[30,44],[30,-23]]]}),sr=new Fi({ident:"iconD2",modelName:"ICON-D2",modelResolution:2.2,intervalPremium:180,JPGtransparency:!0,dataQuality:"extreme",modelIdent:"icon-d2",preferredProduct:"iconEu",preferredWaveProduct:"iconEuWaves",maxTileZoom:{free:4,premium:6},forecastSize:48,overlays:[...Wi,"cbase","visibility"],bounds:[[[57.237,-3.724],[57.722,1.088],[57.973,6.218],[57.962,10.261],[57.669,14.952],[57.651,20.314],[43.485,17.501],[43.692,15.26],[43.858,10.547],[43.604,5.01],[43.676,.231]]],hasAccumulations:!0}),lr=new Ai({ident:"iconEuWaves",modelName:"ICON-EU",modelResolution:7,preferredProduct:"iconEu",preferredAirProduct:"iconEu",bounds:[[[66,-10.525],[66,42.025],[29.95,42.025],[29.95,-10.525]]],provider:"DWD",interval:720,labelsTemp:!1,category:"forecast",modelIdent:"icon-ewam",fileSuffix:"png",dataQuality:"normal",maxTileZoom:{free:3,premium:3},overlays:["waves","swell1","wwaves"],levels:["surface"]}),cr=new Oi({ident:"bomAccess",modelResolution:12,dataQuality:"normal",modelIdent:"bom-access",maxTileZoom:{free:3,premium:4},forecastSize:240,bounds:[[[-65,65],[-65,180],[17,180],[17,65]],[[-65,-180],[-65,-175],[17,-175],[17,-180]]]}),dr=new Ii({ident:"bomAccessAd",modelIdent:"bom-access-c-ad",modelName:"ACCESS-C AD",bounds:[[[-29.47,130],[-29.47,142],[-39.5,142],[-39.5,130]]]}),ur=new Ii({ident:"bomAccessBn",modelIdent:"bom-access-c-bn",modelName:"ACCESS-C BN",bounds:[[[-21.47,145],[-21.47,157],[-31.5,157],[-31.5,145]]]}),hr=new Ii({ident:"bomAccessDn",modelIdent:"bom-access-c-dn",modelName:"ACCESS-C DN",bounds:[[[-7.97,127],[-7.97,139],[-18,139],[-18,127]]]}),mr=new Ii({ident:"bomAccessNq",modelIdent:"bom-access-c-nq",modelName:"ACCESS-C NQ",bounds:[[[-12.47,139],[-12.47,151],[-22.5,151],[-22.5,139]]]}),pr=new Ii({ident:"bomAccessPh",modelIdent:"bom-access-c-ph",modelName:"ACCESS-C PH",bounds:[[[-26.97,112],[-26.97,124],[-37,124],[-37,112]]]}),vr=new Ii({ident:"bomAccessSy",modelIdent:"bom-access-c-sy",modelName:"ACCESS-C SY",bounds:[[[-27.97,144],[-27.97,156],[-38,156],[-38,144]]]}),fr=new Ii({ident:"bomAccessVt",modelIdent:"bom-access-c-vt",modelName:"ACCESS-C VT",bounds:[[[-33,139],[-33,151],[-46,151],[-46,139]]]}),gr=new Ri({ident:"aromeAntilles",modelIdent:"arome-antilles",modelName:"AROME ANT",bounds:[[[23,-68],[23,-52],[10,-52],[10,-68]]]}),wr=new Ri({ident:"aromeFrance",modelIdent:"arome-france",bounds:[[[53,-8],[53,12],[38,12],[38,-8]]]}),yr=new Ri({ident:"aromeReunion",modelIdent:"arome-reunion",modelName:"AROME REU",bounds:[[[-7,32],[-7,68],[-26,68],[-26,32]]]}),br=new Ai({ident:"arome",provider:"MF",interval:720,intervalPremium:360,modelName:"AROME-HD",modelResolution:1.3,JPGtransparency:!0,animation:!0,dataQuality:"extreme",maxTileZoom:{free:4,premium:6},category:"forecast",modelIdent:"arome",forecastSize:42,bounds:[[[54.676,-11.999],[55.248,-4.269],[55.389,2.579],[55.209,9.148],[54.679,15.998],[46.483,13.903],[37.5,12.197],[37.85,7.621],[38,2.208],[37.879,-3.009],[37.497,-8.173],[46.095,-9.792]]],levels:["surface"],overlays:["wind","temp","wetbulbtemp","clouds","lclouds","mclouds","hclouds","rh","gust","cape","dewpoint","rain","snowAccu","rainAccu","ptype","gustAccu"],hasAccumulations:!0,isolines:["temp"]}),Tr=new Ai({ident:"nems",modelName:"NEMS",modelResolution:4,provider:"Meteoblue.com",interval:720,JPGtransparency:!0,animation:!0,dataQuality:"ultra",betterDataQuality:["rain","clouds"],maxTileZoom:{free:4,premium:5},category:"forecast",modelIdent:"mbeurope",labelsTemp:!1,forecastSize:72,bounds:[[[57,-19],[57,33],[33,33],[33,-19]]],levels:["surface","975h","950h","925h","900h","850h"],overlays:["wind","temp","wetbulbtemp","clouds","rh","gust","dewpoint","rain","rainAccu","gustAccu"],hasAccumulations:!0,logo:'<a href="https://www.meteoblue.com/" target="_blank" style="white-space: nowrap;">NEMS4 model by <img style="padding-left: 5%;padding-bottom: 2px; max-width:90px;height:auto;" src="https://www.windy.com/img/logo-mb.svg" /></a>'}),_r=new Bi({ident:"mblue",modelName:F?"MBLUE":"METEOBLUE",interval:720,hideProductSwitch:!0}),Sr=new Hi({ident:"namConus",modelResolution:5,modelIdent:"nam-conus",bounds:[[[47.7,-133],[51.27,-116.89],[52.57,-98.94],[51.43,-79.14],[47.7,-61.13],[21.27,-72.46],[24.43,-97.66],[21.33,-122.67]]]}),Er=new Hi({ident:"namHawaii",modelResolution:3,modelIdent:"nam-hawaii",modelName:"NAM-HI",bounds:[[[22.99,-161.39],[22.99,-154],[18.23,-154],[18.23,-161.39]]]}),Pr=new Hi({ident:"namAlaska",modelResolution:6,modelIdent:"nam-alaska",modelName:"NAM-AK",bounds:[[[71.3,171.8],[57.7,160.9],[51,172],[47.8,180],[73,180]],[[47.8,-180],[43.2,-172.1],[46.1,-157],[45.7,-142.4],[49.7,-128.6],[51.5,-116.8],[53.2,-114.9],[66.6,-119],[73.6,-124],[75.3,-153.4],[73,-180]]]}),Ar=new Ui({ident:"hrrrConus",modelResolution:3,dataQuality:"extreme",modelIdent:"hrrr-conus",intervalPremium:60,bounds:[[[50.2,-123.3],[51.6,-114.9],[52.5,-97.2],[52.1,-85.8],[50.5,-73.1],[47.8,-60.7],[42.1,-63.8],[30.9,-68.7],[21,-72],[22.5,-78.9],[23.8,-89],[24.2,-97.4],[23.9,-105.2],[22.7,-115.1],[20.9,-122.5],[29.7,-125.4],[43.2,-131.3],[47.8,-133.9]]]}),Cr=new Ui({ident:"hrrrAlaska",modelName:"HRRR-AK",modelResolution:3,dataQuality:"extreme",modelIdent:"hrrr-alaska",intervalPremium:180,bounds:[[[55.7,157],[51.2,170.4],[46,180],[71.6,180],[65.8,167]],[[46,-180],[41.8,-175],[48.8,-160],[51.7,-145],[52,-129],[64.9,-125],[76,-116.5],[76,-158],[71.6,-180]]]}),Or=new Ai({ident:"drought",modelName:"InterSucho",modelResolution:9,provider:"InterSucho",interval:1440,fileSuffix:"png",PNGtransparency:!0,dataQuality:"normal",category:"forecast",modelIdent:"intersucho",levels:["surface"],hasAccumulations:!0,isolines:[],labelsTemp:!1,logo:Qi,overlays:["moistureAnom40","moistureAnom100","drought40","drought100","soilMoisture40","soilMoisture100"],freeProduct:!0,hideProductSwitch:!0}),Ir=new Ai({ident:"fireDanger",modelName:"FireRisk",modelResolution:9,provider:"CzechGlobe-FireRisk",interval:1440,fileSuffix:"png",PNGtransparency:!0,dataQuality:"normal",category:"forecast",modelIdent:"intersucho-firerisk",levels:["surface"],hasAccumulations:!0,isolines:[],labelsTemp:!1,logo:Qi,overlays:["fwi","dfm10h"],freeProduct:!0,hideProductSwitch:!0}),Rr=new Ai({ident:"ecmwfWaves",modelName:"ECMWF",modelResolution:9,preferredAirProduct:"ecmwf",provider:"ECMWF",interval:720,intervalPremium:360,labelsTemp:!1,maxTileZoom:{free:3,premium:4},category:"forecast",modelIdent:"ecmwf-wam",fileSuffix:"png",dataQuality:"normal",overlays:["waves","swell1","swell2","swell3","wwaves"],levels:["surface"]}),Lr=new Ai({ident:"ukv",provider:"Met Office",interval:720,intervalPremium:180,modelName:"UKV",modelResolution:2,JPGtransparency:!0,animation:!0,dataQuality:"extreme",maxTileZoom:{free:4,premium:6},category:"forecast",modelIdent:"ukv",forecastSize:120,bounds:[[[61.3,-24.58],[53,-20],[44.39,-17.18],[45.43,-7.83],[45.39,.36],[44.83,9.23],[52.83,11.35],[61.92,15.46],[63.06,.12],[62.91,-9.86]]],levels:["surface","975h","950h","925h","900h","850h","800h","700h","600h","500h","400h","300h","250h","200h","150h"],overlays:["wind","temp","wetbulbtemp","pressure","clouds","lclouds","mclouds","hclouds","fog","rh","gust","cape","dewpoint","rain","ptype","visibility","deg0","snowAccu","rainAccu","gustAccu","ccl","turbulence"],isolines:["pressure","gh","temp","deg0"],hasAccumulations:!0,logo:qi}),Nr=new Ai({ident:"gfsWaves",modelName:"GFS",modelResolution:22,preferredAirProduct:"gfs",provider:"NOAA",interval:720,intervalPremium:360,preferredProduct:"gfs",labelsTemp:!1,category:"forecast",modelIdent:"gfs-wave",fileSuffix:"png",forecastSize:360,dataQuality:"low",maxTileZoom:{free:3,premium:3},overlays:["waves","swell1","swell2","swell3","wwaves"],levels:["surface"]}),xr=new Ai({ident:"activeFires",modelName:"nasa-firms",modelResolution:22,labelsTemp:!1,provider:"NASA",interval:60,category:"analysis",modelIdent:"nasa-firms",dataQuality:"normal",maxTileZoom:{free:18,premium:18}}),Dr=new Bi({ident:"capAlerts",labelsTemp:!1,modelName:"CAP Alerts",interval:0,provider:"National weather institutes",overlays:["capAlerts"],hideProductSwitch:!0}),Mr=new Ai({ident:"efi",provider:"ECMWF",interval:720,modelName:"ECMWF",modelResolution:9,labelsTemp:!1,maxTileZoom:{free:3,premium:3},category:"forecast",modelIdent:"ecmwf-efi",dataQuality:"normal",levels:["surface"],overlays:["efiTemp","efiWind","efiRain"],hideProductSwitch:!0}),Ur=new Ai({ident:"jmaMsm",provider:"JMA",interval:720,intervalPremium:180,modelName:"MSM",modelResolution:5,preferredWaveProduct:"jmaCwmWaves",JPGtransparency:!0,dataQuality:"high",maxTileZoom:{free:3,premium:5},category:"forecast",modelIdent:"jma-msm",bounds:[[[48,120],[48,150],[20,150],[20,120]]],levels:["surface","950h","925h","900h","850h","800h","700h","600h","500h","400h","300h","250h","200h","150h"],levelsOverride:{rh:["surface","950h","925h","900h","850h","800h","700h","600h","500h","400h","300h"]},overlays:["wind","temp","wetbulbtemp","pressure","clouds","lclouds","mclouds","hclouds","rh","dewpoint","rain","rainAccu"],isolines:["pressure","gh","temp"],hasAccumulations:!0,logo:$i}),kr=new Ai({ident:"jmaCwmWaves",provider:"JMA",interval:720,intervalPremium:360,modelName:"CWM",modelResolution:5,preferredAirProduct:"jmaMsm",dataQuality:"high",fileSuffix:"png",maxTileZoom:{free:3,premium:5},labelsTemp:!1,category:"forecast",modelIdent:"jma-cwm",bounds:[[[50,120],[50,150],[20,150],[20,120]]],overlays:["waves","swell1","swell2","wwaves"],levels:["surface"],logo:$i}),Wr=[[[66.57,-152.72],[69.81,-132.09],[70.59,-114.36],[68.37,-85.63],[64.55,-69.5],[59.07,-56.36],[47.91,-40.71],[39.15,-54.6],[27.27,-66.95],[36.52,-84.95],[40.39,-99.88],[41.54,-111.45],[39.62,-133.64],[55.16,-141.29]]],Fr=new Ai({ident:"canHrdps",provider:"MSC",interval:720,intervalPremium:360,modelName:"HRDPS",modelResolution:2.5,preferredProduct:"ecmwf",preferredWaveProduct:"canRdwpsWaves",JPGtransparency:!0,dataQuality:"extreme",maxTileZoom:{free:4,premium:6},category:"forecast",modelIdent:"can-hrdps",bounds:Wr,levels:["surface","950h","925h","900h","850h","800h","700h","600h","500h","400h","300h","250h","200h","150h"],overlays:["cape","ccl","clouds","dewpoint","gust","gustAccu","hclouds","lclouds","mclouds","pressure","ptype","rain","rainAccu","rh","snowcover","temp","turbulence","wind","wetbulbtemp"],isolines:["pressure","gh","temp"],hasAccumulations:!0}),Gr=new Ai({ident:"canRdwpsWaves",provider:"MSC",interval:720,intervalPremium:360,modelName:"RDWPS",modelResolution:2.5,preferredAirProduct:"canHrdps",dataQuality:"extreme",fileSuffix:"png",maxTileZoom:{free:4,premium:6},labelsTemp:!1,category:"forecast",modelIdent:"can-rdwps",bounds:Wr,overlays:["waves","swell1","swell2","wwaves"],levels:["surface"]}),Hr=new Ai({ident:"czeAladin",provider:"CHMI",interval:720,intervalPremium:360,modelName:"ALADIN",modelResolution:2.3,preferredProduct:"ecmwf",preferredWaveProduct:"ecmwfWaves",JPGtransparency:!0,dataQuality:"extreme",maxTileZoom:{free:4,premium:6},category:"forecast",modelIdent:"cze-aladin",bounds:[[[56.139,34.244],[56.674,29.323],[56.975,25.126],[57.178,19.589],[57.178,14.381],[56.975,8.844],[56.674,4.647],[56.262,.582],[55.547,-4.581],[52.382,-3.109],[48.582,-1.615],[44.174,-.143],[38.694,1.373],[39.07,4.01],[39.462,7.614],[39.716,11.019],[39.851,14.337],[39.868,18.402],[39.783,21.61],[39.462,26.378],[39.104,29.432],[48.305,31.608]]],levels:["surface","950h","925h","900h","850h","800h","700h","600h","500h","400h","300h","250h","200h","150h"],overlays:["cape","clouds","dewpoint","gust","gustAccu","hclouds","lclouds","mclouds","pressure","ptype","rain","rainAccu","rh","snowAccu","solarpower","temp","thunder","turbulence","visibility","wetbulbtemp","wind"],hasAccumulations:!0,isolines:["pressure","gh","temp"]}),zr=new Vi({ident:"satellite",animation:!1,modelName:"EUMETSAT",provider:"EUMETSAT",interval:3,directory:"satellite/tile",server:"https://sat.windy.com",urlSuff:"visir.jpg?mosaic=true",urlSuffFlow:"visir.jpg",labelsTemp:!1,overlays:["satellite"],levels:["surface"],logo:Ji,maxTileZoom:{free:7,premium:11},hideProductSwitch:!0}),Br=new class extends Bi{constructor(e){super(e),this.urlSuff=e.urlSuff,this.urlSuffFlow=e.urlSuffFlow}open(){return this.loadInfoJson(),Promise.resolve(void 0)}loadInfoJson(e){var t=(new Date).toISOString().replace(/.*T(\d+):(\d+).*/,"$1$2"),n="".concat(this.server,"/satellite/info.json?").concat(t);return Dt(n,{cache:!e})}moveTs(e){var t=this.calendar.timestamps,n=it.get("radsatTimestamp"),i=t.length-1,r=t.find((e=>e>=n));void 0===r&&(r=t[i]);var a=ge(t.indexOf(r)+(e?1:-1),0,i);it.set("radsatTimestamp",t[a])}}({ident:"radarPlus",animation:!1,modelName:"EUMETSAT",provider:"EUMETSAT",interval:3,directory:"radarPlus/tile",server:"https://sat.windy.com",urlSuff:"visir.jpg?mosaic=true",urlSuffFlow:"visir.jpg",labelsTemp:!1,overlays:["radarPlus"],levels:["surface"],logo:'<a id="sat-contrib" href="https://www.eumetsat.int/" target="_blank">\n              <img src="https://www.windy.com/img/providers/eumetsat2.svg" alt="eumetsat.int"/></a>\n          <a id="blitz-contrib" href="https://www.nowcast.de/" target="_blank" data-tooltip="www.nowcast.de">\n              <img src="https://www.windy.com/img/providers/nowcast-de.png" alt="nowcast.de"/></a>',hideProductSwitch:!0});var jr={bomAccess:cr,bomAccessAd:dr,bomAccessBn:ur,bomAccessDn:hr,bomAccessNq:mr,bomAccessPh:pr,bomAccessSy:vr,bomAccessVt:fr,mblue:_r,ecmwf:Ki,ecmwfWaves:Rr,ecmwfAnalysis:er,canHrdps:Fr,canRdwpsWaves:Gr,cams:tr,camsEu:nr,cmems:ir,czeAladin:Hr,gfs:rr,gfsWaves:Nr,icon:ar,iconD2:sr,iconEu:or,iconEuWaves:lr,arome:br,aromeAntilles:gr,aromeFrance:wr,aromeReunion:yr,nems:Tr,namAlaska:Pr,namConus:Sr,namHawaii:Er,capAlerts:Dr,efi:Mr,radar:new class extends Bi{open(){return this.loadMinifest(),Promise.resolve(void 0)}loadMinifest(){var e=(new Date).toISOString().replace(/.*T(\d+):(\d+).*/,"$1$2");return Dt("".concat(this.server,"/").concat(this.directory,"/minifest2.json?").concat(e))}moveTs(e){var t=this.calendar.timestamps,n=it.get("radarTimestamp"),i=t.length-1,r=t.find((e=>e>=n));void 0===r&&(r=t[i]);var a=ge(t.indexOf(r)+(e?1:-1),0,i);it.set("radarTimestamp",t[a])}}({ident:"radar",animation:!1,modelName:"",interval:3,fileSuffix:"webp",fileSuffixFallback:"png",directory:"radar2/composite",server:"https://rdr.windy.com",labelsTemp:!1,overlays:["radar"],levels:["surface"],hideProductSwitch:!0}),satellite:zr,radarPlus:Br,drought:Or,fireDanger:Ir,hrrrAlaska:Cr,hrrrConus:Ar,ukv:Lr,activeFires:xr,jmaMsm:Ur,jmaCwmWaves:kr,topoMap:new Bi({ident:"topoMap",labelsTemp:!1,modelName:"Outdoor Map",interval:0,provider:"Seznam.cz",overlays:["topoMap"],levels:["surface"],hideProductSwitch:!0})},Vr=function(){var e=i((function*(e){var t=jr[e],n=t.getUpdateTimes.call(t);return n?Promise.resolve(n.refTime):yield t.loadAndGetReftime.call(t)}));return function(t){return e.apply(this,arguments)}}(),Yr=e=>"/webcams/v1.0/detail/".concat(e,"?lang=").concat(it.get("usedLang")||"en"),Zr=function(){var e=i((function*(e,t,n){var{lat:i,lon:r,step:o,interpolate:s}=t,l=yield Vr(e),c=Ae(a(a({},n),{},{refTime:l,step:o,interpolate:s?"true":void 0,extended:oi()?"true":void 0}));return"/forecast/point/".concat(e,"/v2.9/").concat(oe(i),"/").concat(oe(r),"?").concat(c)}));return function(t,n,i){return e.apply(this,arguments)}}(),qr=function(){var e=i((function*(e,t,n,i){var r=yield Zr(e,t,n);return Dt(r,i)}));return function(t,n,i,r){return e.apply(this,arguments)}}(),Xr=function(){var e=i((function*(e,t,n){var{lat:i,lon:r,step:o}=t,s=yield Vr(e),l=Ae(a(a({},n),{},{refTime:s,step:o}));return"/forecast/meteogram/".concat(e,"/v1.2/").concat(oe(i),"/").concat(oe(r),"?").concat(l)}));return function(t,n,i){return e.apply(this,arguments)}}(),Qr=function(){var e=i((function*(e,t,n,i){var r=yield Xr(e,t,n);return Dt(r,i)}));return function(t,n,i,r){return e.apply(this,arguments)}}(),Jr=function(){var e=i((function*(e,t){var n=jr[e];if(!n)return Promise.resolve(null);var{modelIdent:i,calendar:r}=n;if(!i)return Promise.resolve(null);var a=yield Vr(e);if(!a)return Promise.resolve(null);var o={labelsVersion:"v1.4",step:oi()?1:3,refTime:a,hours:null==r?void 0:r.numOfHours},s="/citytile/v1.0/".concat(i,"/").concat(t);return Dt(s,{qs:o})}));return function(t,n){return e.apply(this,arguments)}}(),$r=()=>Dt("/tc/v2/storms/active/count"),Kr=Object.freeze({__proto__:null,getCitytileData:Jr,getHurricanesCount:$r,getMeteogramForecastData:Qr,getMeteogramForecastUrl:Xr,getNearestPoiItemsUrl:(e,t,n)=>{var{lat:i,lon:r}=t;return"/pois/v2/".concat(e,"/").concat(i,"/").concat(r).concat(n?"?"+Ae(n):"")},getObservationPoiUrl:(e,t)=>"/pois/v2/".concat(e,"/").concat(t),getObservationsUrl:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return"/obs/measurement/v3/".concat(e,"/").concat(t,"/").concat(n,"/").concat(i)},getPointForecastData:qr,getPointForecastUrl:Zr,getSearchWebcamViewsUrl:(e,t)=>{var n={textQuery:e,lang:it.get("usedLang")||"en"};return t&&(n.lat=t.lat,n.lon=t.lon),"https://admin.windy.com/webcams/admin/v1.0/views?".concat(Ae(n))},getTideForecastUrl:e=>{var{lat:t,lon:n}=e;return"/tides/v1.0/tides/".concat(t,"/").concat(n)},getTidePoiUrl:e=>"/tides/v1.0/tides/".concat(e),getWebcamArchiveUrl:(e,t)=>"/webcams/v2.0/archive/".concat(t?"hourly/":"").concat(e),getWebcamDetailUrl:Yr,getWebcamMetricsUrl:e=>"/webcams/ping/".concat(e),getWebcamsListUrl:e=>{var{lat:t,lon:n,limit:i}=e;return"/webcams/v1.0/list?".concat(Ae({nearby:"".concat(t,",").concat(n),lang:it.get("usedLang")||"en",limit:i}))}});class ea{constructor(e){var t;this.ident=e.ident,this.qualitative=e.qualitative,this.steps=e.steps,this.defaultColorGradient=e.default,this.opaque=null===(t=e.opaque)||void 0===t||t,this.prepare=e.prepare,this.prepare&&this.getColor(),this.loadCustomColor()}getColorTable(){return this.colors}loadCustomColor(){var e=this;return i((function*(){if(yield Ei.hasKey(e.ident)){var t=yield Ei.get(e.ident);e.customColorGradient=null==t?void 0:t.gradient}}))()}hasCustomColor(){return Boolean(this.customColorGradient)}setCustomColor(e){var t=arguments,n=this;return i((function*(){(!(t.length>1&&void 0!==t[1])||t[1])&&(yield Ei.put(n.ident,{id:n.ident,gradient:e})),n.customColorGradient=e,n.regenerateColorTable()}))()}removeCustomColor(){var e=this;return i((function*(){yield Ei.remove(e.ident),e.customColorGradient=null,e.regenerateColorTable()}))()}color(e){var[t,n,i]=this.RGBA(e);return"rgb(".concat(t,",").concat(n,",").concat(i,")")}colorDark(e,t){var[n,i,r]=this.RGBA(e);return n=ge(n-t,0,255),i=ge(i-t,0,255),r=ge(r-t,0,255),"rgb(".concat(n,",").concat(i,",").concat(r,")")}RGBA(e){var t=this.value2index(e);return[this.colors[t],this.colors[t+1],this.colors[t+2],this.colors[t+3]]}createGradientArray(){var e,t,n,i,r,a=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],o=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,l=this.steps+1,c=new Uint8Array(l<<2),d=(this.max-this.min)/this.steps,u=this.getColorGradient(),h=0,m=1,p=u[0],v=null!==(e=u[m++])&&void 0!==e?e:u[0];for(r=0;r<this.steps;r++)(t=this.min+d*r*s)>v[0]&&m<u.length&&(p=v,v=u[m++]),i=(t-p[0])/(v[0]-p[0]),n=this.getGradientColorYUVA(p[1],v[1],i),o&&this.makePremultiplied(n),c[h++]=Math.round(n[0]),c[h++]=Math.round(n[1]),c[h++]=Math.round(n[2]),c[h++]=a?255:Math.round(n[3]);return this.neutralGrayIndex=h,c[h++]=c[h++]=c[h++]=128,c[h++]=255,c}getColor(){if(this.colors)return this;var e=this.getColorGradient();return this.min=e[0][0],this.max=e[e.length-1][0],this.colors=this.createGradientArray(this.opaque),this.maxIndex=this.steps-1<<2,this.step=(this.max-this.min)/this.steps,this}value2index(e){return isNaN(e)?this.neutralGrayIndex:Math.max(0,Math.min(this.maxIndex,(e-this.min)/this.step<<2))}getColorGradient(){return this.customColorGradient||this.defaultColorGradient}static checkValidity(e){if(!Array.isArray(e))return!1;for(var t=0;t<e.length;t++){var n=e[t];if(!Array.isArray(n)||!n.length||!Array.isArray(n[1])||"number"!=typeof n[0]||4!==n[1].length)return!1}return!0}getMulArray(e,t){for(var n=[],i=e.length,r=0;r<i;r++)n.push(e[r]*t);return n}lerpArray(e,t,n){for(var i=1-n,r=e.length,a=[],o=0;o<r;o++)a.push(e[o]*i+t[o]*n);return a}rgba2yuva(e){var[t,n,i,r]=e,a=.299*t+.587*n+.114*i;return[a,.565*(i-a),.713*(t-a),r]}yuva2rgba(e){var[t,n,i,r]=e;return[t+1.403*i,t-.344*n-.714*i,t+1.77*n,r]}gradYuva(e,t,n,i){var r=this.lerpArray(e,t,n);if(i){var a=ee(e[1],e[2]),o=ee(t[1],t[2]);if(a>.05&&o>.05){var s=ee(r[1],r[2]);if(s>.01){var l=(a*(1-n)+o*n)/s;r[1]*=l,r[2]*=l}}}return r}getGradientColorYUVA(e,t,n){for(var i=1/255,r=this.getMulArray(e,i),a=this.getMulArray(t,i),o=this.rgba2yuva(r),s=this.rgba2yuva(a),l=this.gradYuva(o,s,n,!0),c=this.yuva2rgba(l),d=0;d<c.length;d++)c[d]=Math.max(0,Math.min(256*c[d],255));return c}makePremultiplied(e){for(var t=e[3]/255,n=0;n<3;n++)e[n]=Math.max(0,Math.min(t*e[n],255));return e}regenerateColorTable(){this.colors&&(this.colors=null,this.getColor())}}var ta=Object.freeze({__proto__:null,Color:ea}),na=[[79,4,0,255],[107,45,0,255],[132,77,0,255],[153,106,5,255],[169,131,56,255],[182,153,85,255],[192,172,110,255],[197,186,132,255],[200,196,152,255],[200,202,170,255],[201,201,201,255],[190,204,179,255],[173,202,173,255],[150,197,170,255],[125,188,168,255],[97,174,165,255],[71,157,161,255],[48,135,153,255],[49,109,138,255],[50,80,117,255],[48,48,94,255]],ia=[[0,102,151,255],[125,182,209,255],[170,183,189,255],[194,195,125,255],[232,83,25,255],[189,52,19,255],[75,12,0,255]],ra=[[166,93,165,255],[162,97,160,255],[167,91,91,255],[167,91,91,255],[98,122,160,255],[98,122,160,255],[90,169,90,255],[91,167,99,255],[119,141,120,255]],aa=[[0,[40,16,158,0]],[3,[40,16,158,20]],[8,[40,16,158,100]],[14,[0,101,154,180]],[20,[0,144,147,220]],[26,[0,179,125,240]],[32,[117,208,89,255]],[36,[220,220,30,255]],[40,[244,202,8,255]],[44,[245,168,24,255]],[48,[236,130,63,255]],[52,[205,75,75,255]],[56,[182,45,100,255]],[60,[156,16,109,255]],[64,[125,0,108,255]],[68,[92,0,100,255]],[100,[0,0,0,255]],[101,[0,0,0,0]],[255,[0,0,0,0]]],oa=(e,t)=>t.map(((t,n)=>[t,e[n]])),sa={temp:new ea({ident:"temp",steps:2048,prepare:!0,default:[[203,[115,70,105,255]],[218,[202,172,195,255]],[233,[162,70,145,255]],[248,[143,89,169,255]],[258,[157,219,217,255]],[265,[106,191,181,255]],[269,[100,166,189,255]],[273.15,[93,133,198,255]],[274,[68,125,99,255]],[283,[128,147,24,255]],[294,[243,183,4,255]],[303,[232,83,25,255]],[320,[71,14,0,255]]]}),wind:new ea({ident:"wind",steps:2048,prepare:!0,default:[[0,[98,113,183,255]],[1,[57,97,159,255]],[3,[74,148,169,255]],[5,[77,141,123,255]],[7,[83,165,83,255]],[9,[53,159,53,255]],[11,[167,157,81,255]],[13,[159,127,58,255]],[15,[161,108,92,255]],[17,[129,58,78,255]],[19,[175,80,136,255]],[21,[117,74,147,255]],[24,[109,97,163,255]],[27,[68,105,141,255]],[29,[92,144,152,255]],[36,[125,68,165,255]],[46,[231,215,215,255]],[51,[219,212,135,255]],[77,[205,202,112,255]],[104,[128,128,128,255]]]}),rh:new ea({ident:"rh",steps:1024,default:[[0,[173,85,56,255]],[30,[173,110,56,255]],[40,[173,146,56,255]],[50,[105,173,56,255]],[60,[56,173,121,255]],[70,[56,174,173,255]],[75,[56,160,173,255]],[80,[56,157,173,255]],[83,[56,148,173,255]],[87,[56,135,173,255]],[90,[56,132,173,255]],[93,[56,123,173,255]],[97,[56,98,157,255]],[100,[56,70,114,255]]]}),pressure:new ea({ident:"pressure",steps:4e3,default:[[9e4,[8,16,48,255]],[95e3,[0,32,96,255]],[97600,[0,52,146,255]],[98600,[0,90,148,255]],[99500,[0,117,146,255]],[100200,[26,140,147,255]],[100700,[103,162,155,255]],[101125,[155,183,172,255]],[101325,[182,182,182,255]],[101525,[176,174,152,255]],[101900,[167,147,107,255]],[102400,[163,116,67,255]],[103e3,[159,81,44,255]],[103800,[142,47,57,255]],[104600,[111,24,64,255]],[108e3,[48,8,24,255]]]}),cclAltitude:new ea({ident:"cclAltitude",steps:1024,default:[[0,[128,128,128,255]],[500,[128,128,128,255]],[1e3,[213,211,173,255]],[2e3,[199,143,32,255]],[2500,[201,109,12,255]],[3e3,[193,72,16,255]],[4500,[159,29,43,255]],[5e3,[133,12,12,255]],[8e3,[83,5,36,255]]]}),altitude:new ea({ident:"altitude",steps:1024,default:[[0,[105,83,83,255]],[500,[162,82,140,255]],[750,[99,174,174,255]],[1000.15,[73,106,160,255]],[1500,[75,131,70,255]],[2e3,[191,193,93,255]],[3e3,[184,149,73,255]],[5e3,[182,99,83,255]],[1e4,[171,81,102,255]],[15e3,[108,77,97,255]]]}),deg0:new ea({ident:"deg0",steps:1024,default:[[0,[188,197,195,255]],[500,[155,195,189,255]],[750,[93,173,156,255]],[1000.15,[80,141,129,255]],[1500,[55,122,109,255]],[2e3,[39,93,82,255]],[3e3,[33,68,73,255]],[5e3,[32,55,71,255]],[1e4,[28,33,64,255]],[15e3,[6,6,6,255]]]}),levels:new ea({ident:"levels",steps:2048,default:[[0,[105,117,140,255]],[1e3,[94,131,150,255]],[4e3,[71,145,154,255]],[8e3,[78,179,102,255]],[1e4,[189,189,68,255]],[12e3,[177,80,80,255]],[15e3,[178,80,178,255]],[2e4,[184,184,184,255]]]}),rain:new ea({ident:"rain",steps:1024,prepare:!0,default:[[0,[111,111,111,255]],[.6,[60,116,160,255]],[6,[59,161,161,255]],[8,[59,161,61,255]],[10,[130,161,59,255]],[15,[161,161,59,255]],[20,[161,59,59,255]],[31,[161,59,161,255]],[50,[168,168,168,255]]]}),ptype:new ea({ident:"ptype",steps:128,qualitative:!0,default:[[0,[111,111,111,255]],[1,[0,208,239,255]],[2,[0,0,255,255]],[3,[197,27,195,255]],[4,[129,63,63,255]],[5,[227,227,227,255]],[6,[129,195,129,255]],[7,[202,211,57,255]],[8,[183,119,8,255]],[9,[227,73,19,255]],[10,[195,63,63,255]]]}),rainClouds:new ea({ident:"rainClouds",steps:128,opaque:!1,default:[[0,[67,87,166,56]],[.8,[70,102,163,77]],[2,[62,171,171,107]],[6,[62,171,171,192]],[8,[62,142,62,250]],[10,[129,156,62,250]],[15,[171,171,62,250]],[20,[169,62,62,250]],[31,[171,62,171,250]],[50,[177,177,177,250]]]}),clouds:new ea({ident:"clouds",steps:800,default:[[0,[146,130,70,255]],[10,[132,119,70,255]],[50,[116,116,116,255]],[95,[171,180,179,255]],[98,[198,201,201,255]],[100,[213,213,205,255]]]}),lclouds:new ea({ident:"lclouds",steps:800,default:[[0,[156,142,87,255]],[10,[143,131,87,255]],[30,[129,129,129,255]],[90,[137,159,182,255]],[100,[187,187,187,255]]]}),hclouds:new ea({ident:"hclouds",steps:800,default:[[0,[156,142,87,255]],[10,[143,131,87,255]],[30,[125,157,157,255]],[90,[141,169,169,255]],[100,[187,187,187,255]]]}),mclouds:new ea({ident:"mclouds",steps:800,default:[[0,[156,142,87,255]],[10,[143,131,87,255]],[30,[157,192,157,255]],[90,[145,171,145,255]],[100,[187,187,187,255]]]}),cape:new ea({ident:"cape",steps:1024,default:[[0,[110,110,110,255]],[350,[110,110,110,255]],[400,[93,95,127,255]],[500,[37,98,145,255]],[800,[37,165,37,255]],[1500,[163,161,55,255]],[2e3,[155,112,63,255]],[2500,[162,55,55,255]],[5001,[151,68,151,255]]]}),lightDensity:new ea({ident:"lightDensity",steps:2048,default:[[0,[136,136,136,255]],[.015,[136,136,136,255]],[.025,[136,200,0,255]],[.1,[218,218,0,255]],[1,[241,95,0,255]],[2,[248,78,120,255]],[4,[135,0,0,255]],[15,[221,101,255,255]]]}),cbase:new ea({ident:"cbase",steps:512,default:oa(ra,[0,129,149,279,299,879,914,1499,7999])}),snow:new ea({ident:"snow",steps:2048,default:[[0,[97,97,97,255]],[2,[69,82,152,255]],[10,[65,165,167,255]],[20,[65,141,65,255]],[50,[168,168,65,255]],[80,[170,126,63,255]],[120,[167,65,65,255]],[500,[168,65,168,255]]]}),rainAccu:new ea({ident:"rainAccu",steps:12e3,default:[[0,[97,97,97,255]],[1,[64,64,163,255]],[5,[70,106,227,255]],[10,[41,187,236,255]],[30,[49,241,153,255]],[50,[163,253,61,255]],[80,[237,208,59,255]],[120,[251,128,34,255]],[200,[210,49,4,255]],[320,[122,4,3,255]],[600,[48,0,0,255]],[8e3,[24,0,0,255]]]}),waves:new ea({ident:"waves",steps:1024,default:[[0,[159,185,191,255]],[.5,[48,157,185,255]],[1,[48,98,141,255]],[1.5,[56,104,191,255]],[2,[57,60,142,255]],[2.5,[187,90,191,255]],[3,[154,48,151,255]],[4,[133,48,48,255]],[5,[191,51,95,255]],[7,[191,103,87,255]],[10,[191,191,191,255]],[12,[154,127,155,255]]]}),currents:new ea({ident:"currents",steps:256,default:[[0,[64,77,143,255]],[.02,[50,86,142,255]],[.06,[50,123,142,255]],[.1,[64,120,103,255]],[.15,[50,133,50,255]],[.2,[50,141,50,255]],[.3,[142,132,50,255]],[.4,[142,113,50,255]],[.5,[130,77,61,255]],[.6,[115,50,68,255]],[.7,[142,50,104,255]],[.8,[105,68,131,255]],[.85,[81,70,131,255]],[.9,[65,98,131,255]],[1,[73,122,131,255]],[1.5,[143,143,143,255]],[4,[143,143,143,255]]]}),visibility:new ea({ident:"visibility",steps:1024,default:oa(ra,[0,1600,2200,5e3,6e3,8e3,9e3,15e3,20004])}),gtco3:new ea({ident:"gtco3",steps:512,default:[[180,[53,25,47,255]],[218,[162,70,145,255]],[223,[110,81,217,255]],[260,[79,151,193,255]],[320,[82,203,167,255]],[360,[59,197,67,255]],[420,[231,174,5,255]],[500,[232,83,25,255]]]}),aod550:new ea({ident:"aod550",steps:4096,default:oa(ia,[0,.25,.5,1,2,3,4])}),pm2p5:new ea({ident:"pm2p5",steps:4096,default:oa(ia,[0,10,15,25,150,200,300])}),no2:new ea({ident:"no2",steps:4096,default:oa(ia,[0,1.5,2,3,30,40,100])}),tcso2:new ea({ident:"tcso2",steps:4096,default:oa(ia,[0,1.5,2,3,30,40,100])}),go3:new ea({ident:"go3",steps:4096,default:oa(ia,[25,75,85,105,160,200,250])}),cosc:new ea({ident:"cosc",steps:4e3,default:[[0,[124,124,124,255]],[70,[124,124,108,255]],[110,[164,157,72,255]],[200,[136,113,47,255]],[450,[39,31,31,255]],[2200,[255,22,22,255]]]}),dust:new ea({ident:"dust",steps:8e3,default:[[0,[171,171,171,255]],[10,[148,137,118,255]],[80,[124,104,59,255]],[800,[100,73,0,255]],[1200,[74,44,0,255]]]}),radar:new ea({ident:"radar",steps:255,opaque:!1,default:aa}),satellite:new ea({ident:"satellite",steps:256,opaque:!1,default:[[0,[24,24,24,255]],[149,[240,240,240,255]],[150,[64,64,163,255]],[159,[70,106,227,255]],[168,[41,187,236,255]],[177,[49,241,153,255]],[186,[163,253,61,255]],[195,[237,208,59,255]],[205,[251,128,34,255]],[214,[210,49,4,255]],[223,[122,4,3,255]],[256,[48,0,0,255]]]}),radarPlus:new ea({ident:"radarPlus",steps:255,opaque:!1,default:aa}),fog:new ea({ident:"fog",steps:512,default:[[0,[110,110,110,255]],[1,[200,200,200,255]],[2,[200,200,255,255]]]}),justGray:new ea({ident:"justGray",steps:4,default:[[-2e4,[111,111,111,255]],[2e4,[111,111,111,255]]]}),efiWind:new ea({ident:"efiWind",steps:256,default:[[-1,[5,165,189,255]],[-.8,[30,175,119,255]],[-.4,[111,111,111,255]],[.4,[111,111,111,255]],[.8,[187,174,24,255]],[1,[189,80,32,255]]]}),efiTemp:new ea({ident:"efiTemp",steps:256,default:[[-1,[43,54,209,255]],[-.8,[60,164,179,255]],[-.4,[111,111,111,255]],[.4,[111,111,111,255]],[.8,[128,147,24,255]],[1,[213,0,110,255]]]}),efiRain:new ea({ident:"efiRain",steps:256,default:[[-1,[151,75,0,255]],[-.8,[187,180,0,255]],[-.4,[111,111,111,255]],[.4,[111,111,111,255]],[.8,[1,162,177,255]],[1,[4,8,181,255]]]}),moistureAnom40:new ea({ident:"moistureAnom40",steps:1024,default:oa(na,[-40,-32,-25,-19,-13,-8,-5,-3,-2,-1,0,1,2,3,5,8,13,19,25,32,40])}),moistureAnom100:new ea({ident:"moistureAnom100",steps:1024,default:oa(na,[-100,-80,-55,-40,-25,-16,-10,-6,-4,-2,0,2,4,6,10,16,25,40,55,80,100])}),drought:new ea({ident:"drought",steps:1024,default:[[-1,[200,200,200,255]],[-.5,[200,200,200,255]],[-.49,[240,222,120,255]],[.5,[240,222,120,255]],[.51,[235,183,50,255]],[1.5,[235,183,50,255]],[1.51,[220,143,13,255]],[2.5,[220,143,13,255]],[2.51,[193,95,0,255]],[3.5,[193,95,0,255]],[3.51,[157,34,12,255]],[4.5,[157,34,12,255]],[4.51,[120,0,19,255]],[5,[120,0,19,255]]]}),soilMoisture:new ea({ident:"soilMoisture",steps:1024,default:[[2,[111,11,3,255]],[4,[214,81,26,255]],[6,[249,159,64,255]],[8,[249,229,79,255]],[10,[251,255,191,255]],[11.5,[239,239,239,255]],[13,[205,228,254,255]],[16,[139,172,253,255]],[20,[82,127,207,255]],[25,[44,61,158,255]],[35,[26,34,113,255]]]}),fwi:new ea({ident:"fwi",steps:256,default:[[.5,[81,178,55,255]],[1.49,[81,178,55,255]],[1.5,[234,235,3,255]],[2.49,[234,235,3,255]],[2.5,[237,151,58,255]],[3.49,[237,151,58,255]],[3.5,[224,64,47,255]],[4.49,[224,64,47,255]],[4.5,[171,36,27,255]],[5.49,[171,36,27,255]],[5.5,[117,55,143,255]]]}),dfm10h:new ea({ident:"dfm10h",steps:1024,default:[[2,[111,11,3,255]],[4,[214,81,26,255]],[6,[249,159,64,255]],[8,[249,229,79,255]],[10,[251,255,191,255]],[11.5,[239,239,239,255]],[13,[205,228,254,255]],[16,[139,172,253,255]],[20,[82,127,207,255]],[25,[44,61,158,255]],[35,[26,34,113,255]]]}),solarpower:new ea({ident:"solarpower",steps:2e3,default:[[0,[110,110,110,255]],[5,[122,105,106,255]],[50,[194,53,81,255]],[100,[199,66,81,255]],[200,[208,90,81,255]],[400,[226,131,90,255]],[600,[242,170,110,255]],[800,[255,208,141,255]],[1e3,[255,245,180,255]],[1150,[255,255,255,255]]]}),uvindex:new ea({ident:"uvindex",steps:4096,default:[[0,[200,200,200,255]],[2.5,[200,200,200,255]],[2.51,[240,222,120,255]],[5.5,[240,222,120,255]],[5.51,[235,183,50,255]],[7.5,[235,183,50,255]],[7.51,[220,143,13,255]],[10.5,[220,143,13,255]],[10.51,[193,95,0,255]]]}),wetbulbtemp:new ea({ident:"wetbulbtemp",steps:2048,default:[[203,[128,128,128,255]],[273.15,[255,255,255,255]],[283.2,[241,236,197,255]],[291.5,[229,216,65,255]],[295.4,[240,190,0,255]],[298,[237,152,0,255]],[300,[223,106,0,255]],[302,[201,44,44,255]],[304,[128,0,0,255]],[305,[0,0,0,255]]]}),turbulence:new ea({ident:"turbulence",steps:1024,default:[[0,[121,121,121,255]],[10,[152,228,216,255]],[20,[112,215,174,255]],[30,[110,197,120,255]],[40,[130,174,46,255]],[50,[151,149,0,255]],[60,[165,121,0,255]],[70,[172,89,0,255]],[80,[166,57,42,255]],[90,[154,13,81,255]],[100,[137,0,101,255]]]}),icing:new ea({ident:"icing",steps:2048,default:[[24.9,[121,121,121,255]],[25,[141,212,239,255]],[29.9,[141,212,239,255]],[30,[89,176,228,255]],[34.9,[89,176,228,255]],[35,[57,129,207,255]],[54.9,[57,129,207,255]],[55,[55,68,186,255]]]})},la=e=>e;class ca{constructor(e){this.initProperties(),Object.assign(this,e),this.key=this._createKey(this.ident),it.insert(this.key,{def:this.getDefault(),save:!0,sync:!0,nativeSync:this.nativeSync,allowed:Object.keys(this.conv)}),this.metric=it.get(this.key),it.on(this.key,this.onMetricChanged,this),it.once("isImperial",this.setDefault,this)}onMetricChanged(e){this.metric=e,Nn.emit("metricChanged",this.ident,e)}getDefault(){return it.get("isImperial")&&this.defaults.length>1?this.defaults[1]:this.defaults[0]}setDefault(){this.key&&(it.setDefault(this.key,this.getDefault()),this.metric=it.get(this.key))}convertValue(e,t,n){if(void 0===e)return"";var i,r=this.convertNumber(e);return("number"==typeof r&&!isNaN(r)&&r>=1e3?wn(r):r)+(t||this.separator)+((null===(i=this.conv[this.metric])||void 0===i?void 0:i.label)||this.metric)+(n||"")}na(){var e;return(null===(e=this.conv[this.metric])||void 0===e?void 0:e.na)||"-"}listMetrics(){return Object.keys(this.conv)}howManyMetrics(){return this.listMetrics().length}setMetric(e,t){it.set(this.key,e,t?{UIident:t}:void 0),this.cohesion&&Object.keys(this.cohesion).forEach((t=>{var n,i=null===(n=this.cohesion)||void 0===n||null===(n=n[t])||void 0===n?void 0:n[e];i&&it.set(this._createKey(t),i)}))}cycleMetric(e){var t=this.description.indexOf(this.metric)+1;t===this.description.length&&(t=0),this.setMetric(this.description[t],e)}renderLegend(e,t,n){var i=this.discreteLegend?this.renderDiscreteLegend():ca.getGradientLegend(e,n,this.metric);null!==i&&(t.dataset.overlay=this.ident,l(t,this.howManyMetrics()<=1,"one-metric"),l(t,Boolean(this.discreteLegend),"discrete-metric"),t.style.background=i.background,t.innerHTML=i.content)}renderDiscreteLegend(){var{labels:e,hasEqualItemsWidth:t}=this.discreteLegend,n=t?"width: ".concat(100/e.length,"%;"):"";return{background:"",content:this.discreteLegend.labels.map((e=>{var[i,r]=e;return'<span style="background: '.concat(r,"; ").concat(t?n:"",'">').concat(rn[i],"</span>")})).join("")}}initProperties(){this.separator="",this.nativeSync=!1}_createKey(e){return"metric_".concat(e)}}o(ca,"getGradientLegend",((e,t,n)=>{var{description:i,lines:r}=t,a=null==e?void 0:e.getColor();if(!e||!a)return null;var o=r.length,s=i.indexOf(n),l=100/(r.length+1),c=[],d=e.color(r[0][0]);c.push(d,d,d);for(var u='<span style="width:'.concat(l,'%">').concat(n,"</span>"),h=0;h<o;h++){var m=r[h][0],p=r[Math.min(h+1,o-1)][0],v=e.color(m),f=e.color(.5*(m+p));c.push(v,f),u+='<span style="width: '.concat(l,'%">').concat(r[h][1+s],"</span>")}return{background:"linear-gradient(to right, ".concat(c.join(","),")"),content:u}}));var da=Object.freeze({__proto__:null,Metric:ca,rtrnSelf:la});class ua extends ca{convertNumber(e,t,n,i){var r=i&&this.backConv?this.backConv[n||this.metric]:this.conv[n||this.metric];if(!r)return xe("convertNumber","Convertion method for ".concat(n||this.metric," is not defined!")),0;var a=r.conversion(e),o=Math.pow(10,null!=t?t:r.precision);return Math.round(a*o)/o}}class ha extends ca{convertNumber(e){return 0}}class ma extends ca{convertNumber(e){var t={0:"RAIN",1:"JUST_RAIN",2:"THUNDER",3:"FZ_RAIN",4:"MX_ICE",5:"SNOW",6:"WET_SN",7:"RA_SN",8:"PELLETS",9:"LIGHT_THUNDER",10:"THUNDER",11:"HEAVY_THUNDER"};return e in t?rn[t[e]]:""}}class pa extends ca{convertNumber(e){return 0===e?rn.NONE:e<=2?rn.UV_LOW:e<=5?rn.UV_MODERATE:e<=7?rn.UV_HIGH:e<=10?rn.UV_VERY_HIGH:rn.UV_EXTREME}convertValue(e){return this.convertNumber(e)}}class va extends ca{convertNumber(e){return e<=.7?rn.NO_FOG:e<=1?rn.FOG:rn.FOG_RIME}convertValue(e){return this.convertNumber(e)}}class fa extends ua{constructor(e){super(e),this.updateLines([321.25,192.75])}updateLines(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("radarPlus"!==it.get("overlay")||!n){var i={"°C":{conversion:e=>e-273.15,precision:0},"°F":{conversion:e=>9*e/5-459.67,precision:0}},r=e[0],a=e[1],o=[e=>e,i["°C"].conversion,i["°F"].conversion],s=[],l=[],c=[];this.conv={};for(var d=function(e){var n=o[e](r),i=o[e](a)-n;s.push(i/255),l.push(n);var d=t.description[e],u=t=>Math.round(s[e]*t+l[e]);c[e]=u,t.conv[d]={conversion:u,precision:0,na:""}},u=0;u<o.length;u++)d(u);for(var h=[150,168,186,205,223],m=[],p=function(){var e=h[v],t=[e,...c.map((t=>t(e)))];m.push(t)},v=0;v<h.length;v++)p();this.lines=m}}}class ga extends ua{initProperties(){super.initProperties(),this.defaults=["mm","in"],this.nativeSync=!0,this.description=["mm","in"],this.cohesion={snow:{in:"in",mm:"cm"}},this.conv={mm:{conversion:la,precision:1},in:{conversion:e=>.0394*e,precision:2}}}}var wa,ya=Object.freeze({__proto__:null,CapAlertMetric:ha,FogMetric:va,NumberedMetric:ua,PrecipMetric:ga,PtypeMetric:ma,SatelliteMetric:fa,UVIndexMetric:pa}),ba={"%":{conversion:e=>Math.round(100*e),precision:0}},Ta=new ua({ident:"temp",separator:"",defaults:["°C","°F"],conv:(wa=0,{"°C":{conversion:e=>e-273.15,precision:wa},"°F":{conversion:e=>9*e/5-459.67,precision:wa}}),description:["°C","°F"],nativeSync:!0,lines:[[252,-20,-5],[262,-10,15],[272,0,30],[282,10,50],[292,20,70],[302,30,85],[313,40,100]]}),_a=[.3,1.5,3.3,5.5,8,10.8,13.9,17.2,20.7,24.5,28.4,32.6],Sa=new ua({ident:"wind",defaults:["kt"],nativeSync:!0,conv:{kt:{conversion:e=>1.943844*e,precision:0},bft:{conversion:e=>{for(var t=0;t<_a.length;t++)if(e<_a[t])return t;return 12},precision:0},"m/s":{conversion:la,precision:0},"km/h":{conversion:e=>3.6*e,precision:0},mph:{conversion:e=>2.236936*e,precision:0}},backConv:{kt:{conversion:e=>e/1.943844,precision:0},bft:{conversion:e=>{var t;return null!==(t=_a[Math.floor(e)])&&void 0!==t?t:e<0?_a[0]:_a[_a.length-1]},precision:0},"m/s":{conversion:la,precision:0},"km/h":{conversion:e=>e/3.6,precision:0},mph:{conversion:e=>e/2.236936,precision:0}},description:["kt","bft","m/s","mph","km/h"],lines:[[0,0,0,0,0,0],[3,5,2,3,6,10],[5,10,3,5,10,20],[10,20,5,10,20,35],[15,30,7,15,35,55],[20,40,8,20,45,70],[30,60,11,30,70,100]]}),Ea=new ua({ident:"rh",defaults:["%"],conv:{"%":{conversion:la,precision:0}},description:["%"],lines:[[30,30],[50,50],[80,80],[90,90],[100,100]]}),Pa=new ua({ident:"clouds",defaults:["rules"],conv:{rules:{conversion:la,precision:0},"%":{conversion:la,precision:0}},description:["rules","%"],lines:[[25,"FEW",25],[50,"SCT",50],[70,"BKN",70],[100,"OVC",100]]}),Aa=new ua({ident:"pressure",defaults:["hPa","inHg","mmHg"],conv:{hPa:{conversion:e=>e/100,precision:0},mmHg:{conversion:e=>e/133.322387415,precision:0},inHg:{conversion:e=>e/3386.389,precision:2}},description:["hPa","inHg","mmHg"],lines:[[99e3,990,29.2,742],[1e5,1e3,29.6,750],[101e3,1010,29.8,757],[102e3,1020,30.1,765],[103e3,1030,30.4,772]]}),Ca=new ga({ident:"rain",lines:[[1.5,1.5,".06"],[2,2,".08"],[3,3,".11"],[7,7,".24"],[10,10,".39"],[20,20,".78"],[30,30,1.2]]}),Oa=new ua({ident:"snow",defaults:["cm","in"],nativeSync:!0,conv:{cm:{conversion:la,precision:1},in:{conversion:e=>.39*e,precision:1}},description:["cm","in"],lines:[[2,2,".8"],[5,5,2],[10,10,4],[50,50,20],[100,"1m","3ft"],[300,"3m","9ft"]],cohesion:{rain:{in:"in",cm:"mm"}}}),Ia=new ua({ident:"cape",defaults:["J/kg"],conv:{"J/kg":{conversion:la,precision:0}},description:["J/kg"],lines:[[0,0],[500,500],[1500,1500],[2500,2500],[5e3,5e3]]}),Ra=new ua({ident:"gtco3",defaults:["DU"],conv:{DU:{conversion:la,precision:0}},description:["DU"],lines:[[150,150],[220,220],[280,280],[330,330],[400,400]]}),La=new ua({ident:"aod550",defaults:["AOD"],conv:{AOD:{conversion:la,precision:3}},description:["AOD"],lines:[[0,0],[.25,.25],[.5,.5],[1,1],[2,2],[4,4]]}),Na=new ua({ident:"pm2p5",defaults:["µg/m³"],conv:{"µg/m³":{conversion:la,precision:0}},description:["µg/m³"],lines:[[0,0],[10,10],[20,20],[100,100],[1e3,1e3]]}),xa=new ua({ident:"no2",defaults:["µg/m³"],conv:{"µg/m³":{conversion:la,precision:2}},description:["µg/m³"],lines:[[0,0],[1,1],[5,5],[25,25],[100,100]]}),Da=new ua({ident:"tcso2",defaults:["mg/m²"],conv:{"mg/m²":{conversion:la,precision:2}},description:["mg/m²"],lines:[[0,0],[1,1],[5,5],[25,25],[100,100]]}),Ma=new ua({ident:"go3",defaults:["µg/m³"],conv:{"µg/m³":{conversion:la,precision:2}},description:["µg/m³"],lines:[[0,0],[10,10],[20,20],[100,100],[1e3,1e3]]}),Ua=new ua({ident:"altitude",defaults:["m","ft"],conv:{m:{conversion:la,precision:-2},ft:{conversion:e=>Math.round(3.28*e),precision:-2}},description:["m","ft"],lines:[[0,0,0],[1e3,1e3,3e3],[1500,1500,5e3],[5e3,"5k","FL150"],[9e3,"9k","FL300"]]}),ka=new ua({ident:"elevation",defaults:["m","ft"],conv:{m:{conversion:la,precision:0},ft:{conversion:e=>Math.round(3.28*e),precision:0}},description:["m","ft"]}),Wa=new ua({ident:"distance",defaults:["km","mi"],conv:{km:{conversion:e=>e/1e3,precision:1},mi:{conversion:e=>e/1609.344,precision:1},NM:{conversion:e=>e/1852,precision:1}},description:["km","mi","NM"]}),Fa=new ua({ident:"speed",defaults:["kt"],conv:{"km/h":{conversion:e=>3.6*e,precision:0},mph:{conversion:e=>2.236936*e,precision:0},kt:{conversion:e=>1.943844*e,precision:0},"m/s":{conversion:la,precision:0}},description:["km/h","mph","kt","m/s"]}),Ga=new ua({ident:"waves",defaults:["m","ft"],conv:{m:{conversion:la,precision:1},ft:{conversion:e=>3.28*e,precision:0}},description:["m","ft"],lines:[[.5,.5,1.6],[1,1,3.3],[1.5,1.5,5],[2,2,6.6],[6,6,20],[9,9,30]]}),Ha=new ua({ident:"currents",separator:" ",defaults:["kt"],conv:{kt:{conversion:e=>1.943844*e,precision:1},"m/s":{conversion:la,precision:2},"km/h":{conversion:e=>3.6*e,precision:1},mph:{conversion:e=>2.236936*e,precision:1}},description:["kt","m/s","mph","km/h"],lines:[[0,0,0,0,0],[.2,.4,.2,.4,.7],[.4,.8,.4,.9,1.4],[.8,1.6,.8,1.8,2.9],[1,2,1,2.2,3.6],[1.6,3.2,1.6,3.6,5.8]]}),za=new ua({ident:"visibility",defaults:["km","sm"],conv:{rules:{conversion:e=>e/1e3,label:"km",precision:1},km:{conversion:e=>e/1e3,precision:1},sm:{conversion:e=>62137e-8*e,precision:1}},description:["rules","km","sm"],lines:[[0,"LIFR",".8",".5"],[3e3,"IFR",2.7,1.5],[7e3,"MVFR",6,4],[16e3,"VFR",16,10]]}),Ba=new ua({ident:"visibilityNoRules",defaults:["km","sm"],conv:{km:{conversion:e=>e/1e3,precision:1},sm:{conversion:e=>62137e-8*e,precision:1}},description:["km","sm"],lines:[[0,".8",".5"],[3e3,2.7,1.5],[7e3,6,4],[16e3,16,10]]}),ja=new ua({ident:"so2",defaults:["µg/m³"],conv:{"µg/m³":{conversion:la,precision:2}},description:["µg/m³"],lines:[[0,0],[1,1],[5,5],[10,10],[80,80]]}),Va=new ua({ident:"dust",defaults:["µg/m³"],conv:{"µg/m³":{conversion:la,precision:1}},description:["µg/m³"],lines:[[0,0],[50,50],[100,100],[500,500],[800,800]]}),Ya=new ua({ident:"cosc",defaults:["ppbv"],conv:{ppbv:{conversion:la,precision:0}},description:["ppbv"],lines:[[0,0],[50,50],[100,100],[500,500],[1200,1200]]}),Za=e=>Math.pow(.005*Math.pow(10,.1*e),.625),qa=e=>10*Math.log10(Math.pow(e,1.6)/.005),Xa=new ua({ident:"radar",defaults:["dBZ","mm/h","in/h"],conv:{dBZ:{conversion:la,precision:0},"mm/h":{conversion:e=>Za(e),precision:1},"in/h":{conversion:e=>Za(e)/25.4,precision:2}},backConv:{dBZ:{conversion:la,precision:0},"mm/h":{conversion:e=>qa(e),precision:1},"in/h":{conversion:e=>qa(25.4*e),precision:2}},description:["dBZ","mm/h","in/h"],lines:[[0,0,0,0],[20,20,.6,.02],[30,30,3,.1],[40,40,12,.5],[50,50,50,2],[60,60,200,8]]}),Qa={conversion:e=>e,precision:0,na:""},Ja=new fa({ident:"satellite",defaults:["K","°C","°F"],conv:{K:Qa,"°C":Qa,"°F":Qa},description:["K","°C","°F"],lines:[]}),$a=new fa({ident:"radar",defaults:["dBZ","mm/h","in/h"],conv:{dBZ:{conversion:la,precision:0},"mm/h":{conversion:e=>Za(e),precision:1},"in/h":{conversion:e=>Za(e)/25.4,precision:2}},backConv:{dBZ:{conversion:la,precision:0},"mm/h":{conversion:e=>qa(e),precision:1},"in/h":{conversion:e=>qa(25.4*e),precision:2}},description:["dBZ","mm/h","in/h"],lines:[[0,0,0,0],[20,20,.6,.02],[30,30,3,.1],[40,40,12,.5],[50,50,50,2],[60,60,200,8]]}),Ka=new ma({ident:"ptype",defaults:["ptype"],conv:{ptype:{conversion:la,precision:0,label:""}},discreteLegend:{labels:[["JUST_RAIN","rgb(0,153,182)"],["FZ_RAIN","rgb(144,0,150)"],["MX_ICE","rgb(81,12,15)"],["SNOW","rgb(178,178,178)"],["WET_SN","rgb(86,148,86)"],["RA_SN","rgb(149,161,9)"]]}}),eo=new ua({ident:"gh",defaults:["m"],conv:{m:{conversion:la,precision:0}}}),to=new va({ident:"fog",defaults:["type"],conv:{type:{conversion:la,precision:0}},discreteLegend:{hasEqualItemsWidth:!0,labels:[["FOG","#c6c6c6"],["FOG_RIME","#c9c9ff"]]}}),no=new ua({ident:"lightDensity",defaults:["l/km²"],conv:{"l/km²":{conversion:la,precision:2}},description:["l/km²"],lines:[[0,0],[.025,".025"],[.1,".1"],[1,1],[10,10],[20,20]]}),io=new ua({ident:"efiWind",defaults:["%"],conv:ba,description:["%"],lines:[[-1,"unusually"],[-.75,"calm"],[.25,""],[.75,"extreme"],[1,"wind"]]}),ro=new ua({ident:"efiTemp",defaults:["%"],conv:ba,description:["%"],lines:[[-1,"extreme"],[-.75,"cold"],[-.25,""],[.25,""],[.75,"extreme"],[1,"warm"]]}),ao=new ua({ident:"efiRain",defaults:["%"],conv:ba,description:["%"],lines:[[-1,"very dry"],[0,""],[.1,""],[.75,"extreme"],[1,"precip."]]}),oo=new ga({ident:"moistureAnom100",lines:[[-100,-100,-3.94],[-60,-60,-2.36],[-30,-30,1.18],[0,0,0],[30,30,1.18],[60,60,2.36],[100,100,3.94]]}),so=new ga({ident:"moistureAnom40",lines:[[-60,-60,-2.36],[-30,-30,1.18],[0,0,0],[30,30,1.18],[60,60,2.36]]}),lo={temp:Ta,wind:Sa,rh:Ea,clouds:Pa,pressure:Aa,rain:Ca,snow:Oa,cape:Ia,gtco3:Ra,aod550:La,pm2p5:Na,no2:xa,tcso2:Da,go3:Ma,altitude:Ua,elevation:ka,distance:Wa,speed:Fa,waves:Ga,currents:Ha,visibility:za,visibilityNoRules:Ba,so2:ja,dust:Va,cosc:Ya,radar:Xa,satellite:Ja,radsat:$a,ptype:Ka,gh:eo,fog:to,lightDensity:no,efiWind:io,efiTemp:ro,efiRain:ao,drought:new ua({ident:"drought",defaults:["drought"],conv:{drought:{conversion:la,precision:0}},discreteLegend:{labels:[["INTERSUCHO_AWP_1","rgb(241,223,120)"],["INTERSUCHO_AWP_2","rgb(236,184,50)"],["INTERSUCHO_AWP_3","rgb(221,144,13)"],["INTERSUCHO_AWP_4","rgb(194,95,0)"],["INTERSUCHO_AWP_5","rgb(158,34,12)"],["INTERSUCHO_AWP_6","rgb(120,0,19)"]]}}),moistureAnom40:so,moistureAnom100:oo,fwi:new ua({ident:"fwi",defaults:["fwi"],conv:{fwi:{conversion:la,precision:0}},discreteLegend:{labels:[["INTERSUCHO_FWI_1","rgb(75,168,64)"],["INTERSUCHO_FWI_2","rgb(234,232,63)"],["INTERSUCHO_FWI_3","rgb(236,142,65)"],["INTERSUCHO_FWI_4","rgb(220,60,48)"],["INTERSUCHO_FWI_5","rgb(162,37,30)"],["INTERSUCHO_FWI_6","rgb(131,42,109)"]]}}),dfm10h:new ua({ident:"dfm10h",defaults:["%"],conv:{"%":{conversion:la,precision:0}},description:["%"],lines:[[0,0],[4,4],[8,8],[10,10],[30,30],[40,40]]}),solarpower:new ua({ident:"solarpower",defaults:["W/m²"],conv:{"W/m²":{conversion:la,precision:0}},description:["W/m²"],lines:[[0,0],[250,250],[500,500],[750,750],[1e3,1e3]]}),uvindex:new pa({ident:"uvindex",defaults:["uvindex"],conv:{uvindex:{conversion:la,precision:10}},description:["type"],lines:[[-100,-100,-3.94],[-60,-60,-2.36],[-30,-30,1.18],[0,0,0],[30,30,1.18],[60,60,2.36],[100,100,3.94]],discreteLegend:{hasEqualItemsWidth:!0,labels:[["UV_LOW","rgb(41,148,26)"],["UV_MODERATE","rgb(235,224,0)"],["UV_HIGH","rgb(222,120,0)"],["UV_VERY_HIGH","rgb(210,30,0)"],["UV_EXTREME","rgb(162,83,144)"]]}}),capAlerts:new ha({ident:"capAlerts",defaults:[],conv:{},discreteLegend:{hasEqualItemsWidth:!0,labels:[["INTERSUCHO_AWP_3","#b3b300"],["INTERSUCHO_AWP_4","#c17d00"],["INTERSUCHO_AWP_6","#a50000"]]}}),turbulence:new ua({ident:"turbulence",defaults:["EDR"],conv:{EDR:{conversion:la,precision:0}},description:["EDR"],lines:[[0,0],[20,20],[40,40],[60,60],[80,80],[100,100]]}),icing:new ua({ident:"icing",defaults:["%"],conv:{"%":{conversion:la,precision:0}},description:["%"],lines:[[0,0],[20,20],[40,40],[60,60],[80,80],[100,100]]}),area:new ua({ident:"area",defaults:["km²","acres"],conv:{"km²":{conversion:la,precision:1},acres:{conversion:e=>247.105*e,precision:0}},description:["km²","acres"]})};class co{constructor(e){this.initProperties(),Object.assign(this,e)}getColor(){return this.c.getColor()}getCalendar(e){return(jr[e]||jr.ecmwf).getCalendar()}getParams(e,t,n,i){var r=this.product||e.product,a=jr[r],o=Object.assign({},e,{layer:this.ident,server:a.server||_,JPGtransparency:this.JPGtransparency||a.JPGtransparency,PNGtransparency:this.PNGtransparency||a.PNGtransparency,maxTileZoom:this.maxTileZoom||a.maxTileZoom,transformR:this.transformR||void 0,transformG:this.transformG||void 0,transformB:this.transformB||void 0,directory:a.directory,filename:this.filename||e.overlay||this.ident,fileSuffix:this.fileSuffix||a.fileSuffix,dataQuality:this.dataQuality||a.dataQuality,upgradeDataQuality:a.betterDataQuality&&a.betterDataQuality.includes(this.ident),refTime:i||a.refTime.call(a),fullPath:""},this.renderParams),s=a.ident===t?Promise.resolve():this.getCalendar(a.ident).then((e=>{e&&(o.path=e.ts2path(n||it.get("timestamp")),o.refTime=e.refTime,o.level=this.levels&&this.levels[0]||o.level)}));return s.then((()=>{var e="accumulations"===this.renderer?"{server}/im/v3.0/{directory}/{refTime}/{path}/wm_grid_257/<z>/<x>/<y>/{filename}-surface.{fileSuffix}?next={acRange}h":this.pathGenerator||a.pathGenerator;return o.fullPath=ue(e,o),this.query&&(o.fullPath=Pe(o.fullPath,this.query)),o}))}initProperties(){this.renderer="tileLayer",this.sea=!1,this.JPGtransparency=!1,this.renderParams={renderFrom:"R"}}}class uo extends co{initProperties(){super.initProperties(),this.PNGtransparency=!0,this.renderParams={interpolate:"interpolateWaves",renderFrom:"B",sea:!0},this.c=sa.waves,this.m=lo.waves}}var ho=Object.freeze({__proto__:null,Layer:co,WaveLayer:uo}),mo={cbase:{description:["m","ft"],lines:[[0,0,0],[200,300,1e3],[500,500,1500],[1500,"1.5k",5e3]]},ccl:{description:["m","ft"],lines:[[0,0,0],[1e3,"1k","3.3k"],[2e3,"2k","6.6k"],[3e3,"3k","10k"],[4e3,"4k","13k"],[6e3,"6k","20k"],[8e3,"8k","26k"]]},sst:{description:["°C","°F"],lines:[[272,0,30],[282,10,50],[292,20,70],[302,30,85],[313,40,100]]},cloudtop:{description:["m","ft"],lines:[[0,0,0],[5e3,"5k","FL150"],[9e3,"9k","FL300"],[12e3,"12k","FL400"],[15e3,"15k","FL500"]]},rainAccu:{description:["mm","in"],lines:[[3,3,".1"],[10,10,".4"],[25,25,"1.0"],[100,100,"4.0"],[300,300,"1ft"]]},wetbulbtemp:{description:["°C","°F"],lines:[[273,0,32],[291,18,64],[298,25,77],[302,29,84],[305,32,90]]}},po=e=>Math.max(0,Math.pow(2,e)-.001),vo=e=>t=>Math.pow(2,t)-e,fo=new co({ident:"capAlerts",renderer:"capAlerts",m:lo.capAlerts,levels:["surface"]}),go=new co({ident:"pressureIsolines",renderer:"isolines",levels:["surface"]}),wo=new co({ident:"ghIsolines",renderer:"isolines",levels:["975h","950h","925h","900h","850h","800h","700h","600h","500h","400h","300h","250h","200h","150h","10h"]}),yo=new co({ident:"tempIsolines",renderer:"isolines",levels:["surface","950h","925h","900h","850h","800h","700h","600h","500h","400h","300h","250h","200h","150h","10h"]}),bo=new co({ident:"deg0Isolines",renderer:"isolines",levels:["surface"]}),To=new co({ident:"windParticles",renderer:"particles",filename:"wind",fileSuffix:"jpg",renderParams:{particlesIdent:"wind"}}),_o=new co({ident:"ecmwfWindParticles",renderer:"particles",product:"ecmwf",levels:["surface"],filename:"wind",fileSuffix:"jpg",renderParams:{particlesIdent:"wind"}}),So=new co({ident:"ecmwfWindParticles150h",renderer:"particles",product:"ecmwf",levels:["surface"],filename:"wind",fileSuffix:"jpg",renderParams:{particlesIdent:"wind"}}),Eo=new co({ident:"ecmwfWindParticles500h",renderer:"particles",product:"ecmwf",levels:["surface"],filename:"wind",fileSuffix:"jpg",renderParams:{particlesIdent:"wind"}}),Po=new co({ident:"ecmwfWindParticles600h",renderer:"particles",product:"ecmwf",levels:["surface"],filename:"wind",fileSuffix:"jpg",renderParams:{particlesIdent:"wind"}}),Ao=new co({ident:"waveParticles",renderer:"particles",PNGtransparency:!0,renderParams:{particlesIdent:"waves"}}),Co=new co({ident:"currentParticles",renderer:"particles",filename:"seacurrents",product:"cmems",renderParams:{particlesIdent:"currents"}}),Oo=new co({ident:"currentsTideParticles",renderer:"particles",filename:"seacurrents_tide",renderParams:{particlesIdent:"currents"}}),Io=new co({ident:"wind",renderParams:{renderFrom:"RG"},c:sa.wind,m:lo.wind}),Ro=new co({ident:"temp",c:sa.temp,m:lo.temp}),Lo=new co({ident:"wetbulbtemp",filename:"wbt",c:sa.wetbulbtemp,m:lo.temp,l:mo.wetbulbtemp}),No=new co({ident:"solarpower",c:sa.solarpower,m:lo.solarpower}),xo=new co({ident:"uvindex",fileSuffix:"png",PNGtransparency:!0,c:sa.uvindex,m:lo.uvindex}),Do=new co({ident:"dewpoint",c:sa.temp,m:lo.temp}),Mo=new co({ident:"gust",c:sa.wind,m:lo.wind}),Uo=new co({ident:"gustAccu",filename:"gust",fileSuffix:"jpg",renderer:"accumulations",JPGtransparency:!0,c:sa.wind,m:lo.wind,query:"acc=maxip"}),ko=new co({ident:"turbulence",fileSuffix:"png",c:sa.turbulence,m:lo.turbulence,PNGtransparency:!0,levels:["850h","800h","700h","600h","500h","400h","300h","250h","200h","150h"]}),Wo=new co({ident:"icing",fileSuffix:"png",c:sa.icing,m:lo.icing,levels:["950h","925h","900h","850h","800h","700h","600h","500h","400h","300h"]}),Fo=new co({ident:"rh",c:sa.rh,m:lo.rh}),Go=new co({ident:"pressure",fileSuffix:"png",PNGtransparency:!0,c:sa.pressure,m:lo.pressure}),Ho=new co({ident:"ccl",fileSuffix:"png",PNGtransparency:!0,c:sa.cclAltitude,m:lo.altitude,l:mo.ccl,renderParams:{pattern:"cclPattern",interpolateNearestG:!0},transformG:e=>Math.round(4*e)/4}),zo=new co({ident:"rain",filename:"rainlogptype2",fileSuffix:"png",PNGtransparency:!0,c:sa.rain,m:lo.rain,renderParams:{pattern:"rainPattern",interpolateNearestG:!0},transformR:po,transformG:e=>Math.round(4*e)/4,wTransformR:"rainLog"}),Bo=new co({ident:"ptype",filename:"rainlogptype",fileSuffix:"png",PNGtransparency:!0,c:sa.justGray,m:lo.ptype,renderParams:{pattern:"ptypePattern",interpolateNearestG:!0},transformR:po,transformG:Math.round,wTransformR:"rainLog"}),jo=new co({ident:"thunder",filename:"lightdens",c:sa.lightDensity,m:lo.lightDensity,transformR:po,wTransformR:"rainLog"}),Vo=new co({ident:"clouds",filename:"cloudsrain",renderParams:{renderFrom:"RG",isMultiColor:!0},c:sa.clouds,m:lo.rain,cm:lo.clouds,transformG:e=>e<10?e:10*(e-10)+10,getColor2:()=>sa.rainClouds.getColor(),getAmountByColor:(e,t)=>t<.3?0:t<3?1:t<6?2:3}),Yo=new co({ident:"lclouds",c:sa.lclouds,m:lo.clouds}),Zo=new co({ident:"mclouds",c:sa.mclouds,m:lo.clouds}),qo=new co({ident:"hclouds",c:sa.hclouds,m:lo.clouds}),Xo=new co({ident:"cape",c:sa.cape,m:lo.cape}),Qo=new co({ident:"cbase",fileSuffix:"png",PNGtransparency:!0,c:sa.cbase,m:lo.altitude,l:mo.cbase}),Jo=new co({ident:"fog",filename:"fogtype",fileSuffix:"png",c:sa.fog,m:lo.fog,PNGtransparency:!0}),$o=new co({ident:"snowAccu",filename:"snowaccumulationlog",renderer:"accumulations",fileSuffix:"jpg",JPGtransparency:!0,c:sa.snow,m:lo.snow,transformR:po,wTransformR:"rainLog",renderParams:{interpolate:"interpolateOverlay"}}),Ko=new co({ident:"rainAccu",filename:"rainaccumulationlog",fileSuffix:"jpg",JPGtransparency:!0,transformR:po,wTransformR:"rainLog",renderer:"accumulations",renderParams:{interpolate:"interpolateOverlay"},c:sa.rainAccu,m:lo.rain,l:mo.rainAccu}),es=new uo({ident:"waves"}),ts=new uo({ident:"wwaves"}),ns=new uo({ident:"swell1"}),is={capAlerts:fo,pressureIsolines:go,ghIsolines:wo,tempIsolines:yo,deg0Isolines:bo,windParticles:To,ecmwfWindParticles:_o,ecmwfWindParticles150h:So,ecmwfWindParticles500h:Eo,ecmwfWindParticles600h:Po,waveParticles:Ao,currentParticles:Co,currentsTideParticles:Oo,wind:Io,temp:Ro,wetbulbtemp:Lo,solarpower:No,uvindex:xo,dewpoint:Do,gust:Mo,gustAccu:Uo,rh:Fo,pressure:Go,ccl:Ho,rain:zo,ptype:Bo,thunder:jo,clouds:Vo,lclouds:Yo,mclouds:Zo,hclouds:qo,cape:Xo,cbase:Qo,fog:Jo,snowAccu:$o,rainAccu:Ko,waves:es,wwaves:ts,swell1:ns,swell2:new uo({ident:"swell2"}),swell3:new uo({ident:"swell3"}),swell:ns,currents:new co({ident:"currents",filename:"seacurrents",renderParams:{renderFrom:"RG",sea:!0},c:sa.currents,m:lo.currents}),currentsTide:new co({ident:"currentsTide",filename:"seacurrents_tide",renderParams:{renderFrom:"RG",sea:!0},c:sa.currents,m:lo.currents}),sst:new co({ident:"sst",renderer:"noUserControl",renderParams:{sea:!0},levels:["surface"],c:sa.temp,m:lo.temp,l:mo.sst}),visibility:new co({ident:"visibility",c:sa.visibility,m:lo.visibility}),snowcover:new co({ident:"snowcover",filename:"snowcoverlog",transformR:po,wTransformR:"rainLog",c:sa.snow,m:lo.snow}),cloudtop:new co({ident:"cloudtop",hasParticles:!0,levels:["surface"],fileSuffix:"jpg",JPGtransparency:!0,c:sa.levels,m:lo.altitude,l:mo.cloudtop}),deg0:new co({ident:"deg0",levels:["surface"],c:sa.deg0,m:lo.altitude}),cosc:new co({ident:"cosc",filename:"chem_cosc",c:sa.cosc,m:lo.cosc,transformR:vo(1),wTransformR:1}),dustsm:new co({ident:"dustsm",filename:"chem_dustsm",hasParticles:!1,c:sa.dust,m:lo.dust,transformR:vo(.1),wTransformR:.1}),radar:new co({ident:"radar",renderer:"radar",c:sa.radar,m:lo.radar}),satellite:new co({ident:"satellite",renderer:"satellite",c:sa.satellite,m:lo.satellite}),radarPlus:new co({ident:"radarPlus",renderer:"radarPlus",c:sa.radarPlus,m:lo.radsat}),gtco3:new co({ident:"gtco3",c:sa.gtco3,m:lo.gtco3}),pm2p5:new co({ident:"pm2p5",c:sa.pm2p5,m:lo.pm2p5,transformR:vo(.001),wTransformR:.001}),no2:new co({ident:"no2",c:sa.no2,m:lo.no2,transformR:vo(.001),wTransformR:.001}),aod550:new co({ident:"aod550",c:sa.aod550,m:lo.aod550,transformR:vo(.001),wTransformR:.001}),tcso2:new co({ident:"tcso2",c:sa.tcso2,m:lo.tcso2,transformR:vo(.001),wTransformR:.001}),go3:new co({ident:"go3",c:sa.go3,m:lo.go3,transformR:vo(.001),wTransformR:.001}),gh:new co({ident:"gh",m:lo.gh}),efiWind:new co({ident:"efiWind",filename:"wsi",renderer:"daySwitcher",c:sa.efiWind,m:lo.efiWind}),efiTemp:new co({ident:"efiTemp",filename:"ti",renderer:"daySwitcher",c:sa.efiTemp,m:lo.efiTemp}),efiRain:new co({ident:"efiRain",filename:"tpi",renderer:"daySwitcher",c:sa.efiRain,m:lo.efiRain}),moistureAnom40:new co({ident:"moistureAnom40",filename:"awd_0_40",renderer:"daySwitcher",renderParams:{landOnly:!0},c:sa.moistureAnom40,m:lo.moistureAnom40,PNGtransparency:!0}),moistureAnom100:new co({ident:"moistureAnom100",filename:"awd_0_100",renderer:"daySwitcher",renderParams:{landOnly:!0},c:sa.moistureAnom100,m:lo.moistureAnom100,PNGtransparency:!0}),drought40:new co({ident:"drought40",filename:"awp_0_40",renderer:"daySwitcher",renderParams:{landOnly:!0},c:sa.drought,m:lo.drought,PNGtransparency:!0}),drought100:new co({ident:"drought100",filename:"awp_0_100",renderer:"daySwitcher",renderParams:{landOnly:!0},c:sa.drought,m:lo.drought,PNGtransparency:!0}),soilMoisture40:new co({ident:"soilMoisture40",filename:"awr_0_40",renderer:"daySwitcher",renderParams:{landOnly:!0},c:sa.soilMoisture,m:lo.rh,PNGtransparency:!0}),soilMoisture100:new co({ident:"soilMoisture100",filename:"awr_0_100",renderer:"daySwitcher",renderParams:{landOnly:!0},c:sa.soilMoisture,m:lo.rh,PNGtransparency:!0}),fwi:new co({ident:"fwi",filename:"fwi_genz",renderer:"daySwitcher",renderParams:{landOnly:!0},c:sa.fwi,m:lo.fwi,PNGtransparency:!0}),dfm10h:new co({ident:"dfm10h",filename:"dfm10h",renderer:"daySwitcher",renderParams:{landOnly:!0},c:sa.dfm10h,m:lo.dfm10h,PNGtransparency:!0}),turbulence:ko,icing:Wo,topoMap:new co({ident:"topoMap",renderer:"topoMap"})};class rs{constructor(e){this.initProperties(),Object.assign(this,e);var t=is[this.ident];if(t){var{m:n}=t;n&&(this.convertValue=n.convertValue.bind(n),this.convertNumber=n.convertNumber.bind(n),this.setMetric=n.setMetric.bind(n),this.cycleMetric=n.cycleMetric.bind(n),this.listMetrics=n.listMetrics.bind(n),this.m=n),this.c=t.c,this.l=t.l,this.cm=t.cm}}onClick(){it.set("overlay",this.ident)}paintLegend(e){this.m&&(this.m.description||this.m.discreteLegend)?this.m.renderLegend(this.c,e,this.l||this.m):e.innerHTML=""}getName(e){return(e&&this.transShort?rn[this.transShort]:rn[this.trans])||this.ident}getMenuImagePath(){return"/img/menu3/".concat(this.menuImage||this.ident,".jpg")}getMenuName(e){return this.menuTrans?this.menuTrans in rn&&rn[this.menuTrans]?rn[this.menuTrans]:this.ident:this.getName(e)}getMenuIdent(){return this.partOf||this.ident}createPickerHTML(e,t){if(this.convertValue&&this.m){var n,[i]=e,r=(null===(n=this.m)||void 0===n?void 0:n.howManyMetrics())>1?this.convertValue(i," <span>","</span>"):this.convertValue(i," ");return'<big class="picker-change-metric">'.concat(r,"</big>")}return""}get metric(){return this.m?this.m.metric:""}initProperties(){this.poiInCities=!0}}var as=Object.freeze({__proto__:null,Overlay:rs});class os extends rs{constructor(){super(...arguments),o(this,"hidePickerElevation",!0)}createPickerHTML(e,t){var n=he(e),i=ve(n);return'<big class="picker-change-metric">'.concat(this.convertValue(n.wind," <span>","</span>"),'<i title="Direction to">').concat(i).concat(t(pe(n)?(n.dir+180)%360:""),"</i></big>")}}class ss extends rs{constructor(){super(...arguments),o(this,"hidePickerElevation",!0)}createPickerHTML(e,t){var n=me(e);return'<big class="picker-change-metric">'.concat(this.convertValue(n.size," <span>","</span>"),'<i title="Direction from, true north" data-dir="').concat(n.dir,'">').concat(t(n.dir),'</i></big>\n        <div class="picker-subtext">').concat(rn.PERIOD," ").concat(Math.round(n.period)," s.</div>")}}class ls extends rs{constructor(){super(...arguments),o(this,"labels",{0:"INTERSUCHO_AWP_0",1:"INTERSUCHO_AWP_1",2:"INTERSUCHO_AWP_2",3:"INTERSUCHO_AWP_3",4:"INTERSUCHO_AWP_4",5:"INTERSUCHO_AWP_5",6:"INTERSUCHO_AWP_6"})}createPickerHTML(e){var t=Math.round(e[0])+1,n=rn[this.labels[t]]||"";return"<big>".concat(n,"</big>")}}class cs extends rs{constructor(){super(...arguments),o(this,"labels",{1:"INTERSUCHO_FWI_1",2:"INTERSUCHO_FWI_2",3:"INTERSUCHO_FWI_3",4:"INTERSUCHO_FWI_4",5:"INTERSUCHO_FWI_5",6:"INTERSUCHO_FWI_6"})}createPickerHTML(e){var t=Math.round(e[0]),n=rn[this.labels[t]]||"";return"<big>".concat(n,"</big>")}}class ds extends rs{constructor(){super(...arguments),o(this,"hidePickerElevation",!0)}createPickerHTML(e){var t=e[1],n="".concat(lo.ptype.convertNumber.call(lo.ptype,t)||rn.RAIN," (3h)"),i=5==t||6==t?lo.snow:lo.rain;return"ptype"===this.ident?"<big>".concat(n,'</big><div class="picker-subtext">Amount: ').concat(i.convertValue(e[0]," "),"</div>"):'<big class="picker-change-metric">'.concat(i.convertValue(e[0]," <span>","</span>"),'</span></big><div class="picker-subtext">').concat(n,"</div>")}}class us extends rs{constructor(){super(...arguments),o(this,"hidePickerElevation",!0)}createPickerHTML(e){return"<big>".concat(Math.floor(e[0])," %</big>").concat(e[1]>.3?'<div class="picker-subtext">'.concat(rn.D_PRECI,": ").concat(lo.rain.convertValue(e[1]," ")," (3h)</div>"):"")}}var hs=Object.freeze({__proto__:null,AwpOverlay:ls,CloudsOverlay:us,CurrentOverlay:os,FwiOverlay:cs,RainPtypeOverlay:ds,WaveOverlay:ss}),ms=new rs({ident:"wind",hasMoreLevels:!0,trans:"WIND",icon:"|",layers:["windParticles","wind"],globeNotSupported:!1,hideFromURL:!0,createPickerHTML(e,t){var n=he(e),i=ve(n);return'<big class="picker-change-metric">'.concat(this.convertValue(n.wind," <span>","</span>"),'<i title="Wind direction from true north">').concat(i).concat(t(n.dir),"</i></big>")}}),ps=new rs({ident:"temp",trans:"TEMP",icon:"",layers:["windParticles","temp"],hasMoreLevels:!0}),vs=new rs({ident:"wetbulbtemp",trans:"WETBULB_TEMP",icon:"",layers:["windParticles","wetbulbtemp"]}),fs=new rs({ident:"solarpower",trans:"SOLARPOWER",icon:"z",layers:["ecmwfWindParticles","solarpower"]}),gs=new rs({ident:"uvindex",trans:"UVINDEX",icon:"",layers:["ecmwfWindParticles","uvindex"]}),ws=new rs({ident:"dewpoint",trans:"DEW_POINT",icon:"",layers:["windParticles","dewpoint"],hasMoreLevels:!0}),ys=new rs({ident:"gust",trans:"GUST",icon:"",layers:["windParticles","gust"]}),bs=new rs({ident:"gustAccu",trans:"GUSTACCU",icon:"",isAccu:!0,layers:["windParticles","gustAccu"]}),Ts=new rs({ident:"rh",icon:"/",trans:"RH",layers:["windParticles","rh"],hasMoreLevels:!0}),_s=new rs({ident:"pressure",trans:"PRESS",icon:"",layers:["windParticles","pressure"]}),Ss=new ds({ident:"rain",trans:"RAIN_THUNDER",transShort:"JUST_RAIN",icon:"",layers:["windParticles","rain"]}),Es=new us({ident:"clouds",trans:"CLOUDS2",icon:"7",layers:["windParticles","clouds"],paintLegend(e){this.m.renderLegend(sa.rainClouds,e,this.m)}}),Ps=new us({ident:"lclouds",trans:"LOW_CLOUDS",icon:"",layers:["windParticles","lclouds"]}),As=new us({ident:"mclouds",trans:"MEDIUM_CLOUDS",icon:"",layers:["windParticles","mclouds"]}),Cs=new us({ident:"hclouds",trans:"HIGH_CLOUDS",layers:["windParticles","hclouds"],icon:""}),Os=new rs({ident:"cape",trans:"CAPE",layers:["windParticles","cape"],icon:"~"}),Is=new rs({ident:"cbase",trans:"CLOUD_ALT",icon:":",layers:["windParticles","cbase"]}),Rs=new rs({ident:"snowAccu",trans:"NEWSNOW",icon:"",isAccu:!0,layers:["snowAccu"],hideParticles:!0}),Ls=new rs({ident:"rainAccu",trans:"RACCU",transShort:"RACCU_SHORT",icon:"9",isAccu:!0,layers:["rainAccu"],hideParticles:!0,menuImage:"rainAccu-v2"}),Ns=new ss({ident:"waves",hideWxLabels:!0,trans:"WAVES",icon:"",layers:["waveParticles","waves"]}),xs=new ss({hideWxLabels:!0,ident:"wwaves",trans:"WWAVES",icon:"|",layers:["waveParticles","wwaves"]}),Ds=new ss({hideWxLabels:!0,ident:"swell1",trans:"SWELL",icon:"{",layers:["waveParticles","swell1"]}),Ms=new ss({hideWxLabels:!0,ident:"swell2",trans:"SWELL2",icon:"",layers:["waveParticles","swell2"]}),Us=new ss({hideWxLabels:!0,ident:"swell3",trans:"SWELL3",icon:"",layers:["waveParticles","swell3"]}),ks=Ds,Ws=new os({hideWxLabels:!0,ident:"currents",trans:"CURRENT",icon:"q",layers:["currentParticles","currents"]}),Fs=new os({hideWxLabels:!0,ident:"currentsTide",trans:"CURRENT_TIDE",icon:"",layers:["currentsTideParticles","currentsTide"]}),Gs=new rs({hideWxLabels:!0,hidePickerElevation:!0,ident:"sst",trans:"SST2",icon:"",layers:["currentParticles","sst"]}),Hs=new rs({ident:"visibility",trans:"VISIBILITY",icon:"c",layers:["windParticles","visibility"]}),zs=new rs({ident:"fog",trans:"FOG",icon:"d",layers:["fog"],hideParticles:!0}),Bs=new rs({ident:"thunder",trans:"THUNDER",icon:"",layers:["windParticles","thunder"]}),js=new rs({ident:"snowcover",trans:"SNOWDEPTH",icon:"N",layers:["windParticles","snowcover"],hidePickerElevation:!0,createPickerHTML(e){var t=e[0];return'<big class="picker-change-metric">'.concat(t>490?"More than 5m":this.convertValue(t," <span>","</span>"),'</big><div class="picker-subtext">').concat(t>.5?rn.SNOWDENSITY+" "+Math.round(e[1])+" kg/m3":"","</div>")}}),Vs=new rs({ident:"cloudtop",trans:"CTOP",icon:"Q",layers:["windParticles","cloudtop"]}),Ys=new rs({ident:"deg0",trans:"FREEZING",icon:"",layers:["windParticles","deg0"]}),Zs=new rs({ident:"gtco3",trans:"OZONE",icon:"",layers:["ecmwfWindParticles150h","gtco3"]}),qs=new rs({ident:"pm2p5",trans:"PM2P5",icon:"",layers:["ecmwfWindParticles","pm2p5"]}),Xs=new rs({ident:"no2",trans:"NO22",icon:"",layers:["ecmwfWindParticles","no2"]}),Qs=new rs({ident:"aod550",trans:"AOD550",icon:"",layers:["ecmwfWindParticles600h","aod550"]}),Js=new rs({ident:"tcso2",trans:"TCSO2",icon:"",layers:["ecmwfWindParticles500h","tcso2"]}),$s=new rs({ident:"go3",trans:"GO3",icon:"",layers:["ecmwfWindParticles","go3"]}),Ks=new rs({ident:"cosc",trans:"COSC",icon:"",layers:["ecmwfWindParticles","cosc"]}),el=new rs({ident:"dustsm",trans:"DUSTSM",icon:"",layers:["ecmwfWindParticles","dustsm"]}),tl=new ds({ident:"ptype",trans:"PTYPE",icon:"",layers:["windParticles","ptype"]}),nl=new rs({ident:"ccl",trans:"CCL",icon:"",layers:["ccl","windParticles"]}),il=new rs({allwaysOn:!0,poiInCities:!1,globeNotSupported:!0,ident:"radar",trans:"RADAR",transShort:"RADAR_SHORT",icon:"",layers:["radar"],hideParticles:!0,createPickerHTML(e){return"<big>".concat(this.convertValue(e[2]," "),"</big>")}}),rl=new rs({allwaysOn:!0,poiInCities:!1,globeNotSupported:!0,ident:"satellite",trans:"SATELLITE",icon:"",layers:["satellite"],hideParticles:!0,createPickerHTML(e){var t=e[0];return"<big>".concat("".concat(null!==t?this.convertValue(t," "):this.m.na()),"</big>")}}),al=new rs({allwaysOn:!0,poiInCities:!1,globeNotSupported:!0,ident:"radarPlus",trans:"RADAR_PLUS",icon:"",layers:["radarPlus"],hideParticles:!0,promoBadge:"BETA",createPickerHTML(e){return"<big>".concat(this.convertValue(e[2]," "),"</big>")}}),ol=new rs({ident:"satellite",trans:"SATELLITE",globeNotSupported:!0,partOf:"satellite",icon:""}),sl=new rs({ident:"capAlerts",trans:"WX_WARNINGS",icon:"",layers:["capAlerts"],hideParticles:!0}),ll={menuIcon:"",menuTrans:"EFORECAST"},cl=new rs(a(a({},ll),{},{icon:"",trans:"TEMP",hideParticles:!0,ident:"efiTemp",fullname:"".concat(rn.EFORECAST," - ").concat(rn.TEMP),layers:["efiTemp"]})),dl=new rs(a(a({},ll),{},{icon:"|",trans:"WIND",hideParticles:!0,ident:"efiWind",fullname:"".concat(rn.EFORECAST," - ").concat(rn.WIND),partOf:"efiTemp",layers:["efiWind"]})),ul=new rs(a(a({},ll),{},{icon:"",trans:"JUST_RAIN",hideParticles:!0,ident:"efiRain",fullname:"".concat(rn.EFORECAST," - ").concat(rn.JUST_RAIN),partOf:"efiTemp",layers:["efiRain"]})),hl={menuIcon:"",menuTrans:"INTERSUCHO"},ml=new ls(a(a({},hl),{},{icon:"",trans:"INTERSUCHO_AWP",fullname:"".concat(rn.INTERSUCHO_AWP," - ").concat(rn.INTERSUCHO_40),shortname:rn.INTERSUCHO_40,hideParticles:!0,ident:"drought40",layers:["drought40"],paintLegend(e){this.m.renderLegend(sa.drought.getColor(),e,this.m)}})),pl=new ls(a(a({},hl),{},{icon:"",trans:"INTERSUCHO_AWP",hideParticles:!0,ident:"drought100",fullname:"".concat(rn.INTERSUCHO_AWP," - ").concat(rn.INTERSUCHO_100),shortname:rn.INTERSUCHO_100,partOf:"drought40",layers:["drought100"],paintLegend(e){this.m.renderLegend(sa.drought.getColor(),e,this.m)}})),vl=new rs(a(a({},hl),{},{icon:"",trans:"INTERSUCHO_AWD",fullname:"".concat(rn.INTERSUCHO_AWD," - ").concat(rn.INTERSUCHO_40),shortname:rn.INTERSUCHO_40,hideParticles:!0,ident:"moistureAnom40",partOf:"drought40",layers:["moistureAnom40"]})),fl=new rs(a(a({},hl),{},{icon:"",trans:"INTERSUCHO_AWD",fullname:"".concat(rn.INTERSUCHO_AWD," - ").concat(rn.INTERSUCHO_100),shortname:rn.INTERSUCHO_100,hideParticles:!0,ident:"moistureAnom100",partOf:"drought40",layers:["moistureAnom100"]})),gl=new rs(a(a({},hl),{},{icon:"",trans:"INTERSUCHO_AWR",fullname:"".concat(rn.INTERSUCHO_AWR," - ").concat(rn.INTERSUCHO_40),shortname:rn.INTERSUCHO_40,hideParticles:!0,ident:"soilMoisture40",partOf:"drought40",layers:["soilMoisture40"]})),wl=new rs(a(a({},hl),{},{icon:"",trans:"INTERSUCHO_AWR",fullname:"".concat(rn.INTERSUCHO_AWR," - ").concat(rn.INTERSUCHO_100),shortname:rn.INTERSUCHO_100,hideParticles:!0,ident:"soilMoisture100",partOf:"drought40",layers:["soilMoisture100"]})),yl={menuIcon:"",menuTrans:"INTERSUCHO_FIRE_DANGER"},bl=new cs(a(a({},yl),{},{icon:"",trans:"INTERSUCHO_FWI",hideParticles:!0,ident:"fwi",layers:["fwi"],paintLegend(e){this.m.renderLegend(sa.fwi.getColor(),e,this.m)}})),Tl=new rs(a(a({},yl),{},{icon:"",trans:"INTERSUCHO_DFM",hideParticles:!0,ident:"dfm10h",partOf:"fwi",layers:["dfm10h"]})),_l=new rs({icon:"",trans:"TURBULENCE",ident:"turbulence",layers:["turbulence","windParticles"],hasMoreLevels:!0,paintLegend(e){this.m.renderLegend(sa.turbulence.getColor(),e,this.m)}}),Sl=new rs({icon:"",trans:"ICING2",ident:"icing",layers:["icing","windParticles"],hasMoreLevels:!0,paintLegend(e){this.m.renderLegend(sa.icing.getColor(),e,this.m)}}),El=new rs({icon:"",trans:"HEATMAP",ident:"heatmaps",hideFromURL:!0,promoBadge:"MBLUE",promoBadgeColor:"#6b6b6b",onClick(){window.open("https://www.meteoblue.com/products/cityclimate","_blank")}}),Pl=new rs({icon:"",trans:"HURR_TRACKER",ident:"hurricanes",layers:["wind"],onClick(){Nn.emit("rqstOpen","hurricanes")}}),Al={wind:ms,temp:ps,wetbulbtemp:vs,solarpower:fs,uvindex:gs,dewpoint:ws,gust:ys,gustAccu:bs,turbulence:_l,icing:Sl,rh:Ts,pressure:_s,rain:Ss,clouds:Es,lclouds:Ps,mclouds:As,hclouds:Cs,cape:Os,cbase:Is,snowAccu:Rs,rainAccu:Ls,waves:Ns,wwaves:xs,swell1:Ds,swell2:Ms,swell3:Us,swell:ks,currents:Ws,currentsTide:Fs,sst:Gs,visibility:Hs,fog:zs,thunder:Bs,snowcover:js,cloudtop:Vs,deg0:Ys,gtco3:Zs,pm2p5:qs,no2:Xs,aod550:Qs,tcso2:Js,go3:$s,cosc:Ks,dustsm:el,ptype:tl,ccl:nl,radar:il,satellite:rl,radarPlus:al,satelliteIRBT:ol,capAlerts:sl,efiWind:dl,efiTemp:cl,efiRain:ul,moistureAnom40:vl,moistureAnom100:fl,drought40:ml,drought100:pl,soilMoisture40:gl,soilMoisture100:wl,fwi:bl,dfm10h:Tl,heatmaps:El,topoMap:new rs({ident:"topoMap",trans:"HMAP",globeNotSupported:!0,hideFromURL:!0,icon:"",layers:["topoMap"],hideParticles:!0}),hurricanes:Pl},Cl=(e,t)=>{var n,i,r=jr[t],a=Al[e],o=(null!==(n=a.layers)&&void 0!==n?n:[]).map((e=>is[e])).filter((e=>{var t;return null===(t=e.levels)||void 0===t?void 0:t.length})).map((e=>e.levels));if(null!==(i=r.levels)&&void 0!==i&&i.length&&o.push(r.levels),r.levelsOverride){var s,l=r.levelsOverride;(null!==(s=a.layers)&&void 0!==s?s:[]).filter((e=>e in l)).map((e=>l[e])).forEach((e=>o.push(e)))}var c=Me(o);return"wind"!==e&&(c=c.filter((e=>"100m"!==e))),a.hasMoreLevels||(c=c.slice(0,1)),c},Ol=Object.freeze({__proto__:null,getAvailableLevels:Cl}),Il=new Ge({ident:"render"}),Rl={extreme:[0,0,1,2,3,4,4,5,5,6,6,6,6,6,6,6,6,6,6,6,6],ultra:[0,0,0,2,3,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5],high:[0,0,0,2,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4],normal:[0,0,0,2,2,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4],low:[0,0,0,1,1,1,1,1,2,2,2,3,3,3,3,3,3,3,3,3,3]},Ll=e=>Math.pow(2,e),Nl=(e,t)=>Ll(e)/Ll(t),xl=Object.keys(Rl),Dl=(e,t)=>{if(e.dataTilesZoom)return e.dataTilesZoom;var n=e.dataQuality,i=e.upgradeDataQuality?xl[Math.max(xl.indexOf(n)-1,0)]:n,r=Rl[i][t];return e.maxTileZoom?Math.min(oi()?e.maxTileZoom.premium:e.maxTileZoom.free,r):r},Ml=(e,t)=>{if(!t.fullPath)return null;var n=e.z,i=Dl(t,n),r=Nl(n,i),a=Math.floor(e.x/r),o=Math.floor(e.y/r),s=e.x%r,l=e.y%r,c=t.fullPath.replace("<z>",i.toString()).replace("<y>",o.toString()).replace("<x>",a.toString()),d=Ll(i);return a<0||o<0||a>=d||o>=d?null:{url:c,x:a,y:o,z:i,intX:s,intY:l,trans:r,transformR:t.transformR||null,transformG:t.transformG||null,transformB:t.transformB||null}},Ul=(e,t)=>!!(192&e[t+2]||192&e[t+6]||192&e[t+1030]||192&e[t+1034]),kl=(e,t)=>!(e[t+3]&&e[t+7]&&e[t+1028+3]&&e[t+1028+7]),Wl={},Fl=e=>{if(e in Wl)return Wl[e];var t,n,i,r=0;if(!(e<=32))return null;for(t=new Uint16Array(4*e*e),i=0;i<e;i++)for(n=0;n<e;n++)t[r++]=(e-i)*(e-n),t[r++]=(e-i)*n,t[r++]=i*(e-n),t[r++]=n*i;return Wl[e]=t,t},Gl=(e,t,n)=>{var i=n.getColorTable();if(!i)throw new Error("Creating fill fun failed, cTable is not defined!");var r=n.value2index.bind(n);switch(t){case 1:return(t,n,a)=>{var o=(n<<8)+t<<2,s=r(a);e[o++]=i[s++],e[o++]=i[s++],e[o]=i[s]};case 2:return(t,n,a)=>{var o=(n<<8)+t<<2,s=r(a),l=i[s++],c=i[s++],d=i[s];e[o]=e[o+4]=l,e[o+1]=e[o+5]=c,e[o+2]=e[o+6]=d,e[o+=1024]=e[o+4]=l,e[o+1]=e[o+5]=c,e[o+2]=e[o+6]=d}}},Hl=document.createElement("canvas"),zl=Hl.getContext("2d");Hl.width=Hl.height=256,zl.fillStyle="black",zl.fillRect(0,0,256,256);var Bl=zl.getImageData(0,0,256,256),jl=(e,t,n,i,r,a,o,s,l,c)=>{null!==e&&(o=e[t],s=e[t+1],l=e[t+2],c=e[t+3]);var d=Math.max(o,s,l,c);return d===o?n:d===s?i:d===l?r:a},Vl=Object.freeze({__proto__:null,createCombinedFillFun:(e,t,n,i)=>{var r=t.getColorTable(),a=n.getColorTable(),o=t.value2index.bind(t),s=n.value2index.bind(n),l=Gl(e,2,t),c=Gl(e,2,n),d=(t,n,i,r)=>{e[t]=n,e[t+1]=i,e[t+2]=r};return(e,t,n,u)=>{var h=i(n,u);if(0===h)return l(e,t,n);if(4===h)return c(e,t,u);if(!r||!a)throw new Error("Cannot create combinedFillFun, col1 (".concat(r,") or col2 (").concat(a,") is not defined!"));var m=(t<<8)+e<<2,p=o(n),v=s(u),f=r[p++],g=r[p++],w=r[p++],y=a[v++],b=a[v++],T=a[v++];switch(h){case 1:d(m,y,b,T),d(m+4,f,g,w),d(m+1024,f,g,w),d(m+1028,f,g,w);break;case 2:d(m,y,b,T),d(m+4,y,b,T),d(m+1024,f,g,w),d(m+1028,f,g,w);break;case 3:d(m,y,b,T),d(m+4,y,b,T),d(m+1024,y,b,T),d(m+1028,f,g,w)}}},createFillFun:Gl,emitter:Il,getDataZoom:Dl,getTrans:Nl,getWTable:Fl,imgData:Bl,interpolateNearest:jl,testJPGtransparency:Ul,testPNGtransparency:kl,tileW:Ll,wTables:Wl,whichTile:Ml,zoom2zoom:Rl});class Yl{constructor(e){var t,n,i,r,a,s,l,c,d,u,h;o(this,"dragging",!1),this.el=e.el,this.supportTouch=null===(t=e.supportTouch)||void 0===t||t,this.preventDefault=null===(n=e.preventDefault)||void 0===n||n,this.passiveListener=null===(i=e.passiveListener)||void 0===i||i,this.ondrag=null!==(r=e.ondrag)&&void 0!==r?r:this.ondrag,this.ondragstart=null!==(a=e.ondragstart)&&void 0!==a?a:this.ondragstart,this.ondragend=null!==(s=e.ondragend)&&void 0!==s?s:this.ondragend,this.bindedDrag=null!==(l=e.bindedDrag)&&void 0!==l?l:this._drag.bind(this),this.bindedEndDrag=null!==(c=e.bindedEndDrag)&&void 0!==c?c:this.endDrag.bind(this),this.bindedStart=null!==(d=e.bindedStart)&&void 0!==d?d:this.startDrag.bind(this),this.startDrag=null!==(u=e.startDrag)&&void 0!==u?u:this.startDrag,this.endDrag=null!==(h=e.endDrag)&&void 0!==h?h:this.endDrag,this.el.addEventListener("mousedown",this.bindedStart),this.supportTouch&&this.el.addEventListener("touchstart",this.bindedStart)}destroy(){this.el.removeEventListener("mousedown",this.bindedStart),this.supportTouch&&this.el.removeEventListener("touchstart",this.bindedStart)}startDrag(e){this.preventDefault&&e.preventDefault(),this.startXY=this.getXY(e),this.offsetX=this.el.offsetLeft,this.offsetY=this.el.offsetTop,this.dragging=!0,this.ondragstart&&this.ondragstart.call(this,this.startXY),window.addEventListener("mousemove",this.bindedDrag),window.addEventListener("mouseup",this.bindedEndDrag),this.supportTouch&&(window.addEventListener("touchmove",this.bindedDrag,this.passiveListener?void 0:{passive:!1}),window.addEventListener("touchend",this.bindedEndDrag),window.addEventListener("touchcancel",this.bindedEndDrag))}endDrag(e){window.removeEventListener("mousemove",this.bindedDrag),window.removeEventListener("touchmove",this.bindedDrag,this.passiveListener?void 0:{passive:!1}),window.removeEventListener("mouseup",this.bindedEndDrag),window.removeEventListener("touchend",this.bindedEndDrag),window.removeEventListener("touchcancel",this.bindedEndDrag),this.ondragend&&this.ondragend(e),this.dragging=!1}getXY(e){return Re(e)?[e.touches[0].pageX,e.touches[0].pageY]:[e.pageX,e.pageY]}_drag(e){if(this.ondrag){var t=this.getXY(e);this.ondrag(t[0]-this.startXY[0]+this.offsetX,t[1]-this.startXY[1]+this.offsetY,e)}}}var Zl=Object.freeze({__proto__:null,Drag:Yl});class ql{constructor(e){var t,n;this.el=e.el,this.onswipe=e.onswipe,this.threshold=null!==(t=e.threshold)&&void 0!==t?t:50,this.onswipestart=null!==(n=e.onswipestart)&&void 0!==n?n:this.onswipestart,this.el.addEventListener("touchstart",this.touchStart.bind(this)),this.el.addEventListener("touchmove",this.touchMove.bind(this)),this.el.addEventListener("touchend",this.touchEnd.bind(this))}touchStart(e){this.isSwipeValid=!0,this.direction=null,this.x=this.xStart=this.xThrottled=e.touches[0].clientX,this.y=this.yStart=this.yThrottled=e.touches[0].clientY,this.onswipestart(e)}touchMove(e){this.x=e.touches[0].clientX,this.y=e.touches[0].clientY;var t=this.x-this.xThrottled,n=this.y-this.yThrottled;if(!(ee(t,n)<this.threshold)){this.xThrottled=this.x,this.yThrottled=this.y;var i=null;Math.abs(n/t)<.2?i=t>0?"right":"left":Math.abs(t/n)<.2&&(i=n>0?"down":"up"),null!==i&&(null===this.direction||this.direction===i?this.direction=i:this.isSwipeValid=!1)}}touchEnd(e){if(null!==this.direction&&this.isSwipeValid){for(var t=this.x-this.xStart,n=this.y-this.yStart,i=ee(t,n),r=e.target;r&&r!==this.el;){if(r.dataset.ignoreSwipe)return;r=r.parentElement}this.onswipe(this.direction,i,e)}}onswipestart(e){}onswipe(e,t,n){}}var Xl=Object.freeze({__proto__:null,Swipe:ql});class Ql extends Yl{constructor(e){super(a(a({},e),{},{preventDefault:!1,passiveListener:!1})),o(this,"threshold",30),this.pluginEl=e.pluginEl,this.pluginName=e.pluginName,this.closeOnSwipeDown=e.closeOnSwipeDown,this.scrollEl=e.scrollEl;var t=this.scrollEl||Ie(".plugin__content",this.pluginEl);if(t){var n=!1;t.addEventListener("scroll",(()=>{t.scrollTop>20&&!n?(this.pluginEl.classList.add("show-header"),n=!0):t.scrollTop<21&&n&&(this.pluginEl.classList.remove("show-header"),n=!1)})),this.closeOnSwipeDown&&this.initCloseOnSwipeDown(t)}}ondrag(e,t,n){this.transformedY=this.startY+t,this.updatePosition(Math.max(0,this.transformedY)),Math.abs(this.throttledY-this.transformedY)>this.threshold&&(this.difference=this.transformedY-this.throttledY,this.throttledY=this.transformedY),n.preventDefault()}ondragend(){Math.abs(this.transformedY-this.startY)>this.threshold?(this.pluginEl.style.transition="",this.pluginEl.style.transform="",this.difference>0?this.closeOnSwipeDown||this.pluginEl.classList.contains("open-half")?Nn.emit("rqstClose",this.pluginName):this.pluginEl.classList.add("open-half"):this.pluginEl.classList.remove("open-half")):this.updatePosition(this.startY)}startDrag(e){super.startDrag(e);var{transform:t}=window.getComputedStyle(this.pluginEl),n=/matrix\(.+,\s*(\S+)\)/.exec(t);this.startY=n&&n[1]?+n[1]:0,this.transformedY=this.startY,this.throttledY=this.startY,this.difference=0,this.pluginEl.style.transition="none"}initCloseOnSwipeDown(e){var t;this.swipeHandler=new ql({el:this.pluginEl,threshold:80,onswipestart(){t=e.scrollTop<=0},onswipe:e=>{t&&"down"===e&&Nn.emit("rqstClose",this.pluginName)}})}updatePosition(e){this.pluginEl.style.transform="translate(0px,".concat(Math.floor(e),"px)")}}var Jl=Object.freeze({__proto__:null,BottomSlide:Ql});class $l{constructor(e){var t,n,i,r;this.initProperties(),this.pane=e.pane,this.ident=e.ident,this.langFiles=e.langFiles||[],this.location=null!==(t=e.location)&&void 0!==t?t:Ee(V,"".concat(this.ident,".js")),this.close=null!==(n=e.close)&&void 0!==n?n:this.close,this.paramsChanged=null!==(i=e.paramsChanged)&&void 0!==i?i:this.paramsChanged,this.redraw=null!==(r=e.redraw)&&void 0!==r?r:this.redraw,this.neverClose=e.neverClose,this.disableMobilePicker=e.disableMobilePicker}load(){return this.isLoaded?Promise.resolve(!0):this.loading?this.promise||Promise.resolve(!0):(this.loading=!0,new Promise(((e,t)=>{var n=["main",...this.langFiles].map((e=>un(e)));Promise.all(n).then((()=>{import(this.location).then((t=>{this.plugin=t,this.isLoaded=!0,this.loading=!1,e(!0)})).catch((e=>{console.error("Failed to load plugin: ".concat(this.ident),e),ct(),t(e)}))})).catch((e=>{this.loading=!1,xe("plugin","Failed to load language dependencies: ".concat(this.ident),e),t(e)}))})))}open(){return this.promise=this.load(),this.promise}close(e){}redraw(){}paramsChanged(){}initProperties(){this.loading=!1,this.isLoaded=!1}}o($l,"iAm","plugin");var Kl=Object.freeze({__proto__:null,Plugin:$l}),ec={high:null,low:null},tc=new Ge({ident:"singleclick"}),nc=(e,t)=>ec[t]=e,ic=(e,t)=>{ec[t]===e&&(ec[t]=null)},rc=e=>{var t=e.originalEvent&&e.originalEvent.target,n=t&&t.dataset;if(n&&n.poi){var i=n.poi;tc.emit("poi-".concat(i),t)}else{var r=(e=>({x:e.containerPoint.x,y:e.containerPoint.y,lat:e.latlng.lat,lon:e.latlng.lng,source:"singleclick"}))(e),a=ec.high||ec.low||"click";tc.emit(a,r)}},ac=Object.freeze({__proto__:null,opener:rc,register:nc,release:ic,singleclick:tc});class oc extends $l{constructor(e){var t,n,i,r,a,o,s,l,c,d,u,h,m,p,v,f;super(e),this.ident=e.ident,this.addMobileSlider=null!==(t=e.addMobileSlider)&&void 0!==t?t:this.addMobileSlider,this.closeOnSwipeDown=null!==(n=e.closeOnSwipeDown)&&void 0!==n?n:this.closeOnSwipeDown,this.closesOnSwipeRight=null!==(i=e.closesOnSwipeRight)&&void 0!==i?i:this.closesOnSwipeRight,this.logUsage=null===(r=e.logUsage)||void 0===r||r,this.noCloseOnBackButton=e.noCloseOnBackButton,this.interpolator=e.interpolator,this.title=e.title,this.useSEOurl=null!==(a=e.useSEOurl)&&void 0!==a&&a,this.router=null!==(o=e.router)&&void 0!==o?o:this.router,this.path=null!==(s=e.path)&&void 0!==s?s:"string"==typeof this.router?this.router:void 0,this.onRouteMatch=null!==(l=e.onRouteMatch)&&void 0!==l?l:this.onRouteMatch,this.displayURLAndTitle=null!==(c=e.displayURLAndTitle)&&void 0!==c?c:this.displayURLAndTitle,this.attachPoint=null!==(d=e.attachPoint)&&void 0!==d?d:this.attachPoint,this.className=(e.className||"")+(e.noHeader?" no-header":""),this.closeOnClick=null!==(u=e.closeOnClick)&&void 0!==u?u:this.closeOnClick,this.keyboard=null!==(h=e.keyboard)&&void 0!==h?h:this.keyboard,this.noAnimation=e.noAnimation,this.singleclickPriority=null!==(m=e.singleclickPriority)&&void 0!==m?m:void 0,this.close=null!==(p=e.close)&&void 0!==p?p:this.close,this.onopen=null!==(v=e.onopen)&&void 0!==v?v:this.onopen,this.beforeLoad=null!==(f=e.beforeLoad)&&void 0!==f?f:this.beforeLoad,this.cssID="".concat($l.iAm,"-css-").concat(this.ident)}open(){var{params:e,disableOpeningAnimation:t,qs:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.beforeLoad(e),this.closingRequested=!1,this.logUsage&&ti("plugin",this.ident);var i=()=>{this.closingRequested||(this.window||(this.window=this.createWindow()),this.isMounted||this.mount(),this.window.open({disableOpeningAnimation:t}),this.isOpen=!0,this.singleclickPriority&&nc(this.ident,this.singleclickPriority),setTimeout((()=>{Nn.emit("pluginOpened",this.ident)}),50),this.onopen(e,n))};return this.isOpen?(this.onopen(e,n),Promise.resolve()):this.isLoaded?(i(),Promise.resolve()):(this.loading&&this.promise||(this.promise=this.load(),this.promise.then(i)),this.promise)}close(e){var t;this.isOpen?null===(t=this.window)||void 0===t||t.close(e):this.loading&&(this.closingRequested=!0)}displayURLAndTitle(e){if(this.path){var t=this.title&&this.title in rn?rn[this.title]:this.title||null;t&&Xc(t),qc(this.ident,e,this.useSEOurl&&t?"-".concat(En(t)):void 0)}}onopen(e,t){if(H&&this.disableMobilePicker&&Nn.emit("rqstClose","picker-mobile"),this.displayURLAndTitle(e),"onopen"in this.plugin&&"function"==typeof this.plugin.onopen)try{this.plugin.onopen(e)}catch(e){console.error("onopen method of plugin ".concat(this.ident," failed:"),e)}}ondestroy(){if(this.isOpen=!1,this.path&&Qc(this.ident),this.singleclickPriority&&ic(this.ident,this.singleclickPriority),"ondestroy"in this.plugin&&"function"==typeof this.plugin.ondestroy)return this.plugin.ondestroy()}beforeLoad(){}onRouteMatch(e,t){var{groups:n}=e;return n||void 0}getPluginUrl(e){return this.path?this.path.replace(/\/:(\w+)(\?)?/g,((t,n,i)=>{var r=e&&e[n];return null==r?"":"/".concat("lat"===n||"lon"===n?oe(r):r)})):""}get node(){return this.window.node}createWindow(){return new Rn({bodyClass:"on".concat(this.ident),ident:this.ident,keyboard:this.keyboard,className:this.className,attachPoint:this.attachPoint,closeOnClick:this.closeOnClick,noAnimation:this.noAnimation,html:"",htmlID:"".concat($l.iAm,"-").concat(this.ident),onclose:()=>this.ondestroy(),onclosed:()=>this.unmount()})}getCss(){var{__css:e}=this.plugin;return e}initProperties(){super.initProperties(),this.addMobileSlider=!1,this.closeOnSwipeDown=!0,this.isMounted=!1}unmount(){var e;if(null===(e=this.node)||void 0===e||null===(e=e.parentNode)||void 0===e||e.removeChild(this.node),this.cssInserted){var t=Ie("#".concat(this.cssID));t&&document.head.removeChild(t),this.cssInserted=!1}this.isMounted=!1,Nn.emit("pluginClosed",this.ident)}mountCss(){var e=this.getCss();e&&!this.cssInserted&&(document.head.insertAdjacentHTML("beforeend",'<style id="'.concat(this.cssID,'">').concat(e,"</style>")),this.cssInserted=!0)}mount(){if(!this.plugin)throw new Error("Trying to mount, but plugin ".concat(this.ident," not loaded"));var{__html:e}=this.plugin;this.mountCss(),this.window.mount(e&&e.length>2?e:void 0),this.isMounted=!0,this.onmounted()}onmounted(){if(this.addMobileSlider&&F&&this.node&&(this.node.insertAdjacentHTML("beforeend",'<div class="sliding-x"></div>'),new Ql({el:Ie(".sliding-x",this.node),pluginEl:this.node,pluginName:this.ident,closeOnSwipeDown:this.closeOnSwipeDown})),this.closesOnSwipeRight&&this.node&&new ql({el:this.node,threshold:100,onswipe:e=>{"right"===e&&this.close()}}),"onmount"in this.plugin&&"function"==typeof this.plugin.onmount){var e,t,n={};(null!==(e=null===(t=this.node)||void 0===t?void 0:t.querySelectorAll("[data-ref]"))&&void 0!==e?e:[]).forEach((e=>{e.dataset.ref&&(n[e.dataset.ref]=e)}));try{this.plugin.onmount(this.node,n)}catch(e){this.unmount(),xe("WindowPlugin","Failed to mount ".concat(this.ident," plugin"),e)}}}}var sc=Object.freeze({__proto__:null,WindowPlugin:oc});class lc extends oc{constructor(e){super(e),this.needsPluginRoot=e.needsPluginRoot}onopen(e,t){if(this.displayURLAndTitle(e),this.svelteApp&&this.svelteApp.onopen)try{this.svelteApp.onopen(e)}catch(e){console.error("onopen method of plugin ".concat(this.ident," failed:"),e)}}ondestroy(){super.ondestroy(),this.svelteApp&&this.svelteApp.onclose&&this.svelteApp.onclose()}mount(){this.mountCss(),this.window.mount("");var e=this.node,t=Ie(".closing-x",this.node),{default:n}=this.plugin;this.svelteApp=new n({target:e,anchor:t,props:this.needsPluginRoot?{pluginRootElement:e}:{}}),this.isMounted=!0,Nn.emit("pluginMounted",this.ident),this.onmounted()}unmount(){if(this.node){var e;if(this.svelteApp)this.svelteApp.$destroy(),null===(e=this.node.parentNode)||void 0===e||e.removeChild(this.node),this.isMounted=!1,this.svelteApp=null;super.unmount()}else xe("SveltePlugin","Trying to unmount non existent DOM element ".concat(this.ident))}}var cc=Object.freeze({__proto__:null,SveltePlugin:lc});class dc extends lc{constructor(e){e.attachPoint='[data-plugin="bottom-controls-'.concat(H?"mobile":"desktop",'"]'),e.className=e.className||"plugin-bottom",e.noCloseOnBackButton=!0,e.neverClose=!0,e.pane="small-bottom",e.noAnimation=!0,super(e)}}class uc extends lc{constructor(e,t){var{desktopUI:n,title:i,mobileUI:r,desktopWidth:a,routerPath:s,listenToSingleclick:l,addToContextmenu:c,url:d}=t;super(e),o(this,"mobileConfig",{fullscreen:{className:"plugin-mobile-bottom-slide top-border",pane:"fullscreen-mobile",addMObileSliders:!0},small:{className:"plugin-mobile-bottom-small dark-content",attachPoint:'[data-plugin="bottom-below-controls-mobile"]',pane:"small-bottom-bottom"}}),o(this,"desktopConfig",{rhpane:{className:"plugin-rhpane top-border",pane:"rhpane"},embedded:{className:"fg-white bg-gray-dark rounded-box",attachPoint:'[data-plugin="above-rhbottom"]',pane:"embedded"}}),this.location=d;var u=F?this.mobileConfig[r]:this.desktopConfig[n],{className:h,attachPoint:m,pane:p,addMObileSliders:v}=u;this.className="".concat(h," dark-content"),this.pane=p,this.attachPoint=m||this.attachPoint,this.widthOfRhPane=a||400,this.title=i||"External plugin",this.logUsage=!0,this.router=s?Ee("/plugin",s):void 0,this.path=this.router,this.listenToSingleclick=l,this.singleclickPriority=l?"high":void 0,this.addToContextmenu=c,this.addMobileSlider=null!=v&&v,this.closeOnSwipeDown=!1,this.closesOnSwipeRight="rhpane"===this.pane&&G}open(e){var t=()=>super.open,n=this;return i((function*(){var{params:i,disableOpeningAnimation:r,qs:a}=e;try{var{data:o}=yield Dt("/plugins/list"),s=o.find((e=>e.name===n.ident));if(s&&"published"===s.status)return t().call(n,{params:i,disableOpeningAnimation:r,qs:a});if(s&&"unpublished"===s.status){new Rn({ident:"message-plugin-unpublished",className:"top-message bg-error",html:ue(rn.MSG_EXTERNAL_PLUGIN_UNPUBLISHED,{title:n.title})}).open();var l=it.get("installedPlugins").filter((e=>e.name!==n.ident));return it.set("installedPlugins",l),!1}return t().call(n,{params:i,disableOpeningAnimation:r,qs:a})}catch(e){return t().call(n,{params:i,disableOpeningAnimation:r,qs:a})}}))()}getCss(){var e=".on".concat(this.ident),t="#plugin-".concat(this.ident),n=this.widthOfRhPane;switch("".concat(F?"mobile":"desktop","-").concat(this.pane)){case"desktop-rhpane":return"\n".concat(t," {\n    width: ").concat(n,"px;\n}\n").concat(t," .plugin__content {\n    padding: 25px 25px 100px 25px;\n}\n").concat(e," .right-border {\n    right: ").concat(n,"px;\n}\n").concat(e," #logo-wrapper {\n    left: ").concat(n/2,"px;\n}\n").concat(e," #map-container {\n    transition-delay: .2s;\n    transform: translateX(-").concat(n/2,"px)\n}");case"desktop-embedded":return"\n".concat(t," {\n    position: relative;\n    pointer-events: auto;\n    width: 320px;\n    margin: 0 8px 15px 0;\n    padding-right: 40px;\n    max-height: 200px !important;\n}\n\n").concat(t," > .closing-x {\n    display: block;\n    background: none;\n    font-size: 20px;\n    top: -5px;\n    right: -3px;\n}");case"mobile-fullscreen-mobile":return"\n".concat(t," .plugin__content {\n    padding: 0 25px 100px 25px;\n}\n\n").concat(e," #map-container {\n    transform: scale(0.93) translateY(0);\n    transform: scale(0.93) translateY(var(--margin-top));\n    border-radius: 8px;\n    transform-origin: top center;\n}\n\n").concat(e," #search,\n").concat(e," #plugin-picker-mobile,\n").concat(e," #open-in-app,\n").concat(e," #logo-wrapper,\n").concat(e," #go-premium-mobile {\n    display: none !important;\n}");default:return"/* No CSS for this device and pane */"}}}var hc=Object.freeze({__proto__:null,ExternalSveltePlugin:uc}),mc=F?"plugin-mobile-bottom-slide top-border":"plugin-rhpane top-border",pc=F?"fullscreen-mobile":"rhpane";class vc extends lc{constructor(e){var t,n,i,r,a,o;e.className=(null!==(t=e.className)&&void 0!==t?t:mc)+(e.usesLightContent?"":" dark-content"),e.pane=null!==(n=e.pane)&&void 0!==n?n:pc,e.keyboard=null===(i=e.keyboard)||void 0===i||i,e.addMobileSlider=null===(r=e.addMobileSlider)||void 0===r||r,e.closeOnSwipeDown=null===(a=e.closeOnSwipeDown)||void 0===a||a,e.closesOnSwipeRight=null!==(o=e.closesOnSwipeRight)&&void 0!==o?o:G,super(e)}}var fc=Object.freeze({__proto__:null,SveltePanePlugin:vc});class gc extends oc{}var wc=Object.freeze({__proto__:null,TagPlugin:gc}),yc=Ie('[data-ref="mainSearchInput"]');var bc=e=>yc.value=e,Tc=()=>yc.classList.add("search-loading"),_c=()=>yc.classList.remove("search-loading");yc.onblur=()=>Nn.emit("rqstClose","search"),yc.onfocus=()=>Nn.emit("rqstOpen","search"),Nn.on("openSearch",(()=>yc.focus()));var Sc=()=>yc.placeholder=rn.SEARCH;Sc(),it.on("usedLang",Sc);var Ec,Pc=Object.freeze({__proto__:null,element:yc,get:()=>yc.value&&yc.value.trim()||"",hideLoader:_c,set:bc,showLoader:Tc}),Ac={"gl-particles":new $l({ident:"gl-particles"}),particles:new $l({ident:"particles"}),"legacy-tile-render":new $l({ident:"legacy-tile-render"}),isolines:new $l({ident:"isolines"}),accumulations:new dc({langFiles:["accumulations"],ident:"accumulations",logUsage:!1}),"day-switcher":new dc({ident:"day-switcher",logUsage:!1}),"cap-alerts":new dc({ident:"cap-alerts",singleclickPriority:H?void 0:"low",logUsage:!1}),radar:new lc({ident:"radar",title:"RADAR",logUsage:!1,router:"/radar",attachPoint:H?'[data-plugin="bottom-controls-mobile"]':'[data-plugin="bottom-controls-desktop"]',displayURLAndTitle:()=>{}}),satellite:new lc({ident:"satellite",title:"SATELLITE",logUsage:!1,router:"/satellite",attachPoint:H?'[data-plugin="bottom-controls-mobile"]':'[data-plugin="bottom-controls-desktop"]',displayURLAndTitle:()=>{}}),"radar-plus":new lc({ident:"radar-plus",title:"RADAR_PLUS",router:"/radarPlus",attachPoint:H?'[data-plugin="bottom-controls-mobile"]':'[data-plugin="bottom-controls-desktop"]',displayURLAndTitle:()=>{}}),detail:new lc({ident:"detail",className:H?"detail plugin-mobile-bottom-red":"detail plugin-desktop-bottom",pane:"bottom",attachPoint:H?d:'[data-plugin="bottom-pane"]',singleclickPriority:H?void 0:"high",disableMobilePicker:!0,beforeLoad(e){qr(e.product||"ecmwf",a({step:oi()&&it.get("detail1h")?1:3},e),{source:"detail"})},path:"/:lat/:lon/:model?/:display?",router:(Ec=Object.keys(jr).sort(((e,t)=>t.length-e.length)).join("|"),new RegExp("^\\/(?<lat>-?\\d+\\.\\d+)/(?<lon>-?\\d+\\.\\d+)(\\/(?<product>(".concat(Ec,")))?(\\/(?<display>(table|meteogram|airgram|waves|wind)))?"))),onRouteMatch:(e,t)=>{var n,{groups:i}=e,r=null==t||null===(n=t.model)||void 0===n?void 0:n.split(":")[1],o=r in jr?r:void 0,s=null!=t&&t.hrTimestamps?null==t?void 0:t.hrTimestamps.split(",").map((e=>+e*q)):void 0;return a(a({},i),{},{timestamps:s,name:null==t?void 0:t.name,moveToTimestamp:Boolean(null==t?void 0:t.moveToTimestamp),product:null!=o?o:i.product})}}),station:new lc({ident:"station",pane:"bottom",disableMobilePicker:!0,addMobileSlider:!!H,closeOnSwipeDown:!0,langFiles:["station"],className:H?"plugin-mobile-bottom-red":"plugin-desktop-bottom",attachPoint:H?d:'[data-plugin="bottom-pane"]',router:"/station/:id"}),"nearest-stations":new lc({ident:"nearest-stations",attachPoint:'[data-plugin="nearest-stations"]',className:"drop-down-window left boxshadow",pane:"nearest"}),"nearest-webcams":new lc({ident:"nearest-webcams",attachPoint:'[data-plugin="nearest-webcams"]',className:"boxshadow dark-content",langFiles:["webcams"],pane:"nearest"}),"nearest-airq":new lc({ident:"nearest-airq",className:"drop-down-window left boxshadow",attachPoint:'[data-plugin="nearest-airq"]',pane:"nearest"}),"nearest-webcams-mobile":new lc({ident:"nearest-webcams-mobile",className:"plugin-mobile-bottom-slide top-border auto-height dark-content",addMobileSlider:!0,noHeader:!0,closeOnSwipeDown:!0,langFiles:["webcams"],pane:"nearest"}),"rhpane-top":new lc({ident:"rhpane-top",neverClose:!0,logUsage:!1,attachPoint:'[data-plugin="rhpane-top"]'}),rhbottom:new lc({ident:"rhbottom",neverClose:!0,logUsage:!1,attachPoint:'[data-plugin="rhbottom"]'}),"fav-alert-menu":new lc({ident:"fav-alert-menu",className:"drop-down-window size-l",closeOnClick:!0,attachPoint:'[data-plugin="fav-alert-menu"]',langFiles:["favs"]}),"poi-libs":new gc({ident:"poi-libs"}),sounding:new vc({ident:"sounding",langFiles:["sounding"],title:"SOUNDING",disableMobilePicker:!0,addMobileSlider:!1,singleclickPriority:"high",className:F?"plugin-mobile-bottom-red":"plugin-rhpane top-border",pane:F?"bottom":"rhpane",router:"/sounding/:lat/:lon"}),radiosonde:new vc({ident:"radiosonde",langFiles:["sounding"],title:"RADIOSONDE",disableMobilePicker:!0,addMobileSlider:!0,className:F?"plugin-mobile-bottom-red":"plugin-rhpane top-border",pane:F?"bottom":"rhpane",router:"/radiosonde/:id"}),articles:new vc({ident:"articles",title:"MENU_NEWS",langFiles:["articles"],disableMobilePicker:!0,noHeader:!0,closeOnSwipeDown:!1,router:"/articles/:id?"}),screenshot:new lc({ident:"screenshot",router:e(/^\/screenshot(?:\/(\S+))?$/,{params:1})}),settings:new vc({ident:"settings",langFiles:["settings","notifications"],title:"MENU_SETTINGS",router:"/settings",useSEOurl:!0}),favs:new vc({ident:"favs",langFiles:["favs","notifications"],title:"MY_FAVS",closeOnSwipeDown:!1,router:"/favs",useSEOurl:!0}),"alerts-edit":new vc({ident:"alerts-edit",langFiles:["alerts","notifications","onboarding"],title:"EDIT_ALERT",router:"/alerts-edit/:id"}),alerts:new vc({ident:"alerts",langFiles:["notifications","alerts","favs"],title:"MY_ALERTS",closeOnSwipeDown:!1,router:/^\/alerts(?:\/\S+)?/,path:"/alerts",useSEOurl:!0}),colors:new vc({ident:"colors",title:"S_COLORS",closeOnSwipeDown:!1,router:"/colors"}),hurricanes:new vc({ident:"hurricanes",langFiles:["hurricanes"],title:"HURR_TRACKER",attachPoint:H?'[data-plugin="bottom-below-controls-mobile"]':d,className:H?"plugin-mobile-bottom-small":"plugin-rhpane top-border",pane:H?"small-bottom-bottom":"rhpane",disableMobilePicker:!0,useSEOurl:!0,router:"/hurricanes/:id?"}),debug:new vc({ident:"debug",router:"/debug"}),info:new vc({ident:"info",langFiles:["info","products"],title:"ABOUT_DATA",router:"/info"}),"cap-alert":new vc({ident:"cap-alert",title:"WX_WARNINGS",usesLightContent:!0,router:"/cap-alert/:lat/:lon"}),menu:new lc({ident:"menu",keyboard:!0,closesOnSwipeRight:!0,className:"plugin-rhpane dark-content top-border",langFiles:["menu","products"],pane:"rhpane",title:"MENU",router:/^\/(menu|overlays|tools|pois)$/,path:"/menu",useSEOurl:!0,beforeLoad(){$r()}}),airport:new vc({ident:"airport",langFiles:["webcams"],closeOnSwipeDown:!1,closesOnSwipeRight:!1,usesLightContent:!0,router:e(/^\/(?:airport\/)?([A-Za-z]\w\w\w)$/,{id:1}),path:"/airport/:id"}),share:new lc({ident:"share",noHeader:!0,className:F?"plugin-mobile-bottom-slide top-border auto-height fg-gray":"plugin-popup"}),multimodel:new lc({ident:"multimodel",className:F?"plugin-mobile-bottom-slide top-border":"",addMobileSlider:!0,router:"/multimodel/:lat/:lon"}),login:new lc({ident:"login",pane:"center",langFiles:["register"],className:F?"plugin-mobile-bottom-slide top-border":"plugin-popup",addMobileSlider:!!F,keyboard:!0,router:e(/^\/(register|login)$/,{reason:1}),path:"/:reason?"}),rplanner:new lc({ident:"rplanner",pane:"bottom",className:H?"detail plugin-mobile-bottom-red":"detail plugin-desktop-bottom",disableMobilePicker:!0,singleclickPriority:H?void 0:"high",attachPoint:H?d:'[data-plugin="bottom-pane"]',title:"RPLANNER",langFiles:["distance"],keyboard:!0,path:"/route-planner/:view?/:coords/:id?",router:e(/^\/(?:distance|route\x2Dplanner)\/?(vfr|ifr|car|boat|airgram|elevation)?\/?([^/]+)(?:\/id:(\S+))?/,{view:1,coords:2,id:3})}),upload:new lc({ident:"upload",router:H?e(/^\/(?:upload|uploader)\/(\S+)$/,{id:1}):"/upload/:id",path:"/upload/:id"}),subscription:new lc({ident:"subscription",className:F?"plugin-mobile-bottom-slide top-border":"plugin-popup",keyboard:!0,noHeader:!0,addMobileSlider:!!F,langFiles:["subscription"],pane:"center",title:"SUBSCRIPTION",onclosed(){Nn.emit("checkPendingSubscriptions")},router:"/subscription"}),"pending-subscription":new lc({ident:"pending-subscription",langFiles:["subscription"],className:"top-message bg-orange fg-white",router:"/pending-subscription"}),"delete-info":new vc({ident:"delete-info",router:"/delete-info"}),webcams:new vc({ident:"webcams",langFiles:["webcams"],title:"POI_CAMS",router:"/webcams",noHeader:!0,useSEOurl:!0}),"webcams-detail":new vc({ident:"webcams-detail",langFiles:["webcams"],beforeLoad(e){this.isLoaded||this.loading||Dt(Yr(e.id))},router:e(/\/webcams\/(\d+)$/,{id:1}),path:"/webcams/:id",noHeader:!0}),"webcams-add":new vc({ident:"webcams-add",langFiles:["webcams"],title:"D_MISSING_CAM",router:"/webcams/add"}),"webcams-edit":new vc({ident:"webcams-edit",langFiles:["webcams"],title:"Edit webcam",router:"/webcams/edit/:id"}),"webcams-remove":new vc({ident:"webcams-remove",langFiles:["webcams"],title:"Remove webcam",router:"/webcams/remove/:id"}),search:new lc({ident:"search",className:"waiting",keyboard:!0,pane:"top",attachPoint:'[data-plugin="search"]',beforeLoad(){null==yc||yc.focus()}}),consent:new lc({ident:"consent",className:F?"plugin-mobile-bottom-red":"plugin-popup",langFiles:["consent"],disableMobilePicker:!0}),"heatmaps-redirect":new gc({ident:"heatmaps-redirect",router:"/heatmaps/:id?"}),"map-selector":new lc({ident:"map-selector",attachPoint:H?'[data-plugin="bottom-below-controls-mobile"]':'[data-plugin="below-rhbottom"]',pane:"small-bottom-bottom",addMobileSlider:!1,closeOnSwipeDown:!1})};H?(Ac["picker-mobile"]=new lc({ident:"picker-mobile",className:"plugin-mobile-transparent-top",pane:"top"}),Ac["mobile-calendar"]=new dc({ident:"mobile-calendar",className:"plugin-bottom",logUsage:!1})):(Ac["progress-bar"]=new dc({ident:"progress-bar",className:"plugin-bottom dark-content",logUsage:!1}),Ac.picker=new gc({ident:"picker"})),H&&(Ac["mobile-ui"]=new lc({ident:"mobile-ui",neverClose:!0,logUsage:!1,attachPoint:'[data-plugin="mobile-ui"]'}),Ac.onboarding=new lc({ident:"onboarding",langFiles:["onboarding"],className:F?"plugin-mobile-bottom-slide dark-content":"plugin-popup dark-content"}),Ac["location-permission"]=new lc({ident:"location-permission",langFiles:["onboarding"],pane:"center",className:"dark-content"}),Ac.distance=new lc({ident:"distance",title:"MENU_DISTANCE",keyboard:!1,disableMobilePicker:!0,className:"plugin-mobile-transparent-top",langFiles:["distance"],pane:"top",router:"/distance/:coords"}),Ac["fav-layers"]=new lc({ident:"fav-layers",attachPoint:'[data-plugin="fav-layers"]',langFiles:["menu"],className:"size-m window transparent-window rh-bottom-pin dark-content",closeOnClick:"outside"})),H||(Ac.uploader=new vc({ident:"uploader",title:"Upload KML, GPX or geoJSON file",router:"/uploader/:id?"}),Ac.contextmenu=new lc({ident:"contextmenu",className:"drop-down-window",closeOnClick:!0,attachPoint:'[data-plugin="map-container"]',needsPluginRoot:!0}),Ac.globe=new gc({ident:"globe",title:"GLOBE",neverClose:!0,logUsage:!0,attachPoint:'[data-plugin="map-container"]'})),Ac["startup-weather"]=new lc({ident:"startup-weather",attachPoint:'[data-plugin="startup-weather"]',logUsage:!1}),Ac["startup-articles"]=new lc({ident:"startup-articles",className:"weather-box clickable",attachPoint:'[data-plugin="startup-articles"]',logUsage:!1}),Ac["startup-whats-new"]=new lc({ident:"startup-whats-new",pane:"rhpane",className:F?"plugin-mobile-bottom-slide top-border dark-content":"plugin-rhpane top-border dark-content",addMobileSlider:!0,logUsage:!1}),Ac["pin-to-homepage"]=new lc({ident:"pin-to-homepage",className:"weather-box",attachPoint:'[data-plugin="pin-to-homepage"]',logUsage:!0}),Ac["external-plugins"]=new vc({ident:"external-plugins",title:"Install Windy plugin",router:"/plugins"}),Ac["developer-mode"]=new lc({ident:"developer-mode",keyboard:!0,className:"top-border dark-content",title:"Developer mode",router:e(/^\/(dev|developer\x2Dmode)(?:\/(.+))?$/,{url:2}),path:"/developer-mode"}),(it.get("installedPlugins")||[]).forEach((e=>{var{name:t}=e;try{Ac[t]=new uc({ident:t},e)}catch(e){xe("plugins","Error adding installed external plugin ".concat(t," to our plugins hash"),e)}}));var Cc=Ie('meta[name="description"]')||{},Oc=Cc&&Cc.content,Ic=Ie('link[rel="canonical"]');var Rc,Lc,Nc=Date.now(),xc="",Dc=null,Mc=!1,Uc=null,kc=e=>"".concat(e).concat(Rc?"?"+Rc:""),Wc=()=>{var e=window.location.origin;var t="".concat(e).concat(xc&&xc.startsWith("/")?"":"/");return"".concat(t).concat(kc(xc))},Fc=()=>{if(""===xc){var e=it.get("overlay");return"wind"!==e&&Dc?"".concat(Dc?"".concat(Pn(it.get("usedLang")),"-").concat(En(Dc)):"","-").concat(e):""}return Uc?Ee("".concat(Pn(it.get("usedLang"))).concat(Sn(Uc)),xc):xc},Gc="",Hc="",zc=null,Bc=ce((()=>{if(Gc!==xc||Hc!==Rc||zc!==Uc){var e=Fc(),t={url:xc,search:Rc},n=kc(e);xc===Gc?window.history.replaceState(t,"",n):(window.history.pushState(t,"",kc(e)),Ic.href=Ee("https://www.windy.com",xc)),Gc=xc,Hc=Rc,zc=Uc}}),200);function jc(){if(Lc){var e,t,n,i,r=it.get("mapCoords"),a=[oe(r.lat),oe(r.lon),r.zoom],o=it.get("timestamp");Lc.path&&Math.abs(Nc-o)>65e6&&a.unshift(Lc.path.replace(/\//g,"-")),Al[Lc.overlay].hideFromURL||a.unshift(Lc.overlay),"surface"!==Lc.level&&a.unshift(Lc.level),!/^ecmwf/.test(Lc.product)&&(t=Lc.overlay,(null!==(n=null===(i=Jd[t])||void 0===i?void 0:i.length)&&void 0!==n?n:0)>1)&&a.unshift(Lc.product),it.get("isolinesOn")&&(e=it.get("isolinesType"))&&a.push("i:"+e),"empty"!==(e=it.get("pois"))&&a.push("p:"+e);var s=it.get("pickerLocation");s&&a.push("m:"+te(s)),Rc=a.join(","),Bc()}}var Vc=ce(jc,50);function Yc(){if(!Mc){var e=it.get("overlay"),t=Al[e].getName.call(Al[e]);"wind"===e?(Dc=null,document.title="Windy: ".concat(rn.TITLE)):(Dc=t,document.title="Windy: ".concat(t))}}var Zc=null,qc=(e,t,n)=>{var i=Ac[e];i&&(xc=i.getPluginUrl(t),Uc=n?"-".concat(n):null,Zc=e,Bc())},Xc=e=>{Dc=e,document.title="Windy: ".concat(e),Mc=!0},Qc=e=>{e&&e!==Zc||(Mc=!1,Cc&&(Cc.content=Oc),xc="",Uc=null,jc(),Yc(),Bc())};Nn.on("paramsChanged",(e=>{Lc=e,Vc()})),it.on("mapCoords",Vc),it.on("pickerLocation",Vc),it.on("pois",Vc),it.on("overlay",Yc),it.on("usedLang",Yc);var Jc=Object.freeze({__proto__:null,description:e=>{Cc.content=e},getURL:Wc,reset:Qc,resetTitle:Yc,setSearch:e=>{e&&(Rc=e,Bc())},setTitle:Xc,setUrl:qc});function $c(e){if(e&&/\S+=\S+/.test(e)){for(var t=(e=e.replace(/^\?/,"")).split("&"),n={},i=0;i<t.length;i++){var r=t[i].split("=");try{n[decodeURIComponent(r[0])]=decodeURIComponent(r[1]||"")}catch(e){}}return n}}function Kc(e,t,n){var i;if(e)for(var r of Object.keys(Ac)){var a=Ac[r];if(a&&"router"in a&&a.router){var{router:o,onRouteMatch:s}=a,l=(o instanceof RegExp?o:(i=void 0,i=o.split("/").map((e=>{if(e.startsWith(":")){var t=e.replace(/:([^?]+)\??/g,"$1");return e.endsWith("?")?"(?:/(?<".concat(t,">[^/]+))?"):"/(?<".concat(t,">[^/]+)")}return e?"/".concat(e):""})),new RegExp("^".concat(i.join(""),"$")))).exec(e);if(l){var c=s(l,n);return c&&(c.source=t),Nn.emit("rqstOpen",r,c),r}}}}function ed(e){if(e){for(var t,n={sharedCoords:null,pickerCoords:null,product:null,overlay:null},i=e.split(","),r=0;r<i.length;r++){t=i[r],/^-?\d+\.\d+$/.test(t)&&/^-?\d+\.\d+$/.test(i[r+1])&&/^\d+$/.test(i[r+2])&&(n.sharedCoords={lat:parseFloat(t),lon:parseFloat(i[r+1]),zoom:parseInt(i[r+2])},r+=2);var a=void 0;U.includes(t)&&(n.product=t),C.includes(t)&&(n.overlay=t),A.includes(t)&&it.set("level",t),(a=/^(\d\d\d\d)-(\d\d)-(\d\d)-(\d\d)$/.exec(t))&&it.set("timestamp",Date.UTC(+a[1],+a[2]-1,+a[3],+a[4],0,0,0)),(a=/^m:([a-zA-Z0-9]{5,})/.exec(t))&&(n.pickerCoords=ne(a[1])),(a=/^i:([a-z0-9]{2,})/.exec(t))&&(it.set("isolinesType",a[1]),it.set("isolinesOn",!0)),(a=/^p:([a-z0-9]{3,})/.exec(t))&&it.set("pois",a[1]),(a=/^d:picker/.exec(t))&&(n.pickerCoords=n.sharedCoords)}return n}}var td=function(){var e=e=>e.length>3?e:"",t=e=>{if(e){var t=e.replace(/(^|&)utm_[^&]+/gim,"");return/\S+=\S+/.test(t)||t.length>8?e:""}};try{return{path:e(en.purl),search:t(decodeURIComponent(window.location.search.substring(1).replace(/\?.*$/,"")))}}catch(t){return{path:e(en.purl||"")}}}(),nd=$c(td.search),id=ed(null===(t=td.search)||void 0===t?void 0:t.split("&")[0]);Nn.once("dependenciesResolved",(()=>{var e=Kc(td.path,"url",nd);Nn.emit("routerParsed",e||void 0),td.path&&!e?(Qc(),ti("404",en.startupUrl.replace(/^\//,""))):"/"!==en.startupUrl&&ti("startup",en.startupUrl.replace(/^\//,""))})),id&&id.pickerCoords&&id.sharedCoords&&Nn.once("redrawFinished",(()=>{Nn.emit("rqstOpen",H?"picker-mobile":"picker",a(a({},id.pickerCoords),{},{noEmit:!0}))}));var rd=null==id?void 0:id.sharedCoords,ad=C.includes(en.overlay)?en.overlay:null==id?void 0:id.overlay,od=null==id?void 0:id.product,sd=Object.freeze({__proto__:null,parseSearch:ed,parsedOverlay:ad,parsedProduct:od,resolveRoute:Kc,sharedCoords:rd});var ld=Object.freeze({__proto__:null,add:e=>{},checkError:function(e){},close:e=>{},getUnresolvedErrors:()=>[],resolve:e=>{},resolveCategory:e=>{}}),cd=()=>null,dd=()=>{var e=it.get("ipLocation"),t=it.get("gpsLocation");return e&&t?e.ts>t.ts?e:t:t||(e||{lat:0,lon:-1*(new Date).getTimezoneOffset()/4,cc:"us",source:"fallback",zoom:3,name:"",ts:Date.now()})},ud=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise(function(){var t=i((function*(t,n){var r,a,o={enableHighAccuracy:e.enableHighAccuracy||"ios"!==y,timeout:e.timeout||12e3};e.doNotShowSearchGPSMessage||(a=new Rn({ident:"message-location",className:"top-message bg-ok",html:rn.GETTING_LOCATION}).open(),r=Date.now());var s=function(){var e=i((function*(){if(r){var e=Date.now()-r,t=Math.max(3e3-e,0);t>0&&(yield We(t)),a.close()}}));return function(){return e.apply(this,arguments)}}(),l=e=>{s();var n={lat:e.coords.latitude,lon:e.coords.longitude,source:"gps",ts:Date.now()};it.set("gpsLocation",n),Nn.emit("newLocation",n),t(n)},c=function(){var r=i((function*(i,r){var{doNotShowFailureMessage:a,getMeFallbackGps:o}=e;if(console.error(r),o){var l=it.get("gpsLocation");l&&l.ts>Date.now()-X?t(l):n(r)}else n(r);yield s(),a||new Rn({ident:"message-location",className:"top-message bg-error",timeout:i?7e3:5e3,html:i?rn.GETTING_LOCATION_ERROR:rn.GETTING_LOCATION_TIMEOUT}).open()}));return function(e,t){return r.apply(this,arguments)}}(),d=cd();if(d){if(!it.get("locationPermissionsGranted")){if(!it.get("onboardingFinished"))return;var u=()=>{},h=new Promise((e=>{u=e}));if(Nn.emit("rqstOpen","location-permission",{resolve:u}),!1===(yield h))return}d.getCurrentPosition(o).then(l).catch((e=>{e.message,c(!0,e)}))}else navigator.geolocation.getCurrentPosition(l,(e=>c(e.code===e.PERMISSION_DENIED,e)),o)}));return function(e,n){return t.apply(this,arguments)}}())},hd=(e,t)=>"".concat(parseFloat(e).toFixed(2),", ").concat(parseFloat(t).toFixed(2)),md=(e,t,n,i,r)=>{n&&(n=n.toLowerCase(),it.set("country",n),it.setDefault("hourFormat",/us|uk|ph|ca|au|nz|in|eg|sa|co|pk|my/.test(n)?"12h":"24h"),it.set("isImperial",/us|my|lr/.test(n)));var a={ts:Date.now(),source:r,lat:parseFloat(e),lon:parseFloat(t),name:i||hd(e,t)};it.set("ipLocation",a),Nn.emit("newLocation",a)};try{var pd,vd=Ie('meta[name="geoip"]');if(vd&&vd.content&&(pd=vd.content.split(","))){var[,fd,gd,wd,yd]=pd;md(fd,gd,wd,yd,"meta")}else Dt("/services/umisteni").then((e=>{var{data:t}=e;t&&t.ll&&t.ll.length&&md(t.ll[0],t.ll[1],t.country,t.city,"api")})).catch((e=>{xe("geolocation","Unable to load/parse geoloc JSON",e)}))}catch(e){xe("geolocation","Module initialization failed",e)}var bd=()=>new Promise((e=>{var t=Date.now(),n=it.get("startUp"),i=it.get("homeLocation"),r=it.get("startUpLastPosition");if("last"===n&&r)e(a(a({},r),{},{ts:t,source:"last"}));else if("location"===n&&i)e(i);else if("ip"===n){var o=it.get("ipLocation")||dd();"fallback"===o.source||t-o.ts>12*q?Nn.once("newLocation",e):e(o)}else{var s=it.get("gpsLocation");s&&"gps"===s.source&&t-s.ts<9e5?e(s):ud({doNotShowFailureMessage:!0,doNotShowSearchGPSMessage:!0}).then(e)}}));function Td(){return(Td=i((function*(){var e=cd();return"granted"===(e?(yield e.requestPermissions()).location:(yield navigator.permissions.query({name:"geolocation"})).state)}))).apply(this,arguments)}var _d=Object.freeze({__proto__:null,getFallbackName:hd,getGPSlocation:ud,getHomeLocation:bd,getMyLatestPos:dd,requestLocationPermissions:function(){return Td.apply(this,arguments)}}),Sd=L.TileLayer.extend({seaColorL:128,getTempCtx(){if(!this.ctx){var e=document.createElement("canvas");this.ctx=e.getContext("2d",{desynchronized:!0,willReadFrequently:!0})}return this.ctx},createTile(e,t){return this.createImageTile(e,t)},createImageTile(e,t){var n=this,i=this.getTempCtx(),r=document.createElement("img");r.setAttribute("role","presentation");var a=document.createElement("img");return a.onload=function(){var e=a.width,o=document.createElement("canvas");o.width=e,o.height=e;var s=o.getContext("2d");if(s&&i){i.canvas.width=e,i.canvas.height=e,i.drawImage(a,0,0);var l=i.getImageData(0,0,e,e),c=s.createImageData(e,e),d=l.data,u=c.data;d.length;var h,m,p=(e,t)=>(e=Math.min(Math.max(0,e),255),t=Math.min(Math.max(0,t),255),d[(t<<10)+(e<<2)+3]),v=1200,f=1024,g=255,w=7,y=w+f,b=y+f,T=1028;for(m=1;m<g;m++){var _=d[y-4],S=d[y],E=d[y+=4],P=_+S+E;for(h=1;h<g;h++){var A=P+d[w]+d[b];u[T++]=n.seaColorL,u[T++]=n.seaColorL,u[T++]=n.seaColorL,u[T++]=A>v?0:g,w+=4,b+=4,P-=_,_=S,S=E,P+=E=d[y+=4]}T+=8,w+=8,y+=4,b+=8}for(T=0,h=0;h<256;h++){var C=p(h-1,0)+(p(h,0)<<1)+p(h+1,0)+p(h,1);u[T++]=n.seaColorL,u[T++]=n.seaColorL,u[T++]=n.seaColorL,u[T++]=C>v?0:g}for(T=261120,h=0;h<256;h++){var O=p(h-1,g)+(p(h,g)<<1)+p(h+1,g)+p(h,254);u[T++]=n.seaColorL,u[T++]=n.seaColorL,u[T++]=n.seaColorL,u[T++]=O>v?0:g}for(T=f,m=1;m<g;m++){var I=p(0,m-1)+(p(0,m)<<1)+p(1,m)+p(0,m+1);u[T++]=n.seaColorL,u[T++]=n.seaColorL,u[T++]=n.seaColorL,u[T++]=I>v?0:g,T+=1020}for(T=2044,m=1;m<g;m++){var R=p(g,m-1)+p(254,m)+(p(g,m)<<1)+p(g,m+1);u[T++]=n.seaColorL,u[T++]=n.seaColorL,u[T++]=n.seaColorL,u[T++]=R>v?0:g,T+=1020}i.putImageData(c,0,0),s.putImageData(c,0,0),r.src=o.toDataURL()}t(void 0,r)},a.onerror=function(e){n._tileOnError(t,r,e)},a.crossOrigin="",a.src=this.getTileUrl(e),r},createCanvasTile(e,t){var n=this,i=this.getTempCtx(),r=document.createElement("canvas");r.setAttribute("role","presentation");var a=document.createElement("img");return a.onload=function(){var e=r.getContext("2d");if(e&&i){var o=a.width;r.width=o,r.height=o,i.canvas.width=o,i.canvas.height=o,i.drawImage(a,0,0);for(var s=i.getImageData(0,0,o,o),l=e.createImageData(o,o),c=s.data,d=l.data,u=c.length,h=0;h<u;)d[h++]=n.seaColorL,d[h++]=n.seaColorL,d[h++]=n.seaColorL,d[h]=255-c[h++];e.putImageData(l,0,0)}t(void 0,r)},a.onerror=function(e){n._tileOnError(t,r,e)},a.crossOrigin="",a.src=this.getTileUrl(e),r}}),Ed=L.TileLayerMulti.extend({initialize:function(e,t){var n;L.TileLayer.prototype.initialize.call(this,void 0,t);var i=null!==(n=this.options.minZoom)&&void 0!==n?n:3;for(var r in this._tileDefsBase={},this._tileDefsPatch={},this._patch={},e){var a=parseInt(r,10),o=e[a],s=null,l=null;for(o.patchUrl&&Array.isArray(o.patch)&&(s=this._fixTileDef({url:o.patchUrl}),l=o.patch),o=this._fixTileDef(o);i<=a;i++)this._tileDefsBase[i]=o,l&&(this._tileDefsPatch[i]=s,this._patch[i]=this._convertPatchToZoom(l,i))}this._tileDefs=this._tileDefsBase},getTileUrl:function(e){var t=this._getZoomForUrl(),n=this._patch&&this._patch[t];return this._tileDefs=this._tileDefsBase,n&&e.x>=n[0]&&e.y>=n[1]&&e.x<n[2]&&e.y<n[3]&&(this._tileDefs=this._tileDefsPatch),L.TileLayerMulti.prototype.getTileUrl.call(this,e)},_convertPatchToZoom:function(e,t){var n=t-e[4];if(0===n)return e;for(var i=[],r=0;r<4;r++)n>0?i.push(e[r]<<n):i.push(e[r]>>-n);return i.push(t),i}}),Pd=null,Ad=e=>{var t=z?"-retina":"";return{graymap:"".concat(E,"/tiles/v10.0/darkmap").concat(t,"/{z}/{x}/{y}.png"),simplemap:"".concat(E,"/tiles/v10.0/simple").concat(t,"/{z}/{x}/{y}.png"),landmaskmap:"".concat(E,"/tiles/v9.0/grayland/{z}/{x}/{y}.png"),graymapPatch5:"".concat(E,"/tiles/v10.0/").concat(e,"/darkmap").concat(t,"/{z}/{x}/{y}.png"),graymapPatch11:"".concat(E,"/tiles/v10.0/").concat(e,"/darkmap").concat(t,"/{z}/{x}/{y}.png"),simplemapPatch5:"".concat(E,"/tiles/v10.0/").concat(e,"/simple").concat(t,"/{z}/{x}/{y}.png"),simplemapPatch9:"".concat(E,"/tiles/v10.0/").concat(e,"/simple").concat(t,"/{z}/{x}/{y}.png"),sznmap:"".concat(E,"/v1/maptiles/outdoor/").concat(t?"256%402x":"256","/{z}/{x}/{y}/?lang=en"),winter:"".concat(E,"/v1/maptiles/winter/256/{z}/{x}/{y}/?lang=en"),satLocal:"".concat(E,"/tiles/orto/v1.0/{z}/{z}-{x}-{y}.jpg"),sat:"".concat(S,"/maptile/2.1/maptile/newest/satellite.day/{z}/{x}/{y}/256/jpg")}};function Cd(e){var t=it.get("map"),n=it.get("overlay");if("leaflet"===it.get("mapLibrary")&&"topoMap"!==n){var i="basemap-layer",r=e.getMaxZoom(),a=e.getMinZoom(),o=null,s=null;"hi"!==it.get("usedLang")&&"in"!==it.get("country")||(o="in",s=[44,24,50,28,6]);var l,c=Ad(o);l="sat"===t?{13:{url:c.satLocal},[r]:{url:c.sat,subdomains:"1234"}}:{[r]:{url:c[t]||c.sznmap}},s?(l[11]={url:c.graymap,patchUrl:c.graymapPatch11,patch:s},"satellite"===n?(l[5]={url:c.simplemapPatch5},l[9]={url:c.simplemap,patchUrl:c.simplemapPatch9,patch:s}):l[5]={url:c.graymapPatch5}):(l[11]={url:c.graymap},"satellite"===n&&(l[9]={url:c.simplemap})),Od(e);var d=o?Ed:L.TileLayerMulti;Pd=new d(l,{detectRetina:!1,minZoom:a,maxZoom:r,updateWhenIdle:!!H,updateWhenZooming:!1,className:i,keepBuffer:H?1:4}),document.body.dataset.map=t,Pd.addTo(e)}}function Od(e){Pd&&(e.removeLayer(Pd),Pd=null)}var Id=Object.freeze({__proto__:null,addOrUpdateBasemap:Cd,mapTilesRecord:Ad,removeBasemap:Od});L.GridLayer.prototype.options.zIndex=void 0,L.Icon.Default.prototype.options.imagePath="https://www.windy.com/img/leaflet/";var Rd,Ld=0,Nd=it.get("startUp");if(rd)Rd=rd;else switch(Nd){case"last":Rd=it.get("startUpLastPosition")||dd();break;case"location":Rd=it.get("homeLocation")||dd();break;case"ip":Rd=it.get("ipLocation")||dd();break;case"gps":Rd=it.get("gpsLocation")||dd();break;default:Rd=dd()}var xd=e=>"vn"===e||"in"===e,Dd=it.get("country"),Md=xd(Dd)?11:16,Ud=3,kd={zoomControl:!1,keyboard:!1,worldCopyJump:!0,zoomAnimationThreshold:3,fadeAnimation:!1,center:[+Rd.lat,+Rd.lon],zoom:"zoom"in Rd?Rd.zoom:5,minZoom:Ud,maxZoom:Md,maxBounds:[[-90,-720],[90,720]]},Wd=new L.Map("leaflet-map",kd),Fd={icon:L.divIcon({className:"icon-dot",html:'<div class="pulsating-icon"></div>',iconSize:[10,10],iconAnchor:[5,5]}),pulsatingIcon:L.divIcon({className:"icon-dot",html:'<div class="pulsating-icon repeat"></div>',iconSize:[10,10],iconAnchor:[5,5]}),myLocationIcon:L.divIcon({className:"icon-dot mylocation",html:'<div class="pulsating-icon repeat"></div>',iconSize:[10,10],iconAnchor:[5,5]}),webcamIcon:L.divIcon({className:"iconfont icon-webcam",iconSize:[10,10],iconAnchor:[5,5]}),pulsatingWebcamIcon:L.divIcon({className:"iconfont icon-webcam",html:'<div class="pulsating-icon repeat"></div>',iconSize:[10,10],iconAnchor:[5,5]})};function Gd(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("maplibre"!==it.get("mapLibrary")){var n=e.zoom?ge(e.zoom,Ud,20):Wd.getZoom();if(e.paddingTop||e.paddingLeft){var i=e.paddingTop||0,r=e.paddingLeft||0,a=Wd.project([e.lat,e.lon],n).subtract([r/2,i/2]),o=Wd.unproject(a,n);Wd.setView(o,n,{animate:t})}else Wd.setView([e.lat,e.lon],n,{animate:t})}else Nn.emit("maplibre-centerMap",e)}function Hd(e,t,n){if("maplibre"!==it.get("mapLibrary")){var i=Wd.getZoom(),r=Wd.getSize().y,a=Wd.project([t,n],i).subtract([0,e-r/2]),o=Wd.unproject(a,i);Wd.setView(o,i,{animate:!1})}else Nn.emit("maplibre-panToOffset",e,t,n)}"source"in Rd&&"fallback"===Rd.source&&Nn.once("newLocation",(e=>{e.zoom=5,Gd(e,!0)}));var zd,Bd,jd=null;function Vd(e){if(e&&!jd){var t=ke("graticule20.js");Ce(t).then((()=>{jd=new L.LatLngGraticule({color:"#4d4d4d"}).addTo(Wd)}))}!e&&jd&&(Wd.removeLayer(jd),jd=null)}function Yd(){var e=Wd.getCenter(),t=Math.round(Wd.getZoom());it.set("mapCoords",{source:"maps",lat:e.lat,lon:e.wrap().lng,zoom:t}),t!==Ld&&(c(/zoom\d+/,"zoom".concat(t)),Ld=t)}var{landmaskmap:Zd}=Ad();Yd(),Cd(Wd),Vd(it.get("graticule")),Wd.on("moveend",Yd),Wd.on("singleclick",rc),Nn.on("leaflet-zoomIn",Wd.zoomIn,Wd),Nn.on("leaflet-zoomOut",Wd.zoomOut,Wd),it.on("map",(()=>Cd(Wd))),it.on("graticule",Vd),Il.on("toggleSeaMask",(function(e){e&&!zd?(zd=L.tileLayer(Zd,{minZoom:3,maxZoom:11,updateWhenIdle:!!H,updateWhenZooming:!1,keepBuffer:H?1:4}).addTo(Wd)).getContainer().classList.add("sea-mask-layer"):!e&&zd&&(Wd.removeLayer(zd),zd=null)})),Il.on("toggleLandMask",(function(e){var t;e&&!Bd?null===(t=Bd=new Sd(Zd,{minZoom:3,maxZoom:11,updateWhenIdle:!!H,updateWhenZooming:!1,keepBuffer:H?1:4}).addTo(Wd))||void 0===t||null===(t=t.getContainer())||void 0===t||t.classList.add("land-mask-layer"):!e&&Bd&&(Wd.removeLayer(Bd),Bd=null)})),Wd.on("contextmenu",(e=>{var{containerPoint:t}=e,n=e.latlng instanceof L.LatLng?e.latlng.wrap():e.latlng,{lat:i,lng:r}=n;H||Nn.emit("rqstOpen","contextmenu",{lat:i,lon:r,containerPoint:t})})),it.on("usedLang",(()=>Cd(Wd))),it.once("country",(e=>{xd(e)&&(Wd.setMaxZoom(11),Cd(Wd))}));var qd=Ad;it.on("mapLibrary",(e=>{"leaflet"===e?Cd(Wd):Od(Wd)}));var Xd=Object.freeze({__proto__:null,centerMap:Gd,ensurePointVisibleY:function(e,t,n){if("maplibre"!==it.get("mapLibrary")){var i=Wd.latLngToContainerPoint([e,t]).y,r=Wd.getSize();i>r.y-n&&Wd.panBy([0,i-(r.y-n)])}else Nn.emit("maplibre-ensurePointVisibleY",e,t,n)},getMapTiles:qd,isGlobeActive:()=>"globe"===it.get("mapLibrary"),map:Wd,mapLibre:{wrapper:null},markers:Fd,panToOffset:Hd}),Qd=Ie('meta[name="model"]');Qd&&Qd.content&&I.includes(Qd.content)&&"ecmwf"!==Qd.content&&it.set("product",Qd.content);var Jd={},$d={},Kd=Object.keys(jr);Object.keys(is).forEach((e=>{for(var t=[],n=0;n<Kd.length;n++)jr[Kd[n]].overlays.includes(e)&&t.push(Kd[n]);Jd[e]=t})),Object.keys(Al).forEach((e=>{for(var t=[],n=0;n<Kd.length;n++)jr[Kd[n]].overlays.includes(e)&&t.push(Kd[n]);$d[e]=t}));var eu=e=>(e.includes("iconD2")&&(e=e.filter((e=>"icon"!==e&&"iconEu"!==e))),e.includes("iconEu")&&(e=e.filter((e=>"icon"!==e))),e),tu=(e,t)=>{for(var n=t?D:O,i=[],r=0;r<n.length;r++){var a=n[r],o=jr[a];(t&&o.pointIsInBounds.call(o,e)||!t&&o.boundsAreInViewport.call(o,Wd))&&i.push(a)}return i},nu=()=>{var e=it.get("mapCoords"),t=tu(e).concat(I);if(it.set("visibleProducts",t)&&!t.includes(it.get("product"))){var n=it.get("preferredProduct"),i=it.get("overlay");if(jr[n].overlays.includes(i))it.set("product",n);else{var r=t.filter((e=>jr[e].overlays.includes(i)));r.length&&it.set("product",r[0])}}};Nn.once("paramsChanged",(()=>{nu(),it.on("mapCoords",nu)}));var iu=(e,t)=>{var n=Jd[e];var i=it.get("preferredProduct"),r=jr[t];if(2===n.length&&n.includes("cams")){var a=it.get("mapCoords");return jr.camsEu.pointIsInBounds(a)&&n.includes("camsEu")?"camsEu":"cams"}if(n.includes(t))return t;if(n.includes("iconD2")&&"iconEu"===i){var o=it.get("mapCoords");if(jr.iconD2.pointIsInBounds(o))return"iconD2"}if(n.includes("iconEu")&&"icon"===i){var s=it.get("mapCoords");if(jr.iconEu.pointIsInBounds(s))return"iconEu"}if(n.includes(r.preferredAirProduct))return r.preferredAirProduct;if(n.includes(r.preferredWaveProduct)){if("iconEuWaves"===r.preferredWaveProduct){var l=it.get("mapCoords");if(jr.iconEuWaves.pointIsInBounds(l))return"iconEuWaves"}return r.preferredWaveProduct}if(n.includes(i))return i;if(n.length>1){var c=it.get("mapCoords"),d=n.filter((e=>jr[e].pointIsInBounds.call(jr[e],c)))[0];if(d)return d}return n[0]},ru=e=>{var t=tu(e,!0).filter((e=>!N.includes(e)));return[...M,...t]},au=Object.freeze({__proto__:null,betterProducts:tu,dedupeIcon:eu,getAllPointProducts:ru,getIconModel:(e,t)=>"icon"===e&&t.includes("iconEu")?"iconEu":"iconEu"===e&&t.includes("icon")?"icon":null,getPointProducts:e=>eu(ru(e)),getProduct:iu,layer2product:Jd,overlay2product:$d}),ou=tt.get("storedSettings")||0,su=e=>"settings_".concat(e),lu=e=>"".concat(su(e),"_ts"),cu=e=>Boolean(e in Je&&"object"==typeof Je[e]&&Je[e].sync),du=()=>{var e,t={},n=0;for(var i in Je){var r=i;if(cu(r)){var a=+(Je[e=r].update||tt.get("settings_".concat(e,"_ts"))||0);a>ou&&(t[su(r)]=it.get(r,{forceGet:!0}),t[lu(r)]=a,n=Math.max(n,a))}}return{toStore:t,updated:n}};function uu(){return hu.apply(this,arguments)}function hu(){return(hu=i((function*(){var{toStore:e,updated:t}=du();if(!t)return!0;try{var n={version:4,data:e,storeTs:t},{status:i}=yield Ut("/users/settings",{data:n});return i<300?(ou=t,tt.put("storedSettings",t),!0):(xe("settings","Cant save settings to the cloud. Status code ".concat(i)),!1)}catch(e){return xe("settings","Cant save settings to the cloud",e),!1}}))).apply(this,arguments)}function mu(){return pu.apply(this,arguments)}function pu(){return(pu=i((function*(){try{var{status:e,data:t}=yield Dt("/users/settings?storeTs=".concat(ou));return(tt.get("lastSyncableUpdatedItem")||0)>ou&&uu(),304===e||204===e?!1:(t&&t.data&&t.version>1&&(!function(e){for(var t in Je){var n=t;if(cu(n)&&su(n)in e){var i=lu(n),r=e[i],a=tt.get(i);if(!a||a<r){var o=e[su(n)];null===o?it.remove(n,{doNotCheckValidity:!0,doNotSaveToCloud:!0}):it.set(n,o,{update:r,doNotSaveToCloud:!0})}}}}(t.data),t.storeTs>ou&&(ou=t.storeTs,tt.put("storedSettings",t.storeTs))),!0)}catch(e){return xe("settings","Cant load/merge settings from cloud",e),!1}}))).apply(this,arguments)}var vu=ce(uu,2e3);it.on("_cloudSync",vu);var fu,gu,wu,yu,bu,Tu=Object.freeze({__proto__:null,loadAndMergeSettingFromCloud:mu,storeSettings:uu}),_u=function(){var e=i((function*(e){it.get("user")&&(yield kt("/users/v3/devices/".concat(e.deviceID),{data:e}))}));return function(t){return e.apply(this,arguments)}}(),Su=()=>{var{width:e,height:t}=window.screen,n=it.get("country"),i=it.get("subscription");return{deviceID:ft(),platform:y,target:w,version:g,cc:n,subscription:i,screen:{width:e,height:t,devicePixelRatio:window.devicePixelRatio}}},Eu=function(){var e=i((function*(){var e=Su();e.deactivated=!0,yield _u(e),it.remove("pushNotificationsReady")}));return function(){return e.apply(this,arguments)}}(),Pu=function(){var e=i((function*(e){var t=Su();yield _u(t),e&&it.set("pushNotificationsReady",!0)}));return function(t){return e.apply(this,arguments)}}(),Au=Object.freeze({__proto__:null,deactivateCurrentDevice:Eu,saveCurrentDevice:Pu}),Cu="/users/v4/alerts",Ou=!1;setInterval((()=>{Ou=!1}),30*Z),function(e){e.Triggered="triggered",e.Normal="normal",e.Suspended="suspended"}(fu||(fu={})),function(e){e.Cloudiness="cloudiness",e.FreshSnow="freshSnow",e.Rainfall="rainfall",e.Swell="swell",e.Temperature="temperature",e.Time="time",e.Wind="wind"}(gu||(gu={})),function(e){e.N="N",e.NE="NE",e.E="E",e.SE="SE",e.S="S",e.SW="SW",e.W="W",e.NW="NW"}(wu||(wu={})),function(e){e.Monday="mon",e.Tuesday="tue",e.Wednesday="wed",e.Thursday="thu",e.Friday="fri",e.Saturday="sat",e.Sunday="sun"}(yu||(yu={})),function(e){e.SkyClear="SKC",e.Few="FEW",e.Scattered="SCT",e.Broken="BKN",e.Overcast="OVC"}(bu||(bu={}));var Iu=()=>Nn.emit("alertChanged");function Ru(){return Ru=i((function*(e){var{data:t}=yield Dt("".concat(Cu,"/").concat(e,"/timestamps"),{ttl:Z});return t})),Ru.apply(this,arguments)}function Lu(){return Lu=i((function*(e){var t,{data:n}=yield Dt("/users/v3/alerts/".concat(e),{cache:!1});return a(a({},n),{},{id:null!==(t=n.id)&&void 0!==t?t:e})})),Lu.apply(this,arguments)}function Nu(){return xu.apply(this,arguments)}function xu(){return(xu=i((function*(){yield yi.loadFromCloud(),Ou=!0,Iu()}))).apply(this,arguments)}function Du(){return Mu.apply(this,arguments)}function Mu(){return(Mu=i((function*(){return Ou||(yield Nu()),yield yi.getAll()}))).apply(this,arguments)}function Uu(){return(Uu=i((function*(e){return Ou||(yield Nu()),yield yi.get(e)}))).apply(this,arguments)}function ku(){return ku=i((function*(e){yield yi.add(e),Iu()})),ku.apply(this,arguments)}function Wu(){return Wu=i((function*(e){return yield yi.put(e.id,e),Iu(),e})),Wu.apply(this,arguments)}function Fu(){return(Fu=i((function*(e){yield yi.remove(e),Iu()}))).apply(this,arguments)}function Gu(){return Gu=i((function*(e){return(yield Hu(e)).at(0)})),Gu.apply(this,arguments)}function Hu(e){return zu.apply(this,arguments)}function zu(){return zu=i((function*(e){var t;return null!==(t=(yield Du()).filter((t=>fe(t,e))))&&void 0!==t?t:[]})),zu.apply(this,arguments)}function Bu(){return ju.apply(this,arguments)}function ju(){return(ju=i((function*(){return(yield Du()).length>0}))).apply(this,arguments)}var Vu=Object.freeze({__proto__:null,get AlertConditionType(){return gu},get AlertStatus(){return fu},get CloudCoverage(){return bu},get Direction(){return wu},get Weekday(){return yu},add:function(e){var t=a({action:"new"},e);th()?Nn.emit("rqstOpen","alerts-edit",t):rh({action:"alerts-edit",params:t})},createAlert:function(e){return ku.apply(this,arguments)},deleteAlert:function(e){return Fu.apply(this,arguments)},getAlert:function(e){return Uu.apply(this,arguments)},getAlertTimestamps:function(e){return Ru.apply(this,arguments)},getAlertV3:function(e){return Lu.apply(this,arguments)},getAlerts:Du,getNearAlert:function(e){return Gu.apply(this,arguments)},getNearAlerts:Hu,updateAlert:function(e){return Wu.apply(this,arguments)},userHasAnyAlerts:Bu}),Yu=function(){var e=i((function*(){return null}));return function(){return e.apply(this,arguments)}}(),Zu=Object.freeze({__proto__:null,registerDevice:Yu}),qu=()=>{var e=it.get("consent"),t=e?(Date.now()-e.timestamp)/X:0,n=e&&!1===e.explicit,i=e&&(!e.analytics&&t>=90||e.analytics&&t>=365);(n||i)&&it.remove("consent"),it.get("consent")||th()||Nn.emit("rqstOpen","consent")},Xu="2023/11",Qu=()=>{it.set("consent",{version:Xu,timestamp:Date.now(),analytics:!0,explicit:!1})},Ju=e=>{null!=e&&e.requiresCookieConsent?(it.set("analyticsConsentRequired",!0),qu()):(it.set("analyticsConsentRequired",!1),it.get("consent")||Qu())},$u=Object.freeze({__proto__:null,checkConsent:Ju,launchConsentWindow:qu,setExplicitConsent:e=>{it.set("consent",{version:Xu,timestamp:Date.now(),analytics:e,explicit:!0})},setImplicitConsent:Qu}),Ku=Promise.resolve(void 0);var eh=Object.freeze({__proto__:null,appsFlyerPromise:Ku,logAppsFlyerProductChange:function(){}}),th=()=>Boolean(it.get("user")),nh=()=>it.get("user"),ih=e=>e.split("").map((e=>String.fromCodePoint(255-e.charCodeAt(0)))).join(""),rh=e=>{if(e){var t=Date.now();it.set("loginAndFinishAction",a({updated:t},e))}Nn.emit("rqstOpen","login")},ah=function(){var e=i((function*(){it.off("subscription",di);try{yield Eu()}catch(e){xe("user","Error while deactivating device:",e)}try{yield uu()}catch(e){xe("user","Error while storing settings:",e)}try{yield Dt("https://account.windy.com/api/logout",{cache:!1})}catch(e){xe("user","Error while deactivating device and cloud sync:",e)}ai(null),ri(),Sh(),it.remove("user"),it.remove("userToken"),it.remove("consent"),ti("events","logout"),setTimeout((()=>{window.location.reload(!0)}),500)}));return function(){return e.apply(this,arguments)}}(),oh=function(){var e=i((function*(e,t){if(e.token&&it.set("userToken",e.token),null!=e&&e.auth){var{subscriptionInfo:n,userInfo:i}=e;it.set("subscriptionInfo",n||null);var r="active"===(null==n?void 0:n.status)?n.tier:null;ai(r,{subscriptionInfo:n}),it.set("user",i),yield mu(),!(()=>{var e=it.get("loginAndFinishAction");if(e){var{updated:t,action:n,params:i}=e;if(it.remove("loginAndFinishAction"),Date.now()-t<5*Z)switch(n){case"addFav":uh(i);break;case"alerts-edit":case"favs":case"uploader":case"colors":Nn.emit("rqstOpen",n,i);break;case"openExternalPlugin":Nn.emit("rqstOpen",i.name,i.openParams)}return!0}return!1})()&&t?Ju(e.userInfo):di();var a=(yield Bu())?yield Yu():null;return yield Pu(a),ti("events","user-logged/in"),!0}return t&&Ju(e.userInfo),it.remove("user"),ai(null),ti("events","user-logged/out"),!1}));return function(t,n){return e.apply(this,arguments)}}(),sh=function(){var e=i((function*(){var e=Yn(ih(atob("npyckIqRi9CWkZmQ")));try{var t=yield Dt("https://account.windy.com/api/info",{cache:!1,qs:{country:it.get("country")},customHeaders:{[ih(atob("iJaRm4bSnIyNmQ=="))]:btoa(ih("".concat(e.code,"?").concat(e.reqQs)))}});return(yield oh(t.data,!0))?t:null}catch(e){return xe("user","Cannot load user info:",e),new Rn({ident:"message-account-info-error",className:"top-message bg-error",timeout:5e3,html:"Failed to retrieve account info."}).open(),null}}));return function(){return e.apply(this,arguments)}}(),lh=function(){var e=i((function*(e,t){if(e){var{status:n,data:i}=e;if(200===n&&null!=i&&i.userInfo){var{userInfo:r,authHash:a}=i,o=yield oh(r,!1);o?(Nn.emit("rqstClose","login"),new Rn({ident:"message-loggin-ok",className:"top-message bg-ok",timeout:3e3,html:rn.MSG_LOGIN_SUCCESFULL}).open()):xe("user","Login failed, auth=".concat(o))}else xe("user","Login failed, status=".concat(n,", userInfo=").concat(JSON.stringify(null==i?void 0:i.userInfo)))}}));return function(t,n){return e.apply(this,arguments)}}();Nn.on("userReloadInfo",sh),sh();var ch=Object.freeze({__proto__:null,checkAuth:oh,getAvatar:()=>{var e=it.get("user");return e&&e.avatar||"https://www.windy.com/img/avatar.jpg"},getEmail:()=>{var e=it.get("user");return e&&e.email||""},getInfo:nh,getUserId:()=>{var e,t=nh();return null!==(e=null==t?void 0:t.id)&&void 0!==e?e:0},getUsername:()=>{var e=it.get("user");return e&&e.username||""},handleLoginResponse:lh,isLoggedIn:th,login:rh,logout:ah,register:()=>Nn.emit("rqstOpen","login",{reason:"register"}),reloadInfo:sh}),dh=()=>Nn.emit("favChanged"),uh=function(){var e=i((function*(e){if(!(e=>{var{type:t,title:n}=e;return!!(ae(e)&&n.length>0&&("fav"===t||"airport"===t&&"string"==typeof e.icao||"station"===t&&"string"==typeof e.stationId||"webcam"===t&&"number"==typeof e.webcamId||"route"===t&&"string"==typeof e.route))})(e))return xe("userFavs","Trying to insert invalid fav item: ".concat(JSON.stringify(e))),null;if(!th())return rh({action:"addFav",params:e}),null;var t=yield gi.add(e);return dh(),t}));return function(t){return e.apply(this,arguments)}}(),hh=function(){var e=i((function*(e,t){var n=yield gi.get(e);if(n){var i=Date.now(),r=a(a(a({},n),t),{},{updated:i});return yield gi.put(e,r),dh(),e}return null}));return function(t,n){return e.apply(this,arguments)}}(),mh=function(){var e=i((function*(e){yield gi.remove(e),dh()}));return function(t){return e.apply(this,arguments)}}(),ph=function(){var e=i((function*(e,t,n){if(th()){var i=yield gi.get(e);i&&(n?yield hh(e,{[t]:n}):yield hh(e,{[t]:i[t]?null:Date.now()}))}else rh()}));return function(t,n,i){return e.apply(this,arguments)}}(),vh=function(){var e=i((function*(){yield gi.loadFromCloud(),dh()}));return function(){return e.apply(this,arguments)}}(),fh=e=>ae(e)?t=>fe(e,t)&&"fav"===t.type:t=>{for(var n in e)if(e[n]!=t[n])return!1;return!0},gh=function(){var e=i((function*(e){var t=yield gi.getAll(),n="function"==typeof e?e:fh(e);return t.filter(n)}));return function(t){return e.apply(this,arguments)}}(),wh=function(){var e=i((function*(e){var t=yield gi.getAll(),n="function"==typeof e?e:fh(e);return t.find(n)}));return function(t){return e.apply(this,arguments)}}(),yh=function(){var e=i((function*(){return th()?yield gi.getAll():[]}));return function(){return e.apply(this,arguments)}}(),bh=function(){var e=i((function*(e){var t=yield gi.getAll(),n=fh(e);return t.some(n)}));return function(t){return e.apply(this,arguments)}}(),Th=function(){var e=i((function*(e,t){if(yield bh(e)){var n=yield gh(e);return yield mh(n[0].id),!1}return yield uh(t),!0}));return function(t,n){return e.apply(this,arguments)}}(),_h=function(){var e=i((function*(e){return gi.hasKey(e)}));return function(t){return e.apply(this,arguments)}}(),Sh=function(){var e=i((function*(){yield gi.removeAll(),dh()}));return function(){return e.apply(this,arguments)}}();it.get("user")?vh():it.once("user",(e=>e&&vh()));var Eh,Ph=Object.freeze({__proto__:null,add:uh,emitChange:dh,find:gh,findOne:wh,getAll:yh,hasKey:_h,isFav:bh,remove:mh,removeAllFavsFromDevice:Sh,toggle:Th,togglePin:ph,update:hh}),Ah=null,Ch=null,Oh="/notif/v1/notifications",Ih=!1,Rh=new Promise((e=>{Eh=e}));function Lh(){return Nh.apply(this,arguments)}function Nh(){return(Nh=i((function*(){var{data:{newCount:e}}=yield Dt(Oh,{cache:!1});it.set("badgeNumber",e)}))).apply(this,arguments)}function xh(){Ih||(Ih=!0,Eh(),setInterval(Lh,Z),Lh())}function Dh(){return(Dh=i((function*(){yield Mt(Oh),yield Uh()}))).apply(this,arguments)}function Mh(){return(Mh=i((function*(){yield Dt(Oh,{qs:{markAsViewed:!0}}),yield Uh()}))).apply(this,arguments)}function Uh(){return kh.apply(this,arguments)}function kh(){return(kh=i((function*(){if(it.set("badgeNumber",0),Ah&&Ah.removeAllDeliveredNotifications(),Ch){var e=yield Ch.getPending();e&&e.notifications&&e.notifications.length&&Ch.cancel(e)}}))).apply(this,arguments)}i((function*(){var e=function(){var e=i((function*(){return Boolean(yield wh((e=>"alert"===e.type)))}));return function(){return e.apply(this,arguments)}}();(yield e())?it.get("user")?xh():it.once("user",xh):Nn.on("alertChanged",i((function*(){return(yield e())&&xh()})))}))();var Wh=Object.freeze({__proto__:null,canReceiveNotifications:Rh,deleteAllNotifications:function(){return Dh.apply(this,arguments)},loadNotifications:Lh,markAllAsSeen:function(){return Mh.apply(this,arguments)},markNotificationAsReceived:function(e){return Ut("/notif/v1/interactions/received",{data:e})},markNotificationAsSeen:function(e){return Ut("/notif/v1/interactions/opened",{data:e})},sendTestNotification:function(e,t){Ut("/notif/v1/notifications/send-test",{data:{registrationHash:t,notificationType:e}}).then((e=>{console.log("Sending test notification",JSON.stringify(e))})).catch((e=>console.error(JSON.stringify(e))))}}),Fh=document.head,Gh={title:Ie('meta[property="og:title"]',Fh),description:Ie('meta[property="og:description"]',Fh),url:Ie('meta[property="og:url"]',Fh),type:Ie('meta[property="og:type"]',Fh),image:Ie('meta[property="og:image"]',Fh),imageWidth:Ie('meta[property="og:image:width"]',Fh),imageHeight:Ie('meta[property="og:image:height"]',Fh),published:Ie('meta[property="article:published_time"]',Fh)},Hh={title:Ie('meta[name="twitter:title"]',Fh),description:Ie('meta[name="twitter:description"]',Fh),url:Ie('meta[name="twitter:url"]',Fh),image:Ie('meta[name="twitter:image"]',Fh)},zh={},Bh={},jh=(e,t)=>{e&&(e.content=String(t)||"")},Vh=Object.freeze({__proto__:null,restore:()=>{se(Bh,((e,t)=>{jh(Gh[t],e)})),se(zh,((e,t)=>{jh(Hh[t],e)}))},save:()=>{se(Gh,((e,t)=>e&&(Bh[t]=e.content))),se(Hh,((e,t)=>e&&(zh[t]=e.content)))},set:e=>{se(e,((e,t)=>{jh(Gh[t],e),jh(Hh[t],e)}))}});class Yh{constructor(e){Object.assign(this,e)}open(e){var t=()=>{this.onopen(e),this.isOpen=!0};if(!this.dependency)return t(),Promise.resolve();var n=Ac[this.dependency];return n.open().then((()=>{this.loadedDependency=n.plugin,"object"==typeof this.loadedDependency&&"interpolator"in this.loadedDependency?this.interpolator=this.loadedDependency.interpolator:n instanceof lc&&n.svelteApp&&"interpolator"in n.svelteApp&&(this.interpolator=n.svelteApp.interpolator),t()}))}close(e){(this.isOpen=!1,this.dependency)&&(this.onclose(),Ac[this.dependency].close({disableClosingAnimation:!0}))}onopen(e){"object"==typeof this.loadedDependency&&"onRenderStart"in this.loadedDependency&&this.loadedDependency.onRenderStart(e)}onclose(){"object"==typeof this.loadedDependency&&"onRenderEnd"in this.loadedDependency&&this.loadedDependency.onRenderEnd()}paramsChanged(e){"object"==typeof this.loadedDependency&&"paramsChanged"in this.loadedDependency&&this.loadedDependency.paramsChanged(e)}redraw(){"object"==typeof this.loadedDependency&&"redraw"in this.loadedDependency&&this.loadedDependency.redraw()}}var Zh=Object.freeze({__proto__:null,Renderer:Yh});var qh,Xh=window.WebGLRenderingContext,Qh=new Map([[Xh.NO_ERROR,"NO_ERROR"],[Xh.INVALID_ENUM,"INVALID_ENUM"],[Xh.INVALID_VALUE,"INVALID_VALUE"],[Xh.INVALID_OPERATION,"INVALID_OPERATION"],[Xh.INVALID_FRAMEBUFFER_OPERATION,"INVALID_FRAMEBUFFER_OPERATION"],[Xh.OUT_OF_MEMORY,"OUT_OF_MEMORY"],[Xh.CONTEXT_LOST_WEBGL,"CONTEXT_LOST_WEBGL"]]),Jh=(qh=new ArrayBuffer(2),new DataView(qh).setInt16(0,256,!0),256===new Int16Array(qh)[0]),$h=e=>"a"===e.charAt(0),Kh=e=>"u"===e.charAt(0)||"s"===e.charAt(0);class em{constructor(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];o(this,"glId",0),o(this,"maxTextureSize",0),o(this,"isGlError",!1),o(this,"lastGlErrorMsg",""),this.id=em.newId++,this.keepRefs=e,this.keepRefsShaders=t,this.reset()}reset(){this.framebuffers=[],this.buffers=[],this.shaders=[],this.programs=[],this.textures=[],this._gl=null,this.glId=0,this.canvas=null}create(e,t,n){if(this._name=n,!this._gl&&!this.canvas)return this.canvas=e,this._gl=e.getContext("webgl",t)||e.getContext("experimental-webgl",t),this._gl&&(this.glId=em.newGlId++,this.maxTextureSize=this._gl.getParameter(Xh.MAX_TEXTURE_SIZE)),this._gl}isInvalid(){return!(this._gl&&this.canvas)}gl(){return this._gl}get(){return this.gl()}getCanvas(){return this.canvas}createShader(e,t,n){var i=this.gl();if(!i)return null;var r=i.createShader(t?i.VERTEX_SHADER:i.FRAGMENT_SHADER);if(r&&(this.keepRefsShaders&&this.shaders.push(r),i.shaderSource(r,e),i.compileShader(r),!i.getShaderParameter(r,i.COMPILE_STATUS))){var a=i.getShaderInfoLog(r)||"getShaderInfoLog is null",o=new Error(a);throw o.contextLost=i.isContextLost(),o.isVertexShader=t,o.name=n||"shader",o.full="ERROR compileShader! name: ".concat(o.name,"; ")+"(".concat(o.isVertexShader?"VS":"FS","); ")+"(".concat(this.getGlStatus(),"); msg: ").concat(o.message),o}return r}createProgramObj(e,t,n,i){var r=this.gl();if(!r)return null;var a,o,s=r.createProgram(),l={program:s},c="";if(!s)throw(o=new Error).full="gl.createProgram() is null; name: ".concat(i,"; ").concat(this.getGlStatus()),o;if(this.keepRefs&&this.programs.push(s),n&&n.length>0)for(a=0;a<n.length;a++)c+="#define "+n[a]+"\n";var d=this.createShader(c+e,!0,i),u=this.createShader(c+t,!1,i);if(!d||!u)throw o=new Error("vertexShader or fragmentShader is null; name: "+i);if(r.attachShader(s,d),r.attachShader(s,u),r.linkProgram(s),!r.getProgramParameter(s,r.LINK_STATUS)){var h=r.getProgramInfoLog(s)||"getProgramInfoLog is null";throw(o=new Error(h)).contextLost=r.isContextLost(),o.name=i||"shader",o.full="ERROR linkProgram! name: ".concat(o.name,"; ").concat(this.getGlStatus()),o}var m=r.getProgramParameter(s,r.ACTIVE_ATTRIBUTES);for(a=0;a<m;a++){var p=r.getActiveAttrib(s,a);if(p){var v=p.name;if(!$h(v))throw'Invalid attribute name "'.concat(v,'"');l[v]=r.getAttribLocation(s,p.name)}}var f=r.getProgramParameter(s,r.ACTIVE_UNIFORMS);for(a=0;a<f;a++){var g=r.getActiveUniform(s,a);if(g){var w=r.getUniformLocation(s,g.name),y=g.name,b=y.indexOf("[");if(b>0&&(y=y.substring(0,b)),!Kh(y))throw'Invalid uniform name "'.concat(y,'"');l[y]=w}}return l}deleteProgramObj(e){var t;em.removeFromArray(e,this.programs),null===(t=this.gl())||void 0===t||t.deleteProgram(e)}bindAttribute(e,t,n,i,r,a,o){var s=this.gl();s&&(s.bindBuffer(Xh.ARRAY_BUFFER,e),s.enableVertexAttribArray(t),s.vertexAttribPointer(t,n,i,r,a,o))}textureFromUrlPromise(e,t,n,i,r,a){return new Promise((o=>{var s=new Image,l=this.createTexture2D(n,i,r,null,1,1,Xh.RGBA);s.onload=()=>{this.resizeTexture2D(l,s,s.width,s.height,Xh.RGBA,a),o([e,l])},s.crossOrigin="",s.src=t}))}createTextureFromBase64(e,t,n,i,r){var a=new Image,o=this.createTexture2D(e,t,n,null,1,1,Xh.RGBA);return a.onload=()=>{this.resizeTexture2D(o,a,a.width,a.height,Xh.RGBA,r)},a.src=i,o}createTexture2D(e,t,n,i,r,a,o,s){var l=this.gl();if(l){var c=l.createTexture();return c&&(this.keepRefs&&this.textures.push(c),c._width=r,c._height=a,l.bindTexture(l.TEXTURE_2D,c),this.setBindedTexture2DParams(e,t,n)),this.resizeTexture2D(c,i,r,a,o,s)}return null}resizeTexture2D(e,t,n,i,r,a){if(!e)return e;var o=this.gl();if(r=r||Xh.RGBA,e._width=n,e._height=i,e._format=r,o){if(o.bindTexture(Xh.TEXTURE_2D,e),Array.isArray(t)){var s=n,l=i;o.pixelStorei(Xh.UNPACK_ALIGNMENT,s>4?4:1);for(var c=0;c<t.length;c++){4===s&&o.pixelStorei(Xh.UNPACK_ALIGNMENT,1);var d=t[c];null===d||ArrayBuffer.isView(d)?o.texImage2D(Xh.TEXTURE_2D,c,r,s,l,0,r,Xh.UNSIGNED_BYTE,d):o.texImage2D(Xh.TEXTURE_2D,c,r,r,Xh.UNSIGNED_BYTE,d),s=Math.max(s>>1,1),l=Math.max(l>>1,1)}a=!1}else null===t||ArrayBuffer.isView(t)?o.texImage2D(Xh.TEXTURE_2D,0,r,n,i,0,r,Xh.UNSIGNED_BYTE,t):o.texImage2D(Xh.TEXTURE_2D,0,r,r,Xh.UNSIGNED_BYTE,t);a&&o.generateMipmap(Xh.TEXTURE_2D),o.bindTexture(Xh.TEXTURE_2D,null)}return e}deleteTexture2D(e){var t;em.removeFromArray(e,this.textures),null===(t=this.gl())||void 0===t||t.deleteTexture(e)}bindTexture2D(e,t,n){var i=this.gl();i&&(i.activeTexture(Xh.TEXTURE0+(t||0)),i.bindTexture(Xh.TEXTURE_2D,e),n&&i.uniform1i(n,t))}setBindedTexture2DParams(e,t,n,i){var r=this.gl();r&&(r.texParameteri(Xh.TEXTURE_2D,Xh.TEXTURE_MIN_FILTER,e),r.texParameteri(Xh.TEXTURE_2D,Xh.TEXTURE_MAG_FILTER,t),r.texParameteri(Xh.TEXTURE_2D,Xh.TEXTURE_WRAP_S,n),r.texParameteri(Xh.TEXTURE_2D,Xh.TEXTURE_WRAP_T,i||n))}createBuffer(e){var t=this.gl(),n=null;return t&&(n=t.createBuffer())&&(this.keepRefs&&this.buffers.push(n),this.setBufferData(n,e)),n}deleteBuffer(e){var t;em.removeFromArray(e,this.buffers),null===(t=this.gl())||void 0===t||t.deleteBuffer(e)}setBufferData(e,t){var n=this.gl();n&&(n.bindBuffer(Xh.ARRAY_BUFFER,e),n.bufferData(Xh.ARRAY_BUFFER,t,Xh.STATIC_DRAW))}createIndexBuffer(e){var t=this.gl(),n=null;return t&&(n=t.createBuffer(),this.keepRefs&&n&&this.buffers.push(n),t.bindBuffer(Xh.ELEMENT_ARRAY_BUFFER,n),t.bufferData(Xh.ELEMENT_ARRAY_BUFFER,e,Xh.STATIC_DRAW)),n}createFramebuffer(){var e=null,t=this.gl();return t&&(e=t.createFramebuffer(),this.keepRefs&&e&&this.framebuffers.push(e)),e}deleteFramebuffer(e){var t;em.removeFromArray(e,this.framebuffers),null===(t=this.gl())||void 0===t||t.deleteFramebuffer(e)}bindFramebuffer(e,t){var n=this.gl();n&&(n.bindFramebuffer(Xh.FRAMEBUFFER,e),t&&n.framebufferTexture2D(Xh.FRAMEBUFFER,Xh.COLOR_ATTACHMENT0,Xh.TEXTURE_2D,t,0))}release(){var e=this._gl;if(e){e.flush(),e.finish();var t,n,i=this.textures.length;for(t=0;t<i;t++)n=this.textures[t],e.isTexture(n)&&e.deleteTexture(n);for(i=this.programs.length,t=0;t<i;t++)n=this.programs[t],e.isProgram(n)&&e.deleteProgram(n);for(i=this.shaders.length,t=0;t<i;t++)n=this.shaders[t],e.isShader(n)&&e.deleteShader(n);for(i=this.buffers.length,t=0;t<i;t++)n=this.buffers[t],e.isBuffer(n)&&e.deleteBuffer(n);for(i=this.framebuffers.length,t=0;t<i;t++)n=this.framebuffers[t],e.isFramebuffer(n)&&e.deleteFramebuffer(n);this.reset()}}checkGlError(){var e=!0,t="GL CONTEXT STATUS: ";if(this._gl){var n=this._gl.isContextLost(),i=this._gl.getError();if(n)t+="GL CONTEXT LOST!";else if(i===Xh.NO_ERROR)t+="no error.",e=!1;else{var r=Qh.get(i);t+="".concat(r," (code: ").concat(i,")!; contextLost: ").concat(n)}}else t+="gl is null!";return this.isGlError=e,this.lastGlErrorMsg=t,e}getGlStatus(){return this.checkGlError(),this.lastGlErrorMsg}static getNextPowerOf2Size(e){return 2<<Math.floor(Math.log2(e-1))}static removeFromArray(e,t){for(var n=-1,i=0;i<t.length;i++)t[i]===e&&(n=i);return n>-1&&t.splice(n,1),n}}o(em,"littleEndian",Jh),o(em,"newId",0),o(em,"newGlId",1);var tm="precision highp float;\n#define GLSLIFY 1\nuniform vec4 uPars0;uniform vec4 uPars1;uniform vec4 uPars2;uniform sampler2D sTex0;uniform sampler2D sGrad;\n#ifdef CLOUDS\nuniform sampler2D sGrad2;\n#endif\n#ifdef PATT\nuniform sampler2D sPatt;\n#endif\n#ifdef PATT2\nuniform sampler2D sPatt2;\n#endif\nvarying vec4 vTc0;varying vec4 vTc1;vec4 cubicHermite4(vec4 A,vec4 B,vec4 C,vec4 D,float t){mediump vec4 a=-A*0.5+(3.0*B)*0.5-(3.0*C)*0.5+D*0.5;mediump vec4 b=A-(5.0*B)*0.5+2.0*C-D*0.5;mediump vec4 c=-A*0.5+C*0.5;mediump vec4 d=B;mediump float tt=t*t;return clamp(a*tt*t+b*tt+c*t+d,vec4(0.),vec4(1.));}float cubicHermite(vec4 X,float t){mediump float a=-X.x*.5+(3.*X.y)*.5-(3.*X.z)*.5+X.w*.5;mediump float b=X.x-(5.*X.y)*.5+2.*X.z-X.w*.5;mediump float c=-X.x*.5+X.z*.5;mediump float d=X.y;mediump float tt=t*t;return clamp(a*tt*t+b*tt+c*t+d,0.,1.);}void main(void){\n#ifdef PATT\nlowp vec4 patt=texture2D(sPatt,vTc0.zw);\n#endif\n#ifdef PATT2\nlowp vec4 patt2=texture2D(sPatt2,vTc0.zw);\n#endif\nmediump vec2 f1=fract(vTc1.xy);mediump vec2 f0=vec2(1.)-f1;mediump vec4 w4=vec4(f0.y*f0.x,f0.y*f1.x,f1.y*f0.x,f1.y*f1.x);mediump float u1=vTc0.x;mediump float u2=vTc0.x+vTc1.z;mediump float v1=vTc0.y;mediump float v2=vTc0.y+vTc1.w;lowp vec4 s11=texture2D(sTex0,vec2(u1,v1));lowp vec4 s12=texture2D(sTex0,vec2(u2,v1));lowp vec4 s21=texture2D(sTex0,vec2(u1,v2));lowp vec4 s22=texture2D(sTex0,vec2(u2,v2));float r;mediump float g;lowp float a;\n#ifdef BICUBIC\nmediump float u0=vTc0.x-vTc1.z;mediump float u3=u2+vTc1.z;mediump float v0=vTc0.y-vTc1.w;mediump float v3=v2+vTc1.w;lowp vec4 s00=texture2D(sTex0,vec2(u0,v0));lowp vec4 s01=texture2D(sTex0,vec2(u1,v0));lowp vec4 s02=texture2D(sTex0,vec2(u2,v0));lowp vec4 s03=texture2D(sTex0,vec2(u3,v0));lowp vec4 s10=texture2D(sTex0,vec2(u0,v1));lowp vec4 s13=texture2D(sTex0,vec2(u3,v1));lowp vec4 s20=texture2D(sTex0,vec2(u0,v2));lowp vec4 s23=texture2D(sTex0,vec2(u3,v2));lowp vec4 s30=texture2D(sTex0,vec2(u0,v3));lowp vec4 s31=texture2D(sTex0,vec2(u1,v3));lowp vec4 s32=texture2D(sTex0,vec2(u2,v3));lowp vec4 s33=texture2D(sTex0,vec2(u3,v3));lowp vec4 r0=vec4(s00.r,s01.r,s02.r,s03.r);lowp vec4 r1=vec4(s10.r,s11.r,s12.r,s13.r);lowp vec4 r2=vec4(s20.r,s21.r,s22.r,s23.r);lowp vec4 r3=vec4(s30.r,s31.r,s32.r,s33.r);lowp vec4 r4=cubicHermite4(r0,r1,r2,r3,f1.y);r=cubicHermite(r4,f1.x);lowp float rMax=max(max(s11.r,s12.r),max(s21.r,s22.r));lowp float rMin=min(min(s11.r,s12.r),min(s21.r,s22.r));r=clamp(r,rMin,rMax);\n#ifdef BCH\nlowp vec4 b0=vec4(s00.b,s01.b,s02.b,s03.b);lowp vec4 b1=vec4(s10.b,s11.b,s12.b,s13.b);lowp vec4 b2=vec4(s20.b,s21.b,s22.b,s23.b);lowp vec4 b3=vec4(s30.b,s31.b,s32.b,s33.b);lowp vec4 b4=cubicHermite4(b0,b1,b2,b3,f1.y);r=cubicHermite(b4,f1.x);\n#endif\n#ifdef VSIZE\nlowp vec4 g0=vec4(s00.g,s01.g,s02.g,s03.g);lowp vec4 g1=vec4(s10.g,s11.g,s12.g,s13.g);lowp vec4 g2=vec4(s20.g,s21.g,s22.g,s23.g);lowp vec4 g3=vec4(s30.g,s31.g,s32.g,s33.g);lowp vec4 gg=cubicHermite4(g0,g1,g2,g3,f1.y);g=cubicHermite(gg,f1.x);\n#endif\n#ifdef PNG\na=max(sign(dot(vec4(s11.a,s12.a,s21.a,s22.a),w4)-0.66),0.);\n#else\na=1.-max(sign(dot(vec4(s11.b,s12.b,s21.b,s22.b),w4)-0.33),0.);\n#endif\n#else\nr=dot(vec4(s11.r,s12.r,s21.r,s22.r),w4);\n#ifdef VSIZE\ng=dot(vec4(s11.g,s12.g,s21.g,s22.g),w4);\n#endif\n#ifdef PNG\n#ifdef BILIN_A\na=max(sign(dot(vec4(s11.a,s12.a,s21.a,s22.a),w4)-0.66),0.);\n#else\na=min(min(s11.a,s12.a),min(s21.a,s22.a));\n#endif\n#else\n#ifdef BILIN_A\na=1.-max(sign(dot(vec4(s11.b,s12.b,s21.b,s22.b),w4)-0.33),0.);\n#else\na=1.-max(max(s11.b,s12.b),max(s21.b,s22.b));\n#endif\n#endif\n#endif\nr=r*uPars0.x+uPars0.y;\n#ifdef LOG\nr=max(uPars2.y,pow(2.,r)+uPars2.x);\n#endif\nfloat gx=r;\n#ifdef VSIZE\ng=g*uPars0.z+uPars0.w;gx=length(vec2(r,g));\n#endif\nvec2 gradTc=vec2(gx*uPars1.x+uPars1.y,.5);lowp vec3 rgb=texture2D(sGrad,gradTc).rgb;\n#ifdef CCL\nmediump vec4 g4=vec4(s11.g,s12.g,s21.g,s22.g)*uPars0.zzzz+uPars0.wwww;lowp vec4 mr4=sign(g4-1.)-sign(g4-2.)+sign(g4-3.)-sign(g4-4.);lowp vec4 mg4=sign(g4-2.)-sign(g4-3.)+sign(g4-4.)-sign(g4-5.);lowp vec4 mb4=sign(g4-6.);lowp vec4 ma4=sign(g4-3.)-sign(g4-6.)+sign(g4-7.);lowp float mr=dot(clamp(mr4,0.,1.),w4);lowp float mg=dot(clamp(mg4,0.,1.),w4);lowp float mb=dot(clamp(mb4,0.,1.),w4);lowp float ma=dot(clamp(ma4,0.,1.),w4);lowp vec4 mask=clamp(vec4(mr,mg,mb,ma)*10.-4.5,0.,1.);lowp float add=min(dot(patt.rg,mask.rg),1.)*0.4;lowp vec2 pattM=vec2(patt.a*0.35,patt.b-0.35);lowp float mul=1.-clamp(dot(pattM,mask.ab),.0,.4);rgb=mix(rgb*mul,vec3(1.),vec3(add));\n#endif\n#ifdef CLOUDS\ng=dot(vec4(s11.g,s12.g,s21.g,s22.g),w4);g=g*uPars0.z+uPars0.w;if(g>10.)g=g*10.-90.;lowp vec4 grad2=texture2D(sGrad2,vec2(g*uPars1.z+uPars1.w,.5));lowp float pa=max(0.0,sign(patt.r+grad2.a-1.));rgb=mix(rgb,grad2.rgb,vec3(pa));\n#endif\n#ifdef RAIN\nif(r>0.1){vec4 g4=vec4(s11.g,s12.g,s21.g,s22.g)*uPars0.zzzz+uPars0.wwww;lowp vec4 k0=vec4(0.);lowp vec4 k1=vec4(1.);lowp vec4 m45=sign(g4-4.)-sign(g4-6.);lowp vec4 m07=sign(g4-7.)-sign(g4-8.);lowp vec4 m06=sign(g4-6.)-sign(g4-7.);lowp vec4 m08=sign(g4-8.)-sign(g4-9.);lowp vec4 m09=sign(g4-9.)-sign(g4-10.);lowp vec4 m10=sign(g4-10.)-sign(g4-11.);lowp vec4 m11=sign(g4-11.)-sign(g4-12.);lowp vec4 m03=sign(g4-3.)-sign(g4-4.);lowp float mr1=dot(clamp(m06,k0,k1),w4);lowp float mg1=dot(clamp(m45,k0,k1),w4);lowp float mb1=dot(clamp(m07,k0,k1),w4);lowp float ma1=dot(clamp(m08,k0,k1),w4);lowp vec4 mask1=clamp(vec4(mr1,mg1,mb1,ma1)*10.-4.5,0.,1.);lowp vec4 masked1=patt*mask1;lowp float mr2=dot(clamp(m09,k0,k1),w4);lowp float mg2=dot(clamp(m10,k0,k1),w4);lowp float mb2=dot(clamp(m11,k0,k1),w4);lowp float ma2=dot(clamp(m03,k0,k1),w4);lowp vec4 mask2=clamp(vec4(mr2,mg2,mb2,ma2)*10.-4.5,0.,1.);lowp vec4 masked2=patt2*mask2;rgb=mix(rgb,vec3(0.85,0.85,1.0),masked1.rrr*.65);rgb=mix(rgb,vec3(1.0,1.0,1.0),masked1.ggg*.55);rgb=mix(rgb,vec3(0.8,0.9,1.0),masked1.bbb*.5);rgb=mix(rgb,vec3(0.8,0.7,1.0),masked1.aaa*.6);rgb=mix(rgb,vec3(1.0,1.0,0.7),masked2.rrr*.27);rgb=mix(rgb,vec3(1.0,1.0,0.7),masked2.ggg*.50);rgb=mix(rgb,vec3(1.0,1.0,0.7),masked2.bbb*.70);rgb=mix(rgb,vec3(1.0,0.8,0.8),masked2.aaa*.9);}\n#endif\nvec3 bgColor=vec3(uPars2.z);gl_FragColor=vec4(mix(bgColor,rgb,vec3(a)),1.);}",nm="#define GLSLIFY 1\nattribute vec2 aPos;uniform vec4 uVPars0;uniform vec4 uVPars1;uniform vec4 uVPars2;varying vec4 vTc0;varying vec4 vTc1;void main(void){gl_Position=vec4(2.*aPos.xy-1.,0.,1.);vec2 tc=aPos.xy;vTc0.xy=tc*uVPars0.xy+uVPars0.zw;vTc0.zw=tc*uVPars1.xy+uVPars1.zw;vTc1.xy=tc*uVPars2.xy+uVPars2.zw;vTc1.zw=uVPars1.zw;}",im=window.WebGLRenderingContext,rm=255;var am,om,sm,lm,cm,dm,um=new class{constructor(){Nn.on("redrawLayers",this.onRedrawLayers,this),it.on("visibility",this.visibilityChanged.bind(this))}visibilityChanged(e){e||this.reset()}init(){try{if(this.initialized)return Promise.resolve(this.isReady);if(this.initPromise)return this.initPromise;this.errorCount=0;var e=new em;this.glo=e,window.devicePixelRatio>=2?this.edgeSize=512:this.edgeSize=256,this.canvas=document.createElement("canvas"),this.canvas.addEventListener("webglcontextlost",(()=>{xe("TileRenderer","Canvas context is lost, overlay=".concat(it.get("overlay"),", poi=").concat(it.get("pois")))})),this.canvas.addEventListener("webglcontextrestored",(()=>{xe("TileRenderer","Canvas context is restored, overlay=".concat(it.get("overlay"),", poi=").concat(it.get("pois")))})),this.canvas.addEventListener("webglcontextcreationerror",(e=>{xe("TileRenderer","Canvas context creation error: ".concat(e.statusMessage||"Unknown error",", overlay=").concat(it.get("overlay"),", poi=").concat(it.get("pois")))})),this.canvas.width=this.edgeSize,this.canvas.height=this.edgeSize;try{e.create(this.canvas,{antialias:!1,depth:!1,stencil:!1,alpha:!0,premultipliedAlpha:!0,preserveDrawingBuffer:!0,desynchronized:!0},"TileRendererCtx")||++this.errorCount}catch(e){++this.errorCount}return this.errorCount?(this.initialized=!0,Promise.resolve(this.isReady)):(this.initPromise=this.onWebGlInit(e),this.initPromise)}catch(e){return this.initialized=!0,Promise.resolve(!1)}}processTile(e,t,n,i){return it.get("disableWebGL")?Promise.resolve(!1):new Promise((r=>{this.init().then((a=>{this.testPerformed||(this.testOk=this.usabilityTest(),this.testPerformed=!0);var o=!1;a&&this.testOk&&(t.classList.add("leaflet-tile-loaded"),o=this.renderTile(e,t,n,i)),r(o)})).catch((e=>{this.isReady=!1,r(!1)}))}))}reset(){this.initialized=!1,this.testPerformed=!1,this.initPromise=null,this.isReady=!1,this.edgeSize=256,this.lastIdent=null,this.testOk=!1}onRedrawLayers(){this.lastIdent=null}onWebGlInit(e){this.vertexBufferRect=e.createBuffer(new Float32Array([0,0,1,0,1,1,0,1])),this.srcTexture=e.createTexture2D(im.NEAREST,im.NEAREST,im.CLAMP_TO_EDGE,null,512,512,im.RGBA),this.shMulti=[];for(var t=0;t<16;t++){var n=["BICUBIC"];1&t&&n.push("VSIZE"),2&t&&n.push("PNG"),4&t&&n.push("BCH"),8&t&&n.push("LOG"),this.shMulti.push(this.compileShader(nm,tm,n,"shMulti"))}var i=nm,r=tm;this.specShader={ccl:this.compileShader(i,r,["BICUBIC","CCL","PATT","PNG"],"shCCL"),clouds:this.compileShader(i,r,["BICUBIC","CLOUDS","PATT"],"shClouds"),rain:this.compileShader(i,r,["BICUBIC","RAIN","LOG","PATT","PATT2","PNG"],"shRain"),cloudtop:this.compileShader(i,r,["BILIN_A"],"shCloudtop"),cbase:this.compileShader(i,r,["PNG"],"shCbase"),ptype:this.compileShader(i,"precision highp float;\n#define GLSLIFY 1\nuniform vec4 uPars0;uniform vec3 uCol0;uniform vec3 uCol1;uniform vec3 uCol2;uniform vec3 uCol3;uniform vec3 uCol4;uniform vec3 uCol5;uniform vec3 uCol6;uniform vec3 uCol7;uniform vec3 uCol8;uniform vec3 uCol9;uniform vec3 uCol10;uniform sampler2D sTex0;varying vec4 vTc0;varying vec4 vTc1;void main(void){float u1=vTc0.x;float u2=vTc0.x+vTc1.z;float v1=vTc0.y;float v2=vTc0.y+vTc1.w;vec4 s11=texture2D(sTex0,vec2(u1,v1));vec4 s12=texture2D(sTex0,vec2(u2,v1));vec4 s21=texture2D(sTex0,vec2(u1,v2));vec4 s22=texture2D(sTex0,vec2(u2,v2));vec2 f1=fract(vTc1.xy);vec2 f0=vec2(1.)-f1;vec4 w4=vec4(f0.y*f0.x,f0.y*f1.x,f1.y*f0.x,f1.y*f1.x);float r=dot(vec4(s11.r,s12.r,s21.r,s22.r),w4)*uPars0.x+uPars0.y;r=max(0.,pow(2.,r)-.001);vec4 g4=vec4(s11.g,s12.g,s21.g,s22.g)*uPars0.zzzz+uPars0.wwww;vec4 c0=vec4(0.);vec4 c1=vec4(1.);vec4 m01=clamp(sign(g4-1.)-sign(g4-2.),c0,c1);vec4 m02=clamp(sign(g4-2.)-sign(g4-3.),c0,c1);vec4 m03=clamp(sign(g4-3.)-sign(g4-4.),c0,c1);vec4 m04=clamp(sign(g4-4.)-sign(g4-5.),c0,c1);vec4 m05=clamp(sign(g4-5.)-sign(g4-6.),c0,c1);vec4 m06=clamp(sign(g4-6.)-sign(g4-7.),c0,c1);vec4 m07=clamp(sign(g4-7.)-sign(g4-8.),c0,c1);vec4 m08=clamp(sign(g4-8.)-sign(g4-9.),c0,c1);vec4 m09=clamp(sign(g4-9.)-sign(g4-10.),c0,c1);vec4 m10=clamp(sign(g4-10.)-sign(g4-11.),c0,c1);const float d=-.45;vec3 rgb=uCol0;rgb=mix(rgb,uCol1,vec3(max(sign(dot(m01,w4)+d),0.)));rgb=mix(rgb,uCol2,vec3(max(sign(dot(m02,w4)+d),0.)));rgb=mix(rgb,uCol3,vec3(max(sign(dot(m03,w4)+d),0.)));rgb=mix(rgb,uCol4,vec3(max(sign(dot(m04,w4)+d),0.)));rgb=mix(rgb,uCol5,vec3(max(sign(dot(m05,w4)+d),0.)));rgb=mix(rgb,uCol6,vec3(max(sign(dot(m06,w4)+d),0.)));rgb=mix(rgb,uCol7,vec3(max(sign(dot(m07,w4)+d),0.)));rgb=mix(rgb,uCol8,vec3(max(sign(dot(m08,w4)+d),0.)));rgb=mix(rgb,uCol9,vec3(max(sign(dot(m09,w4)+d),0.)));rgb=mix(rgb,uCol10,vec3(max(sign(dot(m10,w4)+d),0.)));rgb=mix(rgb,uCol0,vec3(max(sign(0.1-r),0.)));gl_FragColor=vec4(rgb,1.);}",[],"shPtype")};var a=this,o=[];this.texCCL=null,o.push(e.textureFromUrlPromise("texCCL","/img/textures/ccl32_v4.png",im.NEAREST_MIPMAP_NEAREST,im.LINEAR,im.REPEAT,!0));this.texPType1=null,o.push(e.textureFromUrlPromise("texPType1","/img/textures/ptype1_v4.png",im.NEAREST_MIPMAP_NEAREST,im.LINEAR,im.REPEAT,!0));return this.texPType2=null,o.push(e.textureFromUrlPromise("texPType2","/img/textures/ptype2_v4.png",im.NEAREST_MIPMAP_NEAREST,im.LINEAR,im.REPEAT,!0)),this.texCRain=this.prepareRainPattern(),new Promise((e=>{Promise.all(o).then((t=>{t.forEach((e=>{var[t,n]=e;this[t]=n})),a.initPromise=null,a.initialized=!0,a.isReady=!0,e(a.isReady)})).catch((()=>{a.initPromise=null,a.initialized=!0,a.isReady=!1,e(a.isReady)}))}))}prepareRainPattern(){for(var e=16,t=new Uint8Array(1024),n=[128,192,58,0],i=0,r=0;r<e;r++)for(var a=0;a<e;a++)for(var o=n[(1&a)+((1&r)<<1)],s=0;s<4;s++)t[i++]=o;return this.glo.createTexture2D(im.NEAREST,im.NEAREST,im.REPEAT,t,e,e)}createGradientObject(e){try{var t=e.steps,n=t,i=1;n>2048&&(i=t/(n=2048));var r=1<<Math.round(Math.log2(n));r<n&&(r+=r);var a=n/((e.max-e.min)*r),o=-a*e.min,s=r<<2,l=e.createGradientArray(!1,!1,i);if(l.byteLength<s){var c=new Uint8Array(s);if(c.set(l),l.byteLength>7){for(var d=new Uint8Array(4),u=0;u<4;u++)d[u]=l[l.byteLength-8+u];for(var h=l.byteLength-4;h<s;h+=4)c.set(d,h)}l=c}else l.byteLength>s&&(l=new Uint8Array(l.buffer,0,s));return{texture:this.glo.createTexture2D(im.LINEAR,im.LINEAR,im.CLAMP_TO_EDGE,l,r,1),mul:a,add:o}}catch(e){0}return null}augmentRainCoverColorsWithAlpha(e){for(var t=0;t<e.length;t++){var n=e[t][0],i=61;n>8?i=255:n>0&&(i=61+255*n/8),e[t][1][3]=i}return e}prepareGradients(e){if(this.lastIdent!==e.ident){this.gradient=null,this.gradient2=null;var t=e.c;if(t)switch(t.getColor(),this.gradient=this.createGradientObject(t),e.ident){case"clouds":var n=le(sa.rainClouds.getColorGradient()),i=this.augmentRainCoverColorsWithAlpha(n),r=new ea({ident:"temporary",steps:128,opaque:!1,default:i});this.gradient2=this.createGradientObject(r);break;case"ptype":var a=sa.ptype.getColor();if(a){var o=1/255;this.ptypeColors=[];for(var s=0;s<11;s++){var l=a.RGBA(s);this.ptypeColors[s]=[o*l[0],o*l[1],o*l[2]]}}}this.lastIdent=e.ident}}compileShader(e,t,n,i){var r=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],a=null;try{a=this.glo.createProgramObj(e,t,n,i)}catch(e){r&&(xe("TileRenderer","Compile shader '".concat(i,"' (is critical: ").concat(r,") error:"),e),++this.errorCount)}return a}usabilityTest(){var e=this.glo.gl(),t=this.edgeSize;if(e){e.clearColor(1,.5,.25,0),e.clear(im.COLOR_BUFFER_BIT);var n=document.createElement("canvas");n.width=n.height=t;var i=n.getContext("2d"),r=null==i?void 0:i.createImageData(t,t);if(r){var a=new Uint8Array(r.data.buffer);e.readPixels(0,0,t,t,im.RGBA,im.UNSIGNED_BYTE,a);for(var o=[255,128,64,0],s=0;s<4;s++){var l=o[s]-r.data[16416+s];if(Math.abs(l)>3)return!1}return!0}}return!1}renderTile(e,t,n,i){Date.now();var r=this.glo,a=r.gl(),o=this.edgeSize;if(!i.data)return!1;for(var s=512,l=1/s,c=new Uint8Array(i.data.buffer),d=1028,u=new Uint8Array(1048576),h=8224,m=0,p=0;p<259;p++){u.set(c.subarray(h,h+d),m);var v=c.subarray(h+d-4,h+d);u.set(v,m+d),u.set(v,m+d+4),p<256&&(h+=d),m+=2048}r.resizeTexture2D(this.srcTexture,u,s,s,im.RGBA),t.width=t.height=o;var f=t.getContext("2d"),g=null==f?void 0:f.createImageData(o,o);if(!f||!g||!a)return!1;var w=.998*l,y=256/n.trans,b=0,T=0;y<1&&(b=n.intX*y,b-=Math.floor(b),T=n.intY*y,T-=Math.floor(T));var _=y*l;this.uVPars0=[_,_,_*n.intX,_*n.intY],this.uVPars1=[16,16,w,w],this.uVPars2=[y,y,b,T];var S=e.latestParams,E=S.layer,P=is[E];if(this.prepareGradients(P),!this.renderGlTile(r,a,S,E,P,i))return!1;var A=new Uint8Array(g.data.buffer);return a.readPixels(0,0,o,o,im.RGBA,im.UNSIGNED_BYTE,A),f.putImageData(g,0,0),!0}setBaseShStuff(e,t,n){t.viewport(0,0,this.edgeSize,this.edgeSize),t.useProgram(n.program),e.bindAttribute(this.vertexBufferRect,n.aPos,2,im.FLOAT,!1,8,0),t.uniform4fv(n.uVPars0,this.uVPars0),t.uniform4fv(n.uVPars1,this.uVPars1),t.uniform4fv(n.uVPars2,this.uVPars2),e.bindTexture2D(this.srcTexture,0,n.sTex0)}renderGlTile(e,t,n,i,r,a){var o=0,s=!1,l=0;switch(i){case"wind":case"currents":case"currentsTide":o+=1;break;case"waves":case"wwaves":case"swell1":case"swell2":case"swell3":s=!0,o+=4}(n.PNGtransparency||"png"===n.fileSuffix)&&(o+=2);var c=[-.001,0,128/rm,0];"rainLog"===r.wTransformR?o+=8:r.wTransformR&&r.wTransformR>0&&(o+=8,c[0]=r.wTransformR);var d=this.specShader[i];d||(d=this.shMulti[o]);var u=a.headerPars;if(!d||!u)return!1;switch(this.setBaseShStuff(e,t,d),i){case"rain":l=.5,e.bindTexture2D(this.texPType1,3,d.sPatt),e.bindTexture2D(this.texPType2,4,d.sPatt2);break;case"clouds":e.bindTexture2D(this.texCRain,3,d.sPatt);break;case"ptype":if(l=.5,this.ptypeColors){var h=this.ptypeColors;t.uniform3fv(d.uCol0,h[0]),t.uniform3fv(d.uCol1,h[1]),t.uniform3fv(d.uCol2,h[2]),t.uniform3fv(d.uCol3,h[3]),t.uniform3fv(d.uCol4,h[4]),t.uniform3fv(d.uCol5,h[5]),t.uniform3fv(d.uCol6,h[6]),t.uniform3fv(d.uCol7,h[7]),t.uniform3fv(d.uCol8,h[8]),t.uniform3fv(d.uCol9,h[9]),t.uniform3fv(d.uCol10,h[10])}else{var m=1/255;t.uniform3fv(d.uCol0,[111*m,111*m,111*m]),t.uniform3fv(d.uCol1,[0,208*m,239*m]),t.uniform3fv(d.uCol2,[0,0,1]),t.uniform3fv(d.uCol3,[197*m,27*m,195*m]),t.uniform3fv(d.uCol4,[129*m,63*m,63*m]),t.uniform3fv(d.uCol5,[227*m,227*m,227*m]),t.uniform3fv(d.uCol6,[129*m,195*m,129*m]),t.uniform3fv(d.uCol7,[202*m,211*m,57*m]),t.uniform3fv(d.uCol8,[183*m,119*m,8*m]),t.uniform3fv(d.uCol9,[227*m,73*m,19*m]),t.uniform3fv(d.uCol10,[195*m,63*m,63*m])}break;case"ccl":l=.5,e.bindTexture2D(this.texCCL,3,d.sPatt);break;case"cloudtop":c[2]=111/rm}var p=this.gradient,v=this.gradient2,f=[0,0,0,0];p&&(f[0]=p.mul,f[1]=p.add,e.bindTexture2D(p.texture,1,d.sGrad)),v&&(f[2]=v.mul,f[3]=v.add,e.bindTexture2D(v.texture,2,d.sGrad2));var g=s?[rm*u[4],u[5],0,0]:[rm*u[0],u[1],rm*u[2],u[3]+l];return t.uniform4fv(d.uPars0,g),t.uniform4fv(d.uPars1,f),t.uniform4fv(d.uPars2,c),t.drawArrays(t.TRIANGLE_FAN,0,4),!0}},hm=0,mm=new wt(50),pm=F?3:6,vm=e=>{var t;if(dm||(()=>{am=document.createElement("canvas"),om=am.getContext("2d",{desynchronized:!0,willReadFrequently:!0});var e=document.createElement("canvas").getContext("webgl");lm=(null==e?void 0:e.createFramebuffer())||null,cm=(null==e?void 0:e.createTexture())||null,lm&&cm&&(sm=e),dm=!0})(),sm){sm.activeTexture(sm.TEXTURE0),sm.bindTexture(sm.TEXTURE_2D,cm),sm.bindFramebuffer(sm.FRAMEBUFFER,lm),sm.framebufferTexture2D(sm.FRAMEBUFFER,sm.COLOR_ATTACHMENT0,sm.TEXTURE_2D,cm,0),sm.texImage2D(sm.TEXTURE_2D,0,sm.RGBA,sm.RGBA,sm.UNSIGNED_BYTE,e);var n=new Uint8Array(e.width*e.height*4);sm.readPixels(0,0,e.width,e.height,sm.RGBA,sm.UNSIGNED_BYTE,n),t=new Uint8ClampedArray(n)}t||(am.width=e.width,am.height=e.height,om.drawImage(e,0,0,e.width,e.height),t=om.getImageData(0,0,e.width,e.height).data);return t};class fm{constructor(e,t){this.url=e,this.status="undefined",this.data=null,this.x=t.x,this.y=t.y,this.z=t.z,this.transformR=t.transformR,this.transformG=t.transformG,this.transformB=t.transformB}load(){return this.status="loading",this.promise=new Promise(((e,t)=>{var n=new Image;n.crossOrigin="Anonymous",n.onload=()=>{this.data=vm(n),this.status="loaded";var t=((e,t)=>{var n,i,r,a,o=new ArrayBuffer(28),s=new Uint8Array(o),l=new Float32Array(o),c=4*t*4+8;for(a=0;a<28;a++)n=e[c],i=e[c+1],r=e[c+2],n=Math.round(n/64),i=Math.round(i/16),r=Math.round(r/64),s[a]=(n<<6)+(i<<2)+r,c+=16;return l})(this.data,257),i=t[0],r=(t[1]-t[0])/255,a=t[2],o=(t[3]-t[2])/255,s=t[4],l=(t[5]-t[4])/255;this.headerPars=[r,i,o,a,l,s],this.decodeR=this.transformR?e=>this.transformR(e*r+i):e=>e*r+i,this.decodeG=this.transformG?e=>this.transformG(e*o+a):e=>e*o+a,this.decodeB=this.transformB?e=>this.transformB(e*l+s):e=>e*l+s,hm=0,e(this)},n.onerror=()=>{this.status="failed",Nn.emit("loadingFailed",this.url),++hm>pm&&(ct(),hm=0),t({message:"Failed to load tile",url:this.url})},n.src=this.url,(n.complete||void 0===n.complete)&&(n.src=re,n.src=this.url)})),this.promise}}var gm,wm={loadTile:e=>{var t=e.url,n=mm.get(t);if(!n){var i=new fm(t,e);return mm.put(t,i),i.load()}switch(n.status){case"loaded":return Promise.resolve(n);case"loading":return n.promise;case"failed":return mm.remove(t),Promise.reject({message:"Failed to load tile",url:t});default:return Promise.reject({message:"Unknown tile state",url:t})}}},ym=Object.freeze({__proto__:null,DataTile:fm,dataLoader:wm}),bm=(e,t)=>{var n=256;e.width!=n&&(e.width=e.height=n);var i=e.getContext("2d");i.fillStyle="#888",i.fillRect(0,0,n,n),i.fillStyle=i.strokeStyle="#BBB",i.fillText("No data!",14,22),i.rect(3,3,250,250),i.stroke()},Tm=function(e,t,n,i,r){n===this.syncCounter&&um.processTile(this,t,i,r).then((n=>{n||((e,t,n,i,r)=>{gm||(gm=new Promise(((e,t)=>{Ac["legacy-tile-render"].load().then((n=>{if(n){var i=Ac["legacy-tile-render"].plugin;e(i)}else t()}))}))),gm.then((a=>{a.renderTile(e,t,n,i,r)}))})(this,e,t,i,r)}))},_m=Object.freeze({__proto__:null,renderNoDataTile:bm,renderTile:Tm}),Sm=L.GridLayer.extend({options:{maxZoom:11,updateWhenIdle:!!H,updateWhenZooming:!1,keepBuffer:H?1:4,disableTransformForTiles:!0},syncCounter:0,inMotion:!1,hasSea:!1,className:"overlay-layer",onAdd(e){return L.GridLayer.prototype.onAdd.call(this),e.on("movestart",this.onMoveStart,this),e.on("moveend",this.onMoveEnd,this),it.on("subscription",this.redrawLayer,this),this.on("load",this.checkLoaded,this),this},onRemove(e){return e.off("movestart",this.onMoveStart,this),e.off("moveend",this.onMoveEnd,this),it.off("subscription",this.redrawLayer,this),this.off("load",this.checkLoaded,this),L.GridLayer.prototype.onRemove.call(this,e),this.hasSea=!1,document.body.classList.remove("sea"),Il.emit("toggleSeaMask",this.hasSea),this.landOnly=!1,document.body.classList.remove("land"),Il.emit("toggleLandMask",this.landOnly),this},onMoveStart(){this.inMotion=!0},onMoveEnd(){this.inMotion=!1,this._loading||this.redrawFinished()},checkLoaded(){this.inMotion||this.redrawFinished()},redrawLayer(){var e=this._map,{min:t,max:n}=e.getPixelBounds(),i=t.divideBy(256)._floor(),r=n.divideBy(256)._floor(),a=L.bounds(i,r),o=Math.round(e.getZoom());if(o>11)this.redrawFinished();else{this.removeOtherTiles(o,a);var s=this.sortTilesFromCenterOut(a);this._tilesToLoad=s.length;for(var l=0;l<s.length;l++){var c=s[l],d=this._tileCoordsToKey(c);d in this._tiles?this.redrawTile(this._tiles[d]):--this._tilesToLoad||this.redrawFinished()}}},removeOtherTiles(e,t){var{min:n,max:i}=t;for(var r in this._tiles){var[a,o,s]=r.split(":");(+s!==e||+a<n.x||+a>i.x||+o<n.y||+o>i.y)&&this._removeTile(r)}},redrawTile(e){e.coords=this._wrapCoords(e.coords);var t=Ml(e.coords,this.latestParams),n=this.syncCounter;wm.loadTile(t).then((i=>{this.renderTile.call(this,2,e.el,n,t,i)})).catch((t=>{bm(e.el,null==t||t.url)})).then((()=>{--this._tilesToLoad||this.redrawFinished()}))},paramsChanged(e){e.fullPath===this.latestParams.fullPath&&e.layer===this.latestParams.layer||(this.latestParams=le(e),this.syncCounter++,this.redrawLayer())},sortTilesFromCenterOut(e){var t,n,i=[],r=e.getCenter(),a=this._tileZoom;for(t=e.min.y;t<=e.max.y;t++)for(n=e.min.x;n<=e.max.x;n++){var o=new L.Point(n,t);o.z=a,i.push(o)}return i.sort(((e,t)=>e.distanceTo(r)-t.distanceTo(r))),i},redrawFinished(){this.latestParams.sea!==this.hasSea&&(l(document.body,this.latestParams.sea,"sea"),this.hasSea=Boolean(this.latestParams.sea),Il.emit("toggleSeaMask",this.hasSea)),this.latestParams.landOnly!==this.landOnly&&(l(document.body,this.latestParams.landOnly,"land"),this.landOnly=this.latestParams.landOnly,Il.emit("toggleLandMask",this.landOnly)),Il.emit("rendered","tileLayer")},createTile(e,t){e=this._wrapCoords(e);var n=Ml(e,this.latestParams),i=L.DomUtil.create("canvas"),r=this.syncCounter;return i.width=i.height=256,i.style.width=i.style.height="256px",wm.loadTile(n).then((e=>{this.renderTile.call(this,2,i,r,n,e)})).catch((e=>{bm(i,null==e||e.url)})).then((()=>{t(void 0,i)})),i},init(e){this.latestParams=le(e)},renderTile:Tm}),Em=new Sm,Pm=Object.freeze({__proto__:null,tileLayer:Em});class Am{constructor(e){var t;o(this,"syncCounter",0),this.loader=null!==(t=null==e?void 0:e.loader)&&void 0!==t?t:wm}tilesReady(e,t,n){}getTiles(e){var t=Wd.getZoom();if(Math.floor(t)===t){this.syncCounter++;for(var n=Wd.getPixelBounds(),i=[],r=n.min.x>>8,a=n.max.x>>8,o=n.min.y>>8,s=n.max.y>>8,l=o;l<=s;l++)for(var c=r;c<=a;c++){var d=Ue({x:c,y:l,z:t});i.push(d)}var u=it.get("mapCoords"),h=le(u),m=Dl(e,t),{x:p,y:v}=Wd.getSize(),f=Object.assign(h,{pixelOriginX:n.min.x,pixelOriginY:n.min.y,dZoom:m,width:p,height:v,origTiles:{minX:r,minY:o,maxX:a,maxY:s}}),g={},w=[];i.forEach((t=>{var n,i=Ml(t,e),r=i&&(null===(n=this.processTile)||void 0===n?void 0:n.call(this,i,e));if(r&&!g[r.url]){g[r.url]=1;var a=this.loader.loadTile(r);w.push(a)}})),Promise.all(w).then(this.postProcess.bind(this,this.syncCounter,f,e))}}processTile(e,t){return e}postProcess(e,t,n,i){if(e===this.syncCounter){var r=this.sortTiles(t,n,i);this.trans=0|Nl(t.zoom,t.dZoom),this.shift=0|Math.log2(this.trans),this.lShift=0|Math.log2(this.trans*this.trans);var a=t.pixelOriginX/this.trans%256,o=t.pixelOriginY/this.trans%256;a<0&&(a=256+a),this.offsetX=a*this.trans|0,this.offsetY=o*this.trans|0,this.offset=2056,this.width=t.width,this.height=t.height,this.w=Fl(this.trans),this.tilesReady.call(this,r,t,n)}}sortTiles(e,t,n){for(var i,r,a=(n,i)=>{var r=Ue({x:n,y:i,z:e.zoom});return Ml(r,t)},o=[],s=e.origTiles.minY;s<=e.origTiles.maxY;s++){var l=a(e.origTiles.minX,s);if(!l||l.y!==r){i=null;for(var c=[],d=function(){var e=a(u,s);if(!e||e.x===i)return 1;var t=n.filter((t=>t.x===e.x&&t.y===e.y))[0];c.push(t),i=e.x,r=e.y},u=e.origTiles.minX;u<=e.origTiles.maxX;u++)d();c.length>0&&o.push(c)}}return o}}var Cm=Object.freeze({__proto__:null,DataTiler:Am});class Om extends Am{cb(e,t,n){0}createFun(e){this.cb=e,this.getTiles(Em.latestParams)}tilesReady(e,t,n){this.cb((i=>{var{lat:r,lon:a}=i,o=ye(a),s=Te(r),l=1<<t.dZoom,c=l-1,d=o*l,u=s*l,h=Math.floor(d),m=Math.floor(u);d-=h,u-=m;var p=((t,n,i)=>{for(var r=0;r<e.length;r++){var a=e[r];if(a.length&&a[0].y===n&&a[0].z===i)for(var o=0;o<a.length;o++){var s=a[o];if(s.x===t)return s}}})(h&=c,m&=c,t.dZoom),v=p&&p.data;if(!v)return NaN;var f=256*d,g=256*u,w=ge(Math.floor(f),0,255),y=ge(Math.floor(g),0,255);f-=w,g-=y;var b=4*(this.offset+w+257*y);if(n.PNGtransparency&&kl(v,b))return NaN;if(n.JPGtransparency&&Ul(v,b))return NaN;var T=v[b],_=v[b+4],S=v[b+1],E=v[b+5],P=v[b+2],A=v[b+6],C=v[b+=1028],O=v[b+4],I=v[b+1],R=v[b+5],L=v[b+2],N=v[b+6],x=1-f,D=1-g,M=D*x,U=D*f,k=g*x,W=g*f,F=T*M+_*U+C*k+O*W,G=n.interpolateNearestG?jl(null,0,S,E,I,R,M,U,k,W):S*M+E*U+I*k+R*W,H=P*M+A*U+L*k+N*W;return[p.decodeR(F),p.decodeG(G),p.decodeB(H)]}),((t,i)=>{var r=i+this.offsetY>>this.shift,a=r>>8,o=r-(a<<8),s=(i+this.offsetY)%this.trans,l=t+this.offsetX>>this.shift,c=l>>8,d=l-(c<<8),u=(t+this.offsetX)%this.trans,h=this.trans,m=e&&e[a]&&e[a][c];if(!m)return console.warn("interpolator: Undefined dTile"),NaN;var p=m.data;if(!p)return console.warn("interpolator: Undefined dTile.data"),NaN;var v=this.offset+d+(o<<8)+o<<2;if(n.PNGtransparency&&kl(p,v))return NaN;if(n.JPGtransparency&&Ul(p,v))return NaN;var f=p[v],g=p[v+4],w=p[v+1],y=p[v+5],b=p[v+2],T=p[v+6],_=p[v+=1028],S=p[v+4],E=p[v+1],P=p[v+5],A=p[v+2],C=p[v+6],O=(h-s)*(h-u),I=(h-s)*u,R=s*(h-u),L=u*s,N=h*h,x=(f*O+g*I+_*R+S*L)/N,D=n.interpolateNearestG?jl(null,0,w,y,E,P,O,I,R,L):(w*O+y*I+E*R+P*L)/N,M=(b*O+T*I+A*R+C*L)/N;return[m.decodeR(x),m.decodeG(D),m.decodeB(M)]}))}}var Im=new Om,Rm=Object.freeze({__proto__:null,TileInterpolator:Om,tileInterpolator:Im});class Lm extends Yh{constructor(e){super(e),this.interpolator=Im,this.paramsChanged=Em.paramsChanged.bind(Em),this.redraw=Em.redrawLayer.bind(Em)}onopen(e){Wd.hasLayer(Em)?Em.paramsChanged.call(Em,e):(Em.init(e),Em.addTo(Wd),Em.getContainer().classList.add("overlay-layer")),um.init()}close(e){super.close(e),e.includes("tileLayer")||e.includes("daySwitcher")||e.includes("accumulations")||e.includes("noUserControl")||Wd.removeLayer.call(Wd,Em)}}var Nm,xm=Object.freeze({__proto__:null,TileLayer:Lm}),Dm={tileLayer:new Lm({ident:"tileLayer",userControl:H?"mobile-calendar":"progress-bar"}),noUserControl:new Lm({ident:"noUserControl",userControl:"none"}),radar:new Yh({ident:"radar",dependency:"radar",userControl:"radar"}),satellite:new Yh({ident:"satellite",dependency:"satellite",userControl:"satellite"}),radarPlus:new Yh({ident:"radarPlus",dependency:"radar-plus",userControl:"radar-plus"}),capAlerts:new Yh({ident:"capAlerts",dependency:"cap-alerts",userControl:"cap-alerts"}),isolines:new Yh({ident:"isolines",dependency:"isolines"}),particles:"desktop"!==y||"embed2"===W.target||it.get("disableWebGL")?new Yh({ident:"particles",dependency:"particles"}):new Yh({ident:"particles",dependency:"gl-particles"}),daySwitcher:new Lm({ident:"daySwitcher",userControl:"day-switcher"}),accumulations:new Lm({ident:"accumulations",userControl:"accumulations"}),topoMap:new class extends Yh{constructor(){super(...arguments),o(this,"baseLayer",null)}open(e){return this.isOpen=!0,this.interpolator={createFun:e=>{e(ie,ie)}},Od(Wd),this.addOrUpdateBaseLayer(),it.on("map",this.addOrUpdateBaseLayer,this),Promise.resolve()}close(e){super.close(e),this.removeBaseLayer(),it.off("map",this.addOrUpdateBaseLayer,this),Cd(Wd)}addOrUpdateBaseLayer(){this.removeBaseLayer();var e=it.get("map"),t=Ad();this.baseLayer=new L.TileLayer(t[e],{detectRetina:!1,updateWhenIdle:!!H,updateWhenZooming:!1,className:"basemap-layer",keepBuffer:H?1:4}),document.body.dataset.map=e,this.baseLayer.addTo(Wd)}removeBaseLayer(){this.baseLayer&&(Wd.removeLayer(this.baseLayer),this.baseLayer=null)}}({ident:"topoMap",userControl:"map-selector"})},Mm=Object.keys(Dm),Um=null,km=0,Wm=null,Fm=ce((()=>{Nn.emit("redrawFinished",Um)}),200);function Gm(){clearTimeout(Wm),Wm=null}function Hm(){km=0,Nn.emit("redrawFinished",Um)}Nn.on("paramsChanged",(function(e){Um=e,Gm();var t=Al[e.overlay].layers.slice(),n=[];e.isolinesOn&&t.unshift("".concat(e.isolinesType,"Isolines"));var i=t.map((t=>{var i=is[t];return n.push(i.renderer),{renderer:i.renderer,params:i.getParams(e,e.product)}})),r=n.filter((e=>"userControl"in Dm[e])).map((e=>Dm[e].userControl))[0];Mm.forEach((e=>{var t=Dm[e];n.indexOf(e)<0&&t.isOpen&&t.close.call(t,n)}));var a=[],o=i.map((e=>e.params.then((t=>{var n=Dm[e.renderer];n.isOpen?n.paramsChanged.call(n,t):a.push(n.open.call(n,t))}))));Promise.all(o).then((()=>{var e=()=>{if(r!==Nm){var e,t;if(Nm&&"none"!==Nm)null===(e=Ac[Nm])||void 0===e||e.close({disableClosingAnimation:!0});if(r&&"none"!==r)null===(t=Ac[r])||void 0===t||t.open({disableOpeningAnimation:!0});Nm=r}};a.length>0?Promise.all(a).then(e).catch((t=>{e(),xe("renderCtrl","Unable to load render",t)})):e(),km=i.length,Wm=setTimeout(Hm,5e3)}))})),Nn.on("redrawLayers",(function(){km=0,se(Dm,(e=>{e.isOpen&&(e.redraw(),km++)}))})),Wd.on("movestart",(function(){var e=Um&&Al[Um.overlay];km=e?e.layers.length:0})),Il.on("rendered",(function(){--km<=0&&(Gm(),Fm())}));var zm=Object.freeze({__proto__:null});var Bm=ce((function(e){var t=it.get("overlay"),n=it.get("product"),i=it.get("level");if([void 0,"overlay","product"].includes(e)){var r=Cl(t,n);r.length||xe("params","Unexpected empty levels for overlay ".concat(t," and product ").concat(n)),it.set("availLevels",r),l(document.body,r.length>1,"has-more-levels"),r.includes(i)||(i=r[0],it.set("level",i))}var a={acRange:Math.floor(it.get("acRange")),isolinesType:it.get("isolinesType"),isolinesOn:it.get("isolinesOn"),level:i,overlay:t,path:it.get("path"),product:n};Nn.emit("paramsChanged",a,e)}),100),jm=Ni.createVirtualCalendar.call(jr.ecmwf);it.setDefault("calendar",jm),it.setDefault("path",jm.ts2path(Date.now())),it.defineProperty("timestamp","syncSet",(e=>{"string"==typeof e&&(e=parseInt(e));var t=it.get("calendar");return t&&(e=t.boundTs(e),it.set("path",t.ts2path(e))),e})),it.defineProperty("product","asyncSet",(e=>new Promise(((t,n)=>{var i=jr[e];jr[it.get("product")].close(),i.open().then((n=>{if(c(/product-\S+/,"product-".concat(e)),n){var r;it.set("calendar",n);var{end:a,start:o}=n,s=it.get("timestamp"),l=Cn(null!==(r=n.timestamps)&&void 0!==r?r:[],s,!0);if(void 0!==l&&(s=n.timestamps[l]),i.hasAccumulations)if(s+it.get("acRange")*q>a){var d=Math.floor((a-it.get("timestamp"))/q);d>=12?it.set("acRange",d):(it.set("timestamp",a-12*q),it.set("acRange",12))}else it.set("timestamp",s);else if(s<o||s>a){var u=ge(s,o,a);it.set("timestamp",u)}}it.set("preferredProduct",i.preferredProduct),t(e)})).catch(n)}))));var Vm=(e,t)=>{var n=Al[e],i=Al[t];c(/overlay-\S+/,"overlay-".concat(e)),it.set("availProducts",$d[e]),i&&i.onclose&&i.onclose.call(i),n&&n.onopen&&n.onopen()};it.defineProperty("overlay","asyncSet",(e=>{var t=it.get("overlay"),n=iu(e,it.get("product"));return n===it.get("product")?(Vm(e,t),Promise.resolve(e)):new Promise((i=>{it.set("product",n).then((()=>{Vm(e,t),i(e)}))}))}));["acRange","level","isolinesType","isolinesOn","path","overlay","product"].forEach((e=>{it.on(e,Bm.bind(null,e))}));var Ym={forceChange:!0},Zm=ad||oi()&&it.get("startUpOverlay")||"wind",qm=od||oi()&&it.get("startUpLastProduct")||"ecmwf";it.set("product",qm,Ym),it.set("overlay",Zm,Ym),oi()&&1===it.get("startUpLastStep")&&it.set("detail1h",!0),it.on("detail1h",(e=>{if(oi()){var t=it.get("startUpLastStep");it.set("startUpLastStep",t?e?1:3:null)}}));var Xm=Object.freeze({__proto__:null}),Qm=[{bindStore:"displayAdStations",checkboxText:H?"Airport":"Airp."},{bindStore:"displayWMOStations",checkboxText:"WMO"},{bindStore:"displayMadisPWStations",checkboxText:"PWS"},{bindStore:"displayShipStations",checkboxText:"ShipBuoy"}],Jm={favs:[],cities:[],wind:Qm,temp:Qm,precip:[],metars:[{bindStore:"displayAirspaces",checkboxTranslation:"MAP_AIRSPACES"},{bindStore:"displayHeliports",checkboxTranslation:"METAR_HELIPORTS"}],cams:[{bindStore:"camsPreviews",checkboxTranslation:"CAMS_PREVIEWS"}],pgspots:[],kitespots:[],surfspots:[],tide:[],radiation:[],firespots:[],airq:[],radiosonde:[],empty:[]},$m=function(){var e=i((function*(){var e=it.get("pois"),t=it.get("poisTemporary");return Boolean("favs"===e&&(yield wh((e=>"route"!==e.type))))||"empty"!==e||"empty"!==t}));return function(){return e.apply(this,arguments)}}(),Km=function(){var e=i((function*(){(yield $m())&&(Nn.emit("rqstOpen","poi-libs"),it.off("pois",Km),it.off("poisTemporary",Km))}));return function(){return e.apply(this,arguments)}}();Nn.once("redrawFinished",i((function*(){th()||"favs"!==it.get("pois")||it.set("pois","empty"),(yield $m())?Km():(it.on("pois",Km),it.on("poisTemporary",Km))})));var ep=Object.freeze({__proto__:null,displayPoiOnMap:$m,poisCheckboxes:Jm}),tp=Object.freeze({__proto__:null,get:(e,t)=>{var{lat:n,lon:i}=e,r=it.get("usedLang"),a=t||Wd.getZoom();return new Promise((e=>{Dt("/reverse/v3/".concat(n,"/").concat(i,"/").concat(a,"?lang=").concat(r),{ttl:864e5}).then((t=>{var{data:a}=t,{locality:o,suburb:s,city:l,county:c,district:d,state:u,country:h,island:m}=a,p=c||d||u||"",v=s||o,f=v&&l&&v!==l?"".concat(v,", ").concat(l):v||s||l||m||p||u&&"".concat(u,", ").concat(h)||h;e({lat:n,lon:i,lang:r,region:p,country:h||"",name:f||hd(n,i),nameValid:!!f})})).catch((t=>{e({lat:n,lon:i,lang:r,name:hd(n,i)})}))}))}}),np=e=>e in Ac&&Ac[e]||null;function ip(e){var t=np(e);t&&!t.neverClose&&t.close()}function rp(e,t){for(var n of Object.keys(Ac)){var i=Ac[n];if(i&&i.isOpen&&i.pane===t&&n!==e)return i}}var ap=(e,t)=>{t.forEach((t=>{var n=rp(e,t);null==n||n.close({disableClosingAnimation:!0})}))};Nn.on("rqstOpen",(function(e,t){var n=e in Ac?Ac[e]:null;if(n){var i=e=>n.open({params:t,disableOpeningAnimation:e});if(n.pane){var r=n.pane;switch(r){case"bottom":case"small-bottom-bottom":ap(e,"map-selector"===e?["fullscreen-mobile"]:["bottom","rhpane","top","fullscreen-mobile"]),i();break;case"center":ap(e,["rhpane","center","fullscreen-mobile"]),i();break;case"fullscreen-mobile":case"rhpane":if(ap(e,["bottom","center"]),Ac.multimodel.close({disableClosingAnimation:!0}),F)ap(e,["rhpane","nearest","fullscreen-mobile"]),i();else{var a=rp(e,r),o=Boolean(a);if(a&&("radiosonde"===a.ident&&"sounding"===e||"sounding"===a.ident&&"radiosonde"===e))return null==a||a.close({disableClosingAnimation:o}),void i(o);i(o).then((()=>{null==a||a.close({disableClosingAnimation:o})}))}break;default:ap(e,[r]),i()}}else i()}else xe("pluginCtrl","Attempt to open non existent plugin: ".concat(e))})),Nn.on("rqstClose",ip),Nn.on("closeAllPlugins",(function(e){se(Ac,((t,n)=>{t.pane&&t.isOpen&&e!==n&&ip(n)}))}));var op=Object.freeze({__proto__:null}),sp=function(){var e=i((function*(e,t){return new Promise(((n,i)=>{import(e).then((r=>{try{var{__pluginConfig:o}=r,{name:s,internal:l}=o;if("string"!=typeof s||!/^windy-plugin-([a-z0-9-]+)$/.test(s))throw new Error("Plugin name MUST be prefixed with windy-plugin- string and can contain only lowercase letters, numbers and dashes");var c=it.get("installedPlugins").filter((t=>t.name!==s&&t.url!==e)),d=a(a({},o),{},{url:e,installedBy:t,installed:Date.now()}),u=[...c,d];Ac[s]=new uc({ident:s},d),l||it.set("installedPlugins",u),n(d)}catch(e){i({type:"installation",msg:e.message})}})).catch((e=>{i({type:"network",msg:e.message})}))}))}));return function(t,n){return e.apply(this,arguments)}}(),lp=Object.freeze({__proto__:null,installExternalPlugin:sp});class cp{constructor(e){var t;this.initProperties(),this.el=e.el,this.stopPropagation=null!==(t=e.stopPropagation)&&void 0!==t&&t,e.click&&(this.click=e.click),this.el.addEventListener("click",this.onevent.bind(this))}initProperties(){}click(e,t,n){}onevent(e){var t;if(e&&(e.target instanceof HTMLElement||e.target instanceof SVGElement)){var n,i=e.target,r=Boolean("A"===i.nodeName&&(null===(t=i.href)||void 0===t?void 0:t.length));for(this.stopPropagation&&!r&&(e.preventDefault(),e.stopPropagation());i&&i!==this.el;){if(i&&i.dataset&&(n=i.dataset.do)){var a=n.split(","),o=a[0];return void("bcast"===o?(Nn.emit(a[1]),e.stopPropagation()):"rqstOpen"===o||"rqstClose"===o||"rqstToggle"===o?(Nn.emit.apply(Nn,a),e.stopPropagation()):this.click.apply(this,a))}i=i.parentElement}}}}var dp=Object.freeze({__proto__:null,ClickHandler:cp}),up=()=>{var e="Great stuff on Windy.com",t=Wc();navigator.share?navigator.share({text:e,url:t}).catch((e=>{"AbortError"!==(null==e?void 0:e.name)&&xe("nativeShareDialog",e)})):Nn.emit("rqstOpen","share")},hp=Object.freeze({__proto__:null,share:up});new cp({el:document.body}),Nn.once("dependenciesResolved",(()=>{H?H&&Nn.emit("rqstOpen","mobile-ui"):(Nn.emit("rqstOpen","rhpane-top"),Nn.emit("rqstOpen","rhbottom"))}));var mp=ce((()=>{var e,t,n=Wd.getZoom(),i=it.get("mapLibrary"),r=it.get("overlay");n>11&&"globe"!==i&&(null===(e=Ac["map-selector"])||void 0===e||!e.isOpen)?Nn.emit("rqstOpen","map-selector"):n<=11&&null!==(t=Ac["map-selector"])&&void 0!==t&&t.isOpen&&"topoMap"!==r&&Nn.emit("rqstClose","map-selector")}),200);Wd.on("zoomend",mp),mp();var pp=null;if(it.on("connection",(e=>{e?(pp&&(pp.close(),pp=null),setTimeout((()=>{pp=new Rn({ident:"message-app-online",className:"top-message bg-ok clickable",html:rn.MSG_ONLINE_APP,timeout:1e4,onopen(){this.node.onclick=()=>window.location.reload()}}).open()}),500)):pp=new Rn({ident:"message-app-offline",className:"top-message bg-error",html:rn.MSG_OFFLINE}).open()})),!H){var vp=Ie('[data-ref="desktopShareButton"]');null==vp||vp.addEventListener("click",up)}if(window.top!==window.self)throw(document.getElementById("unlegal-embed")||document.body).style.display="block",new Error("Unlegal embed");addEventListener("popstate",(e=>{var{state:t}=e,{url:n,search:i}=t,r=$c(i),a=ed(i);Kc(n,"back-button",r)||Nn.emit("closeAllPlugins"),a&&a.sharedCoords&&Gd(a.sharedCoords)}));var fp=!1,gp=ce((()=>{fp=!0,document.body.classList.remove("loading-path")}),300);Nn.on("paramsChanged",(function(e,t){"path"===t&&(fp=!1,setTimeout((()=>{fp||document.body.classList.add("loading-path")}),200))})),Nn.on("redrawFinished",gp),Nn.on("loadingFailed",gp),it.on("connection",(e=>!e&&gp()));var wp,yp=Object.freeze({__proto__:null}),bp=function(){var e=i((function*(e){return(yield Si.get(e))||{id:e,displayed:0,ts:Date.now()}}));return function(t){return e.apply(this,arguments)}}(),Tp=function(){var e=i((function*(e,t){yield Si.put(e,{id:e,displayed:t,ts:Date.now()})}));return function(t,n){return e.apply(this,arguments)}}(),_p=function(){var e=i((function*(e){var{displayed:t}=yield bp(e);yield Tp(e,t+1),ti("promo",e)}));return function(t){return e.apply(this,arguments)}}(),Sp=Object.freeze({__proto__:null,getCounter:bp,hitCounter:_p,neverSee:e=>{Tp(e,1e3)}}),Ep=function(){var e=i((function*(e){if(it.get("sessionCounter")<=3&&!th())return!1;var{displayed:t}=yield bp(e.id);return!t&&(_p(e.id),Gp(),Nn.emit("rqstOpen","startup-whats-new",{data:e}),!0)}));return function(t){return e.apply(this,arguments)}}(),Pp=function(){var e=i((function*(){var{lat:e,lon:t}=yield bd(),n={language:it.get("usedLang"),country:it.get("country"),target:w,device:b,version:g,platform:y,lat:e,lon:t},{data:{"hp-articles":i,"whats-new":r}}=yield Dt("/articles/startup",{qs:n});!(r&&(yield Ep(r)))&&i&&it.get("startupWeatherShown")&&Nn.emit("rqstOpen","startup-articles",{data:i})}));return function(){return e.apply(this,arguments)}}(),Ap=Object.freeze({__proto__:null,loadArticlesOrWhatsNew:Pp}),Cp=!1,Op=!1,Ip=!1,Rp=["rhpane","bottom","top"],Lp=Wd.getContainer(),Np=function(){var e=i((function*(){return Boolean(yield wh((e=>Boolean(e.pin2homepage&&e.pin2homepage>0))))}));return function(){return e.apply(this,arguments)}}(),xp=function(){var e=i((function*(){return!H&&it.get("persistentWidgets")&&(yield Np())}));return function(){return e.apply(this,arguments)}}();function Dp(){Op||(document.body.addEventListener("click",Fp,!0),Lp.addEventListener("touchstart",Gp,!0),document.body.addEventListener("keydown",Gp),Op=!0)}function Mp(){Ip||(Nn.on("pluginOpened",Vp),Nn.on("pluginClosed",Zp),Ip=!0)}function Up(e,t){return kp.apply(this,arguments)}function kp(){return(kp=i((function*(e,t){if(!Cp){var n="".concat(oe(e.lat),"/").concat(oe(e.lon)),i={wx:qr("ecmwf",e,{setup:"summary",includeNow:"true",source:"hp"},{cache:!1}),capAlerts:Dt("/capalerts/".concat(n,"?lang=").concat(it.get("usedLang")),{cache:!1})};setTimeout((()=>{Nn.emit("rqstOpen","startup-weather",{coords:e,promises:i})}),0),t&&setTimeout((()=>{Pp()}),1e3),(yield Np())&&Nn.emit("rqstOpen","pin-to-homepage")}}))).apply(this,arguments)}var Wp=ce((function(){ud({getMeFallbackGps:!0}).then((e=>{Up(e),Gd({lat:e.lat,lon:e.lon,zoom:8}),wp&&Wd.removeLayer(wp),wp=L.marker([e.lat,e.lon],{icon:Fd.myLocationIcon}).addTo(Wd),setTimeout(Wd.removeLayer.bind(Wd,wp),12e4)}))}),300);function Fp(e){if(e&&e.target)for(var t=e.target;t&&t!==document.body;){if(t&&t.dataset&&"hp"===t.dataset.ignore)return;t=t.parentElement}Gp(e)}function Gp(e){return Hp.apply(this,arguments)}function Hp(){return Hp=i((function*(e){Cp=!0,_c(),bc("");var t=null==e?void 0:e.target;t instanceof HTMLElement&&"q"===t.id&&yc.focus(),Nn.emit("rqstClose","startup-weather"),Nn.emit("rqstClose","startup-articles"),(yield xp())||(Nn.emit("rqstClose","pin-to-homepage"),Op&&(document.body.removeEventListener("click",Fp,!0),Lp.removeEventListener("touchstart",Gp,!0),document.body.removeEventListener("keydown",Gp),Op=!1))})),Hp.apply(this,arguments)}function zp(){return(zp=i((function*(){F||Tc(),Dp(),(yield xp())&&Mp(),Up(yield bd())}))).apply(this,arguments)}function Bp(){return jp.apply(this,arguments)}function jp(){return(jp=i((function*(){Dp(),Nn.emit("closeAllPlugins","startup-weather"),it.set("timestamp",Date.now()),Cp=!1;var e=yield bd();Up(e,!0),Gd({lat:e.lat,lon:e.lon,zoom:5})}))).apply(this,arguments)}function Vp(e){return Yp.apply(this,arguments)}function Yp(){return(Yp=i((function*(e){if(yield xp()){var t=Ac[e];Rp.includes(null==t?void 0:t.pane)&&Nn.emit("rqstClose","pin-to-homepage")}}))).apply(this,arguments)}function Zp(e){return qp.apply(this,arguments)}function qp(){return(qp=i((function*(e){var t;(yield xp())&&(Rp.includes(null===(t=Ac[e])||void 0===t?void 0:t.pane)&&!Object.values(Ac).filter((e=>e.isOpen)).some((e=>Rp.includes(e.pane)))&&!Ac.search.isOpen&&(Cp=!1,Nn.emit("rqstOpen","pin-to-homepage")))}))).apply(this,arguments)}Nn.on("back2home",Bp);it.get("showWeather")&&Nn.once("routerParsed",(e=>!e&&function(){return zp.apply(this,arguments)}())),H||it.on("persistentWidgets",function(){var e=i((function*(e){e&&(yield Np())?(Mp(),Dp()):(Ip&&(Nn.off("pluginOpened",Vp),Nn.off("pluginClosed",Zp),Ip=!1),Dp())}));return function(t){return e.apply(this,arguments)}}());var Xp=Ie('[data-ref="searchBetterLocation"]');if(Xp&&(Xp.onclick=()=>Wp()),!F){var Qp=Ie('[data-ref="back2home"]');Qp&&(Qp.onclick=Bp)}var Jp=Object.freeze({__proto__:null,back2home:Bp,getCancelShow:()=>Cp,hide:Gp});F||document.body.addEventListener("keydown",(function(e){var t,n,{key:i}=e,r=!1;if("ArrowLeft"!==i&&"ArrowRight"!==i||e.shiftKey||!(t="calendar"in(n=jr[it.get("product")])?n:null))"f"===i?(Nn.emit("rqstOpen","search"),r=!0):"+"===i?(Nn.emit("zoomIn"),r=!0):"-"===i&&(Nn.emit("zoomOut"),r=!0);else{var a="ArrowRight"===i;t.moveTs.call(t,a,Al[it.get("overlay")].isAccu),r=!0}r&&e.preventDefault()}),!1);var $p=Object.freeze({__proto__:null}),Kp=document.body.classList;Nn.once("dependenciesResolved",(function(){setInterval((()=>{Kp.add("animate-logo"),setTimeout((()=>Kp.remove("animate-logo")),2e3)}),3e4)}));var ev=ce((()=>{var e=it.get("timestamp"),t=jr[it.get("product")],n=Al[it.get("overlay")],i=null==t?void 0:t.calendar,r=e+(n.isAccu?it.get("acRange")*q:0),a=Boolean((null==i?void 0:i.premiumStart)&&r>i.premiumStart),o=oi();l(document.body,!o&&a,"premium-calendar")}),500);oi()||(it.on("subscription",ev),Nn.on("redrawFinished",ev));var tv,nv,iv,rv,av=Object.freeze({__proto__:null}),ov=!1,sv=2,lv=0,cv=!1,dv=50,uv=()=>it.set("animation",!1),hv=e=>{"picker-mobile"!==e&&uv()},mv=e=>{e||uv()},pv=e=>iv=e.path,vv=e=>/Accu$/.test(e)&&uv(),fv=e=>{cv=rv!==iv,rv=e.path};function gv(){sv=ge(sv+(cv?-.25:.1),.8,3);var e=it.get("timestamp")+lv*sv;e<nv.calendar.end?(it.set("timestamp",e),tv=setTimeout(gv,dv)):uv()}function wv(){(nv=jr[it.get("product")]).animation?(ov=!0,rv=iv=it.get("path"),sv=2,lv=dv*((()=>{var{timestamps:e}=nv.calendar;return e[1]-e[0]<2*q})()?nv.animationSpeed1h:nv.animationSpeed),it.get("timestamp")+lv*sv>=nv.calendar.end&&it.set("timestamp",Date.now()),it.on("visibility",mv),it.on("product",uv),it.on("overlay",vv),Nn.on("redrawFinished",pv),Nn.on("paramsChanged",fv),Nn.on("pluginOpened",hv),gv(),ti("events","animation-started")):uv()}it.on("animation",(e=>{e!==ov&&(e?wv():(ov=!1,clearTimeout(tv),it.off("visibility",mv),it.off("product",uv),it.off("overlay",vv),Nn.off("redrawFinished",pv),Nn.off("paramsChanged",fv),Nn.off("pluginOpened",hv)))}));var yv=Object.freeze({__proto__:null});"hidden"in document&&document.addEventListener("visibilitychange",(()=>{it.set("visibility",!document.hidden)}));var bv=Object.freeze({__proto__:null});class Tv{constructor(e){var t,n,i,r,a,s,l,c,d;o(this,"stylesBlue",["rgba(200,0,150,1)","rgba(200,0,150,1)","rgba(200,0,150,1)","rgba(200,0,150,1)"]),o(this,"zoom2speed",[.5,.5,.5,.6,.7,.8,.9,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]),o(this,"level2reduce",{surface:1,"100m":1,"975h":1,"950h":1,"925h":.98,"900h":.9,"850h":.8,"800h":.77,"700h":.7,"600h":.65,"500h":.6,"400h":.55,"300h":.5,"250h":.45,"200h":.45,"150h":.35,"10h":.25}),o(this,"colors",[[200,215,235,255],[215,235,255,255],[235,255,255,255],[255,255,255,255]]),this.config=it.get("particles"),this.configurable=null!==(t=e.configurable)&&void 0!==t&&t,this.animation=null!==(n=e.animation)&&void 0!==n?n:"dot",this.lineWidth=null!==(i=e.lineWidth)&&void 0!==i?i:[.6,.6,.6,1,1.2,1.6,1.8,2,2.2,2.4,2.4,2.4,2.4,2.6,2.8,3,3,3,3,3,3,3,3,3],it.on("particles",(e=>this.config=e)),this.multiplier=e.multiplier,this.velocity=e.velocity,this.styles=e.styles,this.glSpeedCurvePowParam=e.glSpeedCurvePowParam,this.glMinSpeedParam=e.glMinSpeedParam,this.glMaxSpeedParam=e.glMaxSpeedParam,this.glParticleWidth=e.glParticleWidth,this.glParticleLengthEx=e.glParticleLengthEx,this.glSpeedPx=e.glSpeedPx,this.glCountMul=e.glCountMul,this.glVelocity=null!==(r=e.glVelocity)&&void 0!==r?r:1,this.glOpacity=null!==(a=e.glOpacity)&&void 0!==a?a:1,this.glBlending=null!==(s=e.glBlending)&&void 0!==s?s:1,this.getBlendingAlpha=null!==(l=e.getBlendingAlpha)&&void 0!==l?l:this.getBlendingAlpha,this.getIntensityFun=null!==(c=e.getIntensityFun)&&void 0!==c?c:this.getIntensityFun,this.getStyles=null!==(d=e.getStyles)&&void 0!==d?d:this.getStyles}getIntensityFun(){return e=>Math.min(3,Math.floor(e/40))}getVelocityFun(e){var t=this.zoom2speed[e.zoom],n=this.configurable?this.config.velocity:1,i=t*n*this.level2reduce[e.level]*this.velocity.max,r=t*n*this.velocity.damper;return function(e){return i*(1-1/(r*i*e-1))}}getAmountMultiplier(){return this.configurable?this.config.multiplier:1}getAmount(e){var t=e.speed2pixel<1?1+1.5*(1-e.speed2pixel):1,n=this.getAmountMultiplier(),i=1/(this.multiplier.constant*Math.pow(n*this.multiplier.pow,e.zoom-this.multiplier.zoom));return 0|Math.min(15e3,Math.round(t*e.width*e.height*i))}getLineWidth(e){return(this.configurable?this.config.width:1)*this.lineWidth[e.zoom]}getStyles(e){var t=this.configurable?this.config.opacity:1;if(e.zoom>=12)return this.stylesBlue;if(t<=1)return this.colors[0].map((function(e){return"rgba("+e+","+e+","+e+","+t.toFixed(1)+")"}));var n=Math.min(3,Math.round(1.5*t));return this.colors[n].map((function(e){return"rgba("+e+","+e+","+e+",1)"}))}getMaxAge(){return 100}getBlendingAlpha(e){var t=.9*(this.configurable&&1!=this.config.blending?this.config.blending:1)*(e.speed2pixel<.8?1+(.8-e.speed2pixel)/7:1);return Math.min(.98,2*Math.round(100*t/2)/100).toFixed(2)}}var _v=Object.freeze({__proto__:null,Particles:Tv}),Sv=()=>{for(var e in Dm){var t=Dm[e];if(t.isOpen&&"interpolator"in t)return t.interpolator}},Ev=Object.freeze({__proto__:null,getLatLonInterpolator:()=>new Promise((e=>{var t=Sv();t?t.createFun((t=>e(t))):e(null)})),getXYInterpolator:()=>new Promise((e=>{var t=Sv();t?t.createFun(((t,n)=>e(n))):e(null)}))}),Pv={wind:new Tv({configurable:!0,multiplier:{constant:50,pow:1.6,zoom:2},velocity:{max:.1,damper:1e-5},glSpeedCurvePowParam:.7,glMinSpeedParam:1.5,glMaxSpeedParam:30,glParticleWidth:1.3,glParticleLengthEx:.1,glSpeedPx:100,glCountMul:1}),currents:new Tv({multiplier:{constant:50,pow:1.5,zoom:2},velocity:{max:.4,damper:.35},glSpeedCurvePowParam:.4,glMinSpeedParam:.2,glMaxSpeedParam:1.2,glParticleWidth:.6,glParticleLengthEx:.1,glSpeedPx:50,glVelocity:1,glOpacity:1.3,glBlending:1.05,glCountMul:4,getBlendingAlpha:()=>.96}),waves:new Tv({animation:"wavecle",styles:["rgba(100,100,100,0.25)","rgba(150,150,150,0.3)","rgba(200,200,200,0.35)","rgba(255,255,255,0.4)"],lineWidth:[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],multiplier:{constant:50,pow:1.3,zoom:2},velocity:{max:.02,damper:.015},glSpeedCurvePowParam:1,glMinSpeedParam:.5,glMaxSpeedParam:10,glParticleWidth:5.5,glParticleLengthEx:1,glSpeedPx:8,glVelocity:1,glOpacity:1.6,glBlending:.93,glCountMul:1.5,getIntensityFun:()=>e=>e<12?0:e<25?1:e<37?2:e<62?3:e<75?2:e<85?1:0,getStyles(){return this.styles},getBlendingAlpha:()=>.9})},Av=new Set(["capAlerts","radar","satellite","wetbulbtemp","topoMap"]),Cv=new Set(["efi"]),Ov=new Set(["wind","temp"]);class Iv extends L.GridLayer{constructor(){super(...arguments),o(this,"options",{minZoom:3,maxZoom:11,pane:"markerPane",className:"labels-layer",updateWhenIdle:!0,updateWhenZooming:!1,keepBuffer:H?2:4}),o(this,"cityDivs",{}),o(this,"ts",it.get("timestamp")),o(this,"hasHooks",!1),o(this,"forecastLoaded",!1)}onAdd(){return this.hasHooks||(this.updateProduct(),this.createTilesUrl(),tc.on("poi-label",this.onClick,this),it.on("timestamp",this.onTsChange,this),it.on("usedLang",this.updateLabels,this),it.on("englishLabels",this.updateLabels,this),it.on("product",this.updateProduct.bind(this,!0)),it.on("overlay",this.updateProduct.bind(this,!0)),it.on("pois",this.updateProduct.bind(this,!0)),Nn.on("metricChanged",this.onMetricChanged,this),this.hasHooks=!0),L.GridLayer.prototype.onAdd.call(this)}createTilesUrl(){var e=it.get("englishLabels")?"en":it.get("usedLang");this.tilesUrl="".concat(E,"/labels/v").concat("1.4","/").concat(e)}updateLabels(){this.createTilesUrl(),this._reset()}updateProduct(e){var t=it.get("product");jr[t].labelsTemp||(t="ecmwf");var n=jr[t].refTime.call(jr[t]);if((!this.forecastLoaded||this.product!==t||this.refTime!==n)&&(this.product=t,this.refTime=n,e))for(var i in this.cityDivs)this.loadTileForecast(this.cityDivs[i])}onClick(e){var{id:t,label:n}=e.dataset;if(t){var[i,r]=t.split("/");Nn.emit("rqstOpen","detail",{lat:+i,lon:+r,name:n,id:t,source:"label"})}}onTsChange(e){this.ts=e,this.refreshWeather()}onMetricChanged(e,t){"temp"===e&&(this.temperatureUnit=t,this.refreshWeather())}refreshWeather(){for(var e in this.cityDivs)for(var{labels:t,timestamps:n}=this.cityDivs[e],i=this.getIndexToCityTileData(n),r=0;r<t.length;r++)this.renderWeather(t[r],i)}_animateZoom(){this._removeAllTiles()}_reset(){this.redraw()}loadTileForecast(e){var t=it.get("overlay"),n=it.get("product"),i=it.get("pois");Av.has(t)||Cv.has(n)||Ov.has(i)||"cities"===i&&"temp"!==t||e.labels.length&&e.urlFrag&&this.product&&Jr(this.product,e.urlFrag).then((t=>{null!=t&&t.data&&(this.onForecastLoaded(e,t.data),this.forecastLoaded=!0)}))}onTileLoaded(e,t,n){var i=this.renderTile(t,e,n.data);return this.cityDivs[e.x+":"+e.y]=i,i}onForecastLoaded(e,t){if(t&&"object"==typeof t){var{forecast:n,reftime:i,hours:r}=t;e.timestamps=r.map((e=>i+e*q));var a=this.getIndexToCityTileData(e.timestamps);e.labels.forEach((e=>{var{id:t}=e;t in n?(e.data=n[t],this.renderWeather(e,a)):(e.data=void 0,e.el.removeAttribute("data-temp"))}))}else e.labels.forEach((e=>{e.data=void 0,e.el.removeAttribute("data-temp")}))}createTile(e,t){var n="".concat(e.z,"/").concat(e.x,"/").concat(e.y),i=L.DomUtil.create("div","leaflet-tile");return i.style.width=i.style.height=this.getTileSize()+"px",i.onselectstart=i.onmousemove=L.Util.falseFn,Dt("".concat(this.tilesUrl,"/").concat(n,".json"),{cache:!1}).then((t=>this.onTileLoaded(e,i,t))).then((e=>{e&&(e.urlFrag=n,this.loadTileForecast(e),t(void 0,i))})).catch(t),i}renderTile(e,t,n){for(var i=[],r=Wd.getZoom(),a=Math.pow(2,r-Math.round(r)),o=0;o<n.length;++o){var[s,l,c,d,u,h]=n[o],m="ci"!==c.substring(0,2),p=m?s:"".concat(u,"/").concat(d),v=document.createElement("div"),f=1<<t.z,g={x:ye(d),y:Te(u)},w={x:t.x/f,y:t.y/f},y={x:(t.x+1)/f,y:(t.y+1)/f},b={x:y.x-w.x,y:y.y-w.y},T={x:(g.x-w.x)/b.x*256,y:(g.y-w.y)/b.y*256};v.textContent=v.dataset.label=l,v.dataset.id=p,v.dataset.poi="label",v.className=c,v.style.transform="translate(-50%, -50%) translate(".concat(T.x,"px, ").concat(T.y,"px) scale(").concat(1/a,")"),v.style.width="".concat(h/a,"px"),m||i.push({id:p,el:v}),e.appendChild(v)}return{labels:i}}getIndexToCityTileData(e){if(null!=e&&e.length)return Cn(e,this.ts,!1)}renderWeather(e,t){if(e&&e.el){var{el:n,data:i}=e;null!=i&&i.length&&void 0!==t&&t>=0&&t<i.length?n.dataset.temp="".concat(Al.temp.convertNumber.call(Al.temp.m,i[t]),"°"):n.removeAttribute("data-temp")}}toArray(){var e=[];for(var t in this.cityDivs)e=e.concat(this.cityDivs[t].labels);return e}}var Rv=(e=>{var t={},n=Object.getPrototypeOf(e),i=Object.getOwnPropertyNames(n);for(var r of i)t[r]=n[r];var a=Object.getOwnPropertyNames(e);for(var o of a)t[o]=e[o];return t})(new Iv),Lv=L.GridLayer.extend(Rv),Nv=new Lv,xv="city-labels-disabled";Nn.once("dependenciesResolved",(()=>Nv.addTo(Wd)));var Dv=Object.freeze({__proto__:null,add:()=>{Wd.hasLayer(Nv)||Nv.addTo(Wd)},disable:()=>{document.body.classList.add(xv)},enable:()=>{document.body.classList.remove(xv)},labelsLayer:Nv,remove:()=>{Wd.hasLayer(Nv)&&Wd.removeLayer(Nv)}}),Mv=function(e){for(var t=it.get("mapLibrary"),n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];Nn.emit("".concat(t,"-").concat(e),...i)};Nn.on("zoomIn",Mv.bind(null,"zoomIn")),Nn.on("zoomOut",Mv.bind(null,"zoomOut")),Nn.on("paramsChanged",Mv.bind(null,"paramsChanged"));var Uv=Object.freeze({__proto__:null}),kv=H?Object.keys(Ac).map((e=>Ac[e])).filter((e=>e&&e.disableMobilePicker)):[],Wv=e=>{for(var t=0;t<kv.length;t++)if(kv[t].isOpen)return;Nn.emit("rqstOpen","picker-mobile",e)};H?(Wd.on("dragstart",(()=>Wv())),tc.on("click",(()=>Wv()))):tc.on("click",(e=>Nn.emit("rqstOpen","picker",e)));var Fv=new Ge({ident:"picker"});class Gv{constructor(){o(this,"lat",null),o(this,"lon",null),H&&(this.mapContainerEl=Ie("#map-container"),this.pickerDotEl=Ie("#picker-dot"),Wd.on("resize",this.positionChanged.bind(this)))}lockPosition(){var e=this.getLatLon();return this.lat=e.lat,this.lon=e.lon,e}unlockPosition(){this.lat=null,this.lon=null}setPosition(e,t){var{y:n}=this.getDotPosition();Hd(n,e,t),this.lat=e,this.lon=t}offsetPosition(e){this.mapContainerEl.style.transform=e>0?"translateY(-".concat(Math.floor(e/2),"px)"):""}resetOffset(){this.offsetPosition(0)}getLatLng(){var{x:e,y:t}=this.getDotPosition();return Wd.containerPointToLatLng([e,t])}getLatLon(){var{lat:e,lng:t}=this.getLatLng();return{lat:e,lon:t}}getDotPosition(){return{x:this.pickerDotEl.offsetLeft+this.pickerDotEl.offsetWidth/2,y:this.pickerDotEl.offsetTop+this.pickerDotEl.offsetHeight/2}}positionChanged(){null!==this.lat&&null!==this.lon&&this.setPosition(this.lat,this.lon)}}var Hv=new Gv,zv=Object.freeze({__proto__:null,PickerDot:Gv,emitter:Fv,pickerDot:Hv}),Bv=function(){var e=i((function*(e){var t=Date.now(),n=[],i=e.filter((e=>Date.now()<new Date(e.end).getTime())).filter((e=>e.filter()));for(var r of i){var{ts:a,displayed:o}=yield bp(r.id);(0===o||o<r.counter&&t-a>r.delay)&&n.push(r)}return n}));return function(t){return e.apply(this,arguments)}}(),jv=new Promise((e=>{it.get("startupWeatherShown")?e():it.once("startupWeatherShown",(t=>{t&&e()}))})),Vv=function(){var e=i((function*(){yield jv,Pp()}));return function(){return e.apply(this,arguments)}}(),Yv=function(){var e=i((function*(){var e="https://www.windy.com/patch/v8",t="?refTime=".concat((new Date).toISOString().replace(/^(.*):.*$/,"$1"));try{var{exclusivePromos:n,otherPromos:i,__css:r,__version:a}=yield import("".concat(e,"/patch.js").concat(t)),o=yield Bv(n),s=yield Bv(i);if(!o.length&&!s.length)return void Vv();var l="".concat(e,"/").concat(it.get("usedLang"),".json").concat(t),{data:c}=yield Dt(l,{cache:!1});if(c.__version!==a)throw new Error("Language file has different version than patch");if(delete c.__version,Object.assign(rn,c),r&&document.head.insertAdjacentHTML("beforeend",'<style id="client-patch">'.concat(r,"</style>")),s.length&&setTimeout((()=>{s.forEach((e=>e.run.call(e)))}),500),o.length){yield jv;var d=o[0];d.run.call(d)}else Vv()}catch(e){xe("Failed to load or run patch or its language file",e),Vv()}}));return function(){return e.apply(this,arguments)}}();Nn.once("dependenciesResolved",Yv);var Zv=()=>{(()=>{if("last"===it.get("startUp")){var e=it.get("mapCoords");e&&it.set("startUpLastPosition",e)}})(),(()=>{if(it.get("startUpLastOverlay")){var e=it.get("overlay");it.set("startUpOverlay",e)}})(),(()=>{if(it.get("startUpLastOverlay")){var e=it.get("product");it.set("startUpLastProduct",e)}})()};function qv(){return Xv.apply(this,arguments)}function Xv(){return(Xv=i((function*(){Date.now()>=new Date(1736573611105+2160*q).getTime()&&console.error("customColors: Migration period is over");var e=!1;for(var t of Object.keys(sa)){var n="settings_color2_".concat(t);if(tt.hasKey(n))try{var i=tt.get(n);yield sa[t].setCustomColor(i),tt.remove(n),e=!0}catch(e){console.error("customColors: Failed to parse color",t,e)}}var r=yield Ei.loadFromCloud();(e||r)&&Nn.emit("redrawLayers")}))).apply(this,arguments)}it.set("sessionCounter",it.get("sessionCounter")+1),(()=>{it.set("lastTimezoneOffset",(new Date).getTimezoneOffset(),{forceChange:!0});var e=()=>{var t=it.get("notifications");null!==t&&(t.usedTimezoneName=Intl.DateTimeFormat().resolvedOptions().timeZone,it.off("notifications",e),it.set("notifications",t,{forceChange:!0}))};e(),it.on("notifications",e)})(),window.addEventListener("beforeunload",Zv),window.addEventListener("visibilitychange",Zv),it.get("user")?qv():it.once("user",(e=>e&&qv()));W.BottomSlide=Jl,W.Calendar=In,W.ClickHandler=dp,W.Color=ta,W.DataTiler=Cm,W.Drag=Zl,W.EcmwfAnalysisProduct=Mi,W.EcmwfProduct=xi,W.Evented=He,W.ExternalSveltePlugin=hc,W.GlObj=em,W.HrrrProducts=ki,W.IDB=mi,W.IconProducts=Gi,W.LabelsLayer=Lv,W.LandMask=Sd,W.Layer=ho,W.Metric=da,W.MetricClasses=ya,W.NamProducts=zi,W.Overlay=as,W.OverlayClasses=hs,W.Particles=_v,W.Plugin=Kl,W.Product=Ci,W.Renderer=Zh,W.SatelliteProduct=Yi,W.StaticProduct=ji,W.SveltePanePlugin=fc,W.SveltePlugin=cc,W.Swipe=Xl,W.TagPlugin=wc,W.TileLayer=xm,W.TileLayerCanvas=Sm,W.TileLayerMultiPatch=Ed,W.Window=Ln,W.WindowPlugin=sc,W.appsFlyer=eh,W.baseMap=Id,W.broadcast=Nn,W.cityLabels=Dv,W.cloudSync=Tu,W.colors=sa,W.components=yp,W.connection=ht,W.css=u,W.dataLoader=ym,W.dataSpecifications=Je,W.detectDevice=f,W.device=gt,W.deviceLogging=Au,W.errorLogger=qt,W.externalPlugins=lp,W.fetch=Kr,W.format=An,W.ga=qn,W.geolocation=_d,W.glTileRender=um,W.http=Gt,W.idbInstances=Pi,W.interpolator=Ev,W.keyboard=$p,W.layers=is,W.legends=mo,W.levelUtils=Ol,W.loadArticlesOrWhatsNew=Ap,W.location=Jc,W.log=ni,W.lruCache=wt,W.map=Xd,W.mapGlobeCtrl=Uv,W.metrics=lo,W.models=au,W.notifications=Wh,W.ogTags=Vh,W.overlays=Al,W.params=Xm,W.particleRenderers=Pv,W.permanentPromos=av,W.picker=zv,W.plugins=Ac,W.pluginsCtrl=op,W.pois=ep,W.products=jr,W.promo=Sp,W.pushNotifications=Zu,W.query=Pc,W.renderCtrl=zm,W.renderTile=_m,W.renderUtils=Vl,W.renderers=Dm,W.reverseName=tp,W.rhMessage=Un,W.rootScope=Y,W.router=sd,W.seoParser=en,W.share=hp,W.showableErrorsService=ld,W.singleclick=ac,W.startupWeather=Jp,W.storage=tt,W.store=it,W.subscription=ui,W.tileInterpolator=Rm,W.tileLayer=Pm,W.timeAnimation=yv,W.trans=pn,W.user=ch,W.userAlerts=Vu,W.userConsent=$u,W.userFavs=Ph,W.utils=Fe,W.visibility=bv,W.broadcast.emit("dependenciesResolved")})).catch((e=>{console.error("Unable to bootstrap Leaflet & Windy core:",e)}));
